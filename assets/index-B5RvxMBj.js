(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var ke,C,un,Q,$t,_n,dn,fn,at,Xe,Qe,hn,pe={},mn=[],lo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,we=Array.isArray;function B(e,t){for(var n in t)e[n]=t[n];return e}function ct(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ve(e,t,n){var o,r,i,a={};for(i in t)i=="key"?o=t[i]:i=="ref"?r=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?ke.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return me(e,a,o,r,null)}function me(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++un,__i:-1,__u:0};return r==null&&C.vnode!=null&&C.vnode(i),i}function x(e){return e.children}function ge(e,t){this.props=e,this.context=t}function ae(e,t){if(t==null)return e.__?ae(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ae(e):null}function gn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return gn(e)}}function Ze(e){(!e.__d&&(e.__d=!0)&&Q.push(e)&&!Ve.__r++||$t!==C.debounceRendering)&&(($t=C.debounceRendering)||_n)(Ve)}function Ve(){for(var e,t,n,o,r,i,a,c=1;Q.length;)Q.length>c&&Q.sort(dn),e=Q.shift(),c=Q.length,e.__d&&(n=void 0,r=(o=(t=e).__v).__e,i=[],a=[],t.__P&&((n=B({},o)).__v=o.__v+1,C.vnode&&C.vnode(n),lt(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,i,r??ae(o),!!(32&o.__u),a),n.__v=o.__v,n.__.__k[n.__i]=n,bn(i,n,a),n.__e!=r&&gn(n)));Ve.__r=0}function pn(e,t,n,o,r,i,a,c,_,u,d){var l,m,h,f,g,E,v=o&&o.__k||mn,w=t.length;for(_=uo(n,t,v,_,w),l=0;l<w;l++)(h=n.__k[l])!=null&&(m=h.__i===-1?pe:v[h.__i]||pe,h.__i=l,E=lt(e,h,m,r,i,a,c,_,u,d),f=h.__e,h.ref&&m.ref!=h.ref&&(m.ref&&ut(m.ref,null,h),d.push(h.ref,h.__c||f,h)),g==null&&f!=null&&(g=f),4&h.__u||m.__k===h.__k?_=vn(h,_,e):typeof h.type=="function"&&E!==void 0?_=E:f&&(_=f.nextSibling),h.__u&=-7);return n.__e=g,_}function uo(e,t,n,o,r){var i,a,c,_,u,d=n.length,l=d,m=0;for(e.__k=new Array(r),i=0;i<r;i++)(a=t[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(_=i+m,(a=e.__k[i]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?me(null,a,null,null,null):we(a)?me(x,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?me(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,c=null,(u=a.__i=_o(a,n,_,l))!==-1&&(l--,(c=n[u])&&(c.__u|=2)),c==null||c.__v===null?(u==-1&&(r>d?m--:r<d&&m++),typeof a.type!="function"&&(a.__u|=4)):u!=_&&(u==_-1?m--:u==_+1?m++:(u>_?m--:m++,a.__u|=4))):e.__k[i]=null;if(l)for(i=0;i<d;i++)(c=n[i])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=ae(c)),kn(c,c));return o}function vn(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=vn(o[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=ae(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function et(e,t){return t=t||[],e==null||typeof e=="boolean"||(we(e)?e.some(function(n){et(n,t)}):t.push(e)),t}function _o(e,t,n,o){var r,i,a=e.key,c=e.type,_=t[n];if(_===null&&e.key==null||_&&a==_.key&&c===_.type&&(2&_.__u)==0)return n;if(o>(_!=null&&(2&_.__u)==0?1:0))for(r=n-1,i=n+1;r>=0||i<t.length;){if(r>=0){if((_=t[r])&&(2&_.__u)==0&&a==_.key&&c===_.type)return r;r--}if(i<t.length){if((_=t[i])&&(2&_.__u)==0&&a==_.key&&c===_.type)return i;i++}}return-1}function Ct(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||lo.test(t)?n:n+"px"}function xe(e,t,n,o,r){var i;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Ct(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||Ct(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(fn,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.t=o.t:(n.t=at,e.addEventListener(t,i?Qe:Xe,i)):e.removeEventListener(t,i?Qe:Xe,i);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function xt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.u==null)t.u=at++;else if(t.u<n.t)return;return n(C.event?C.event(t):t)}}}function lt(e,t,n,o,r,i,a,c,_,u){var d,l,m,h,f,g,E,v,w,b,y,M,T,H,te,z,J,j=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),i=[c=t.__e=n.__e]),(d=C.__b)&&d(t);e:if(typeof j=="function")try{if(v=t.props,w="prototype"in j&&j.prototype.render,b=(d=j.contextType)&&o[d.__c],y=d?b?b.props.value:d.__:o,n.__c?E=(l=t.__c=n.__c).__=l.__E:(w?t.__c=l=new j(v,y):(t.__c=l=new ge(v,y),l.constructor=j,l.render=ho),b&&b.sub(l),l.props=v,l.state||(l.state={}),l.context=y,l.__n=o,m=l.__d=!0,l.__h=[],l._sb=[]),w&&l.__s==null&&(l.__s=l.state),w&&j.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=B({},l.__s)),B(l.__s,j.getDerivedStateFromProps(v,l.__s))),h=l.props,f=l.state,l.__v=t,m)w&&j.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),w&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(w&&j.getDerivedStateFromProps==null&&v!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,y),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,y)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(l.props=v,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(U){U&&(U.__=t)}),M=0;M<l._sb.length;M++)l.__h.push(l._sb[M]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,y),w&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,f,g)})}if(l.context=y,l.props=v,l.__P=e,l.__e=!1,T=C.__r,H=0,w){for(l.state=l.__s,l.__d=!1,T&&T(t),d=l.render(l.props,l.state,l.context),te=0;te<l._sb.length;te++)l.__h.push(l._sb[te]);l._sb=[]}else do l.__d=!1,T&&T(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++H<25);l.state=l.__s,l.getChildContext!=null&&(o=B(B({},o),l.getChildContext())),w&&!m&&l.getSnapshotBeforeUpdate!=null&&(g=l.getSnapshotBeforeUpdate(h,f)),z=d,d!=null&&d.type===x&&d.key==null&&(z=yn(d.props.children)),c=pn(e,we(z)?z:[z],t,n,o,r,i,a,c,_,u),l.base=t.__e,t.__u&=-161,l.__h.length&&a.push(l),E&&(l.__E=l.__=null)}catch(U){if(t.__v=null,_||i!=null)if(U.then){for(t.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else for(J=i.length;J--;)ct(i[J]);else t.__e=n.__e,t.__k=n.__k;C.__e(U,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=fo(n.__e,t,n,o,r,i,a,_,u);return(d=C.diffed)&&d(t),128&t.__u?void 0:c}function bn(e,t,n){for(var o=0;o<n.length;o++)ut(n[o],n[++o],n[++o]);C.__c&&C.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(i){i.call(r)})}catch(i){C.__e(i,r.__v)}})}function yn(e){return typeof e!="object"||e==null?e:we(e)?e.map(yn):B({},e)}function fo(e,t,n,o,r,i,a,c,_){var u,d,l,m,h,f,g,E=n.props,v=t.props,w=t.type;if(w=="svg"?r="http://www.w3.org/2000/svg":w=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((h=i[u])&&"setAttribute"in h==!!w&&(w?h.localName==w:h.nodeType==3)){e=h,i[u]=null;break}}if(e==null){if(w==null)return document.createTextNode(v);e=document.createElementNS(r,w,v.is&&v),c&&(C.__m&&C.__m(t,i),c=!1),i=null}if(w===null)E===v||c&&e.data===v||(e.data=v);else{if(i=i&&ke.call(e.childNodes),E=n.props||pe,!c&&i!=null)for(E={},u=0;u<e.attributes.length;u++)E[(h=e.attributes[u]).name]=h.value;for(u in E)if(h=E[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=h;else if(!(u in v)){if(u=="value"&&"defaultValue"in v||u=="checked"&&"defaultChecked"in v)continue;xe(e,u,null,h,r)}}for(u in v)h=v[u],u=="children"?m=h:u=="dangerouslySetInnerHTML"?d=h:u=="value"?f=h:u=="checked"?g=h:c&&typeof h!="function"||E[u]===h||xe(e,u,h,E[u],r);if(d)c||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),pn(t.type==="template"?e.content:e,we(m)?m:[m],t,n,o,w=="foreignObject"?"http://www.w3.org/1999/xhtml":r,i,a,i?i[0]:n.__k&&ae(n,0),c,_),i!=null)for(u=i.length;u--;)ct(i[u]);c||(u="value",w=="progress"&&f==null?e.removeAttribute("value"):f!==void 0&&(f!==e[u]||w=="progress"&&!f||w=="option"&&f!==E[u])&&xe(e,u,f,E[u],r),u="checked",g!==void 0&&g!==e[u]&&xe(e,u,g,E[u],r))}return e}function ut(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){C.__e(r,n)}}function kn(e,t,n){var o,r;if(C.unmount&&C.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||ut(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){C.__e(i,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&kn(o[r],t,n||typeof e.type!="function");n||ct(e.__e),e.__c=e.__=e.__e=void 0}function ho(e,t,n){return this.constructor(e,n)}function mo(e,t,n){var o,r,i,a;t==document&&(t=document.documentElement),C.__&&C.__(e,t),r=(o=!1)?null:t.__k,i=[],a=[],lt(t,e=t.__k=ve(x,null,[e]),r||pe,pe,t.namespaceURI,r?null:t.firstChild?ke.call(t.childNodes):null,i,r?r.__e:t.firstChild,o,a),bn(i,e,a)}function go(e,t,n){var o,r,i,a,c=B({},e.props);for(i in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)i=="key"?o=t[i]:i=="ref"?r=t[i]:c[i]=t[i]===void 0&&a!==void 0?a[i]:t[i];return arguments.length>2&&(c.children=arguments.length>3?ke.call(arguments,2):n),me(e.type,c,o||e.key,r||e.ref,null)}function De(e){function t(n){var o,r;return this.getChildContext||(o=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(i){this.props.value!==i.value&&o.forEach(function(a){a.__e=!0,Ze(a)})},this.sub=function(i){o.add(i);var a=i.componentWillUnmount;i.componentWillUnmount=function(){o&&o.delete(i),a&&a.call(i)}}),n.children}return t.__c="__cC"+hn++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}ke=mn.slice,C={__e:function(e,t,n,o){for(var r,i,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),a=r.__d),a)return r.__E=r}catch(c){e=c}throw e}},un=0,ge.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=B({},this.state),typeof e=="function"&&(e=e(B({},n),this.props)),e&&B(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ze(this))},ge.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ze(this))},ge.prototype.render=x,Q=[],_n=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dn=function(e,t){return e.__v.__b-t.__v.__b},Ve.__r=0,fn=/(PointerCapture)$|Capture$/i,at=0,Xe=xt(!1),Qe=xt(!0),hn=0;var po=0;function s(e,t,n,o,r,i){t||(t={});var a,c,_=t;if("ref"in _)for(c in _={},t)c=="ref"?a=t[c]:_[c]=t[c];var u={type:e,props:_,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--po,__i:-1,__u:0,__source:r,__self:i};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)_[c]===void 0&&(_[c]=a[c]);return C.vnode&&C.vnode(u),u}const vo="modulepreload",bo=function(e,t){return new URL(e,t).href},At={},se=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),_=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.allSettled(n.map(u=>{if(u=bo(u,o),u in At)return;At[u]=!0;const d=u.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(!!o)for(let f=a.length-1;f>=0;f--){const g=a[f];if(g.href===u&&(!d||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${l}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":vo,d||(h.as="script"),h.crossOrigin="",h.href=u,_&&h.setAttribute("nonce",_),document.head.appendChild(h),d)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return r.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};var ce,A,Ne,Lt,be=0,wn=[],V=C,Ot=V.__b,Pt=V.__r,Tt=V.diffed,Vt=V.__c,Mt=V.unmount,It=V.__;function Fe(e,t){V.__h&&V.__h(A,e,be||t),be=0;var n=A.__H||(A.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function k(e){return be=1,yo(En,e)}function yo(e,t,n){var o=Fe(ce++,2);if(o.t=e,!o.__c&&(o.__=[En(void 0,t),function(c){var _=o.__N?o.__N[0]:o.__[0],u=o.t(_,c);_!==u&&(o.__N=[u,o.__[1]],o.__c.setState({}))}],o.__c=A,!A.__f)){var r=function(c,_,u){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(m){return!!m.__c});if(d.every(function(m){return!m.__N}))return!i||i.call(this,c,_,u);var l=o.__c.props!==c;return d.forEach(function(m){if(m.__N){var h=m.__[0];m.__=m.__N,m.__N=void 0,h!==m.__[0]&&(l=!0)}}),i&&i.call(this,c,_,u)||l};A.__f=!0;var i=A.shouldComponentUpdate,a=A.componentWillUpdate;A.componentWillUpdate=function(c,_,u){if(this.__e){var d=i;i=void 0,r(c,_,u),i=d}a&&a.call(this,c,_,u)},A.shouldComponentUpdate=r}return o.__N||o.__}function L(e,t){var n=Fe(ce++,3);!V.__s&&Sn(n.__H,t)&&(n.__=e,n.u=t,A.__H.__h.push(n))}function ko(e){return be=5,_t(function(){return{current:e}},[])}function _t(e,t){var n=Fe(ce++,7);return Sn(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function p(e,t){return be=8,_t(function(){return e},t)}function Se(e){var t=A.context[e.__c],n=Fe(ce++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(A)),t.props.value):e.__}function wo(){for(var e;e=wn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Te),e.__H.__h.forEach(tt),e.__H.__h=[]}catch(t){e.__H.__h=[],V.__e(t,e.__v)}}V.__b=function(e){A=null,Ot&&Ot(e)},V.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),It&&It(e,t)},V.__r=function(e){Pt&&Pt(e),ce=0;var t=(A=e.__c).__H;t&&(Ne===A?(t.__h=[],A.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Te),t.__h.forEach(tt),t.__h=[],ce=0)),Ne=A},V.diffed=function(e){Tt&&Tt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(wn.push(t)!==1&&Lt===V.requestAnimationFrame||((Lt=V.requestAnimationFrame)||So)(wo)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ne=A=null},V.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Te),n.__h=n.__h.filter(function(o){return!o.__||tt(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],V.__e(o,n.__v)}}),Vt&&Vt(e,t)},V.unmount=function(e){Mt&&Mt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Te(o)}catch(r){t=r}}),n.__H=void 0,t&&V.__e(t,n.__v))};var jt=typeof requestAnimationFrame=="function";function So(e){var t,n=function(){clearTimeout(o),jt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);jt&&(t=requestAnimationFrame(n))}function Te(e){var t=A,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),A=t}function tt(e){var t=A;e.__c=e.__(),A=t}function Sn(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function En(e,t){return typeof t=="function"?t(e):t}var W,nt=function(e,t){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},nt(e,t)},Dt=function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}nt(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}(t,e),t.is=function(n){return n instanceof t},t}(Error),Eo=function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e}();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(W||(W={}));var $o=["{","}",","],Co=function(){function e(t){this.input=new Eo(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile(function(o){return!function(r){return $o.includes(r)}(o)}).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:W.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:W.Text,value:this.readWhile(function(t){return t!=="{"&&t!=="}"})}},e.prototype.readVariableType=function(){var t=this.readWhile(function(n){return n!==","}).trim();return t==="plural"?W.Plural:t==="select"?W.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e}();function xo(e,t,n){for(var o=new Co(t),r=[],i=function(a){var c=a.options,_=a.type,u=a.value;if(_!==W.Variable)if(c)if(_!==W.Select)try{r.concat(c[new Intl.PluralRules(e).select(n[u])].map(i))}catch{r.concat(c.other.map(i))}else r.concat((c[n[u]]||c.other).map(i));else r.push(u);else r.push(n[u])};!o.input.done;)i(o.next());return r}var $n=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,i){return new Intl.DateTimeFormat(n.language,i).format(r)},this.formatNumber=function(r,i){return new Intl.NumberFormat(n.language,i).format(r)},this.translate=function(r,i){i===void 0&&(i={});var a=n.getMessageById(r,i.defaultMessage);if(typeof a=="string")try{return xo(n.language,a,i).join("")}catch{n.onError(new Dt(r,n.language))}return a+""},this.getMessageById=function(r,i){if(!n.memo[r]){var a=n.messages[r];a===void 0&&(a=r.split(".").reduce(function(c,_){return c?c[_]:void 0},n.messages)),typeof a!="string"&&(n.onError(new Dt(r,n.language)),a=i||r),n.memo[r]=a}return n.memo[r]};var o=t.find(function(r){return r.language===e});this.language=e,this.messages=o?o.messages:{}};function Ao(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var dt=De({language:"",locales:[],setLanguage:function(){},translator:new $n}),Lo=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,i=k(n);L(function(){i[1](n)},[n]);var a=new $n(i[0],o);return r&&(a.onError=r),ve(dt.Provider,{value:{language:i[0],locales:o,setLanguage:i[1],translator:a}},t)};function I(e){var t=Se(dt);return t.translator}var $=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,i=Ao(e,["children","html","id","tagName"]),a=Se(dt).translator.translate(n,i);return t?ve(r,{dangerouslySetInnerHTML:{__html:a}}):ve(x,null,a)};const ft=De(null),Cn=De(!0),Oo="light",Po="System",To="en",Vo="en-US",Mo={path:"game"},Z={theme:Oo,font:Po,language:To,locale:Vo,game:Mo},xn="2.1.0";var an,cn,ln;const An=(an=Z.game)!=null&&an.zip?(cn=Z.game)==null?void 0:cn.zip:(ln=Z.game)==null?void 0:ln.path,Ln="intercept.ink.json",Io=["Atrament://",window.location.host,window.location.pathname,An,"/",Ln].join(""),jo=Z.language,On=Z.locale,Pn=Z.theme,Tn=Z.font,ht=100,Re=10,ot=ht-Re*3,st=ht+Re*5;function Do(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}function Fo(e){const t=e.state.get().metadata.theme||Pn;e.settings.get("theme")||e.settings.set("theme",t)}function Ro(e){const t=e.state.get().metadata.font||Tn;e.settings.get("font")||e.settings.set("font",t)}const Vn="dark",Mn={"bg-color":"#4c3b4d","fg-color":"#FCFCFC","shade-color":"rgba(255, 255, 255, 0.1)","font-color":"#EEEEEE","accent-bg-color":"#EEEEEE","accent-fg-color":"#F7567C","border-radius":"0.5rem","border-radius-inline":"0.25rem"},Ho={name:Vn,theme:Mn},No=Object.freeze(Object.defineProperty({__proto__:null,default:Ho,name:Vn,theme:Mn},Symbol.toStringTag,{value:"Module"})),In="light",jn={"bg-color":"#FCFCFC","fg-color":"#5D576B","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#FCFCFC","accent-fg-color":"#F7567C","border-radius":"0.5rem","border-radius-inline":"0.25rem"},Bo={name:In,theme:jn},zo=Object.freeze(Object.defineProperty({__proto__:null,default:Bo,name:In,theme:jn},Symbol.toStringTag,{value:"Module"})),Dn="sepia",Fn={"bg-color":"#ffeedb","fg-color":"#4c3b4d","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#ffeedb","accent-fg-color":"#a53850","border-radius":"0.5rem","border-radius-inline":"0.25rem"},Go={name:Dn,theme:Fn},Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Go,name:Dn,theme:Fn},Symbol.toStringTag,{value:"Module"})),ye={},ie={},Wo=Object.assign({"../resources/themes/dark.json":No,"../resources/themes/light.json":zo,"../resources/themes/sepia.json":Uo});Object.values(Wo).map(({default:e})=>{e&&(ie[e.name]=e.theme)});["light","sepia","dark"].forEach(e=>{ie[e]&&(ye[e]=ie[e],delete ie[e])});Object.keys(ie).sort().forEach(e=>ye[e]=ie[e]);function Yo(e){Object.entries(ye[e]||ye[Pn]).forEach(([t,n])=>{document.documentElement.style.setProperty(`--${t}`,n)})}const fe='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',qo={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, ${fe}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, ${fe}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", ${fe}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", ${fe}`};let le=qo;(async()=>{{const e={},t=Object.assign({"../resources/fonts/fira-sans/index.js":()=>se(()=>import("./index-B5Af6un6.js"),[],import.meta.url),"../resources/fonts/lora/index.js":()=>se(()=>import("./index-CV2-a4rL.js"),[],import.meta.url),"../resources/fonts/merriweather/index.js":()=>se(()=>import("./index-CTntP6_h.js"),[],import.meta.url),"../resources/fonts/opendyslexic/index.js":()=>se(()=>import("./index-D7qIstJl.js"),[],import.meta.url)});await Promise.all(Object.values(t).map(n=>n().then(o=>{const r=o.default;r.name&&(e[r.name]=`${r.name}, ${r.fallback||"serif"}, ${fe}`)}))),Object.keys(e).sort().forEach(n=>le[n]=e[n])}})();function Ko(e){document.documentElement.style.setProperty("--font-game",le[e]||le[Tn])}async function Jo(e,t){if(e&&!document.fullscreenElement)try{await document.documentElement.requestFullscreen()}catch{t(!1)}else document.fullscreenElement&&document.exitFullscreen&&document.exitFullscreen()}function Xo(e,t){Jo(e,t)}function Qo(e){e.settings.defineHandler("theme",(t,n)=>{Yo(n)}),e.settings.defineHandler("font",(t,n)=>{Ko(n)}),e.settings.defineHandler("fontSize",(t,n)=>{document.documentElement.style.setProperty("--game-font-size",`${n}%`)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{Xo(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function Zo(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got ${typeof e}`);if(e.length===0)return[];const t=JSON.parse(JSON.stringify(e));for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}function es(e){var o,r;const t=(o=e.tags)==null?void 0:o.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game","background",t));const n=(r=e.tags)==null?void 0:r.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game","background_page",n))}function ts(e){var t;(t=e.tags)!=null&&t.SHUFFLE_CHOICES&&(e.choices=Zo(e.choices))}function ns(e){[es,ts].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function os(e,t){const n=()=>{let r;try{r=e.ink.evaluateFunction(t,[],!0),e.state.setKey("TOOLBAR",r.output)}catch(i){e.ink.story().onError(i.toString())}},o=()=>setTimeout(n,0);e.on("game/continueStory",o),e.on("ink/evaluateFunction",r=>{r.function!==t&&o()}),n()}function ss(e){e.ink.onError(n=>e.state.setKey("ERROR",n)),e.state.setKey("OVERLAY",{activeOverlay:null,content:"",title:null});const t=e.state.get().metadata;t.toolbar?os(e,t.toolbar):t.title?e.state.setKey("TOOLBAR",t.title):e.state.setKey("TOOLBAR","__DEFAULT__")}async function rs(e,t){e.on("*",(n,o)=>console.log(`%c Atrament > ${n} `,"color: #111111; background-color: #7FDBFF;",o)),Qo(e),await e.init(t,{applicationID:Io,settings:{fullscreen:!1,animation:!0,mute:!1,volume:50,fontSize:100}}),e.on("game/start",()=>ss(e)),await e.game.init(An,Ln),await e.game.initInkStory(),Fo(e),Ro(e),ns(e),Do(e)}const is=[{language:"en",messages:{yes:"Yes",no:"No",cancel:"Cancel",back:"Go back","default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.loadgame":"Load game","main.savegame":"Save game","main.continue":"Continue","main.emptyslot":"Empty slot","main.continue-session":"Continue game {session}","main.autosave":"Autosave: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"New save","main.delete-session":"Delete this session?","main.delete-save":"Delete this saved game?","main.confirm-load":"Load this game?","main.confirm-save":"Overwrite this save?","main.settings":"Settings","main.about":"About","game.end":"The end","game.save-and-quit":"Save game and quit","game.quit":"Quit game","game.click-to-continue":"Click to continue","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz.","debug.info":"Info","debug.info.ink-file":"Ink file","debug.info.story-seed":"Story seed","debug.info.current-turn-index":"Current turn index","debug.global-tags":"Global tags","debug.variables":"Variables","debug.variables.filter-by-name":"Filter by name","debug.variables.name":"Name","debug.variables.value":"Value","debug.variables.cancel":"Cancel","debug.variables.save":"Save","debug.visits":"Visits","debug.go-to-path":"Go to path","debug.functions":"Functions","debug.functions.arguments":"Arguments","debug.functions.arguments_placeholder":'JSON-formatted agruments, i.e. ["arg1", 5]',"debug.functions.run-function":"Run function","debug.functions.returned-value":"Returned value","debug.functions.output":"Output","about.components":"Components and libraries","about.iftf_support":"Made with the support of the {iftf}"}},{language:"ua",messages:{yes:"Так",no:"Ні",cancel:"Скасувати",back:"Назад","default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.loadgame":"Завантажити гру","main.savegame":"Зберегти гру","main.continue":"Продовжити","main.emptyslot":"Порожній слот","main.continue-session":"Продовжити гру {session}","main.autosave":"Автозбереження: {date}","main.checkpoint":"Контрольна точка","main.checkpoint-named":"Контрольна точка: {name}","main.new-save":"Нове збереження","main.delete-session":"Видалити сесію?","main.delete-save":"Видалити збережену гру?","main.confirm-load":"Завантажити цю гру?","main.confirm-save":"Перезаписати це збереження?","main.settings":"Налаштування","main.about":"Про гру","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","game.quit":"Вийти з гри","game.click-to-continue":"Натисни, щоб продовжити","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб.","debug.info":"Інформація","debug.info.ink-file":"Ink-скрипт","debug.info.story-seed":"RNG-сід історії","debug.info.current-turn-index":"Індекс поточного ходу","debug.global-tags":"Глобальні теги","debug.variables":"Змінні","debug.variables.filter-by-name":"Фільтр за ім'ям","debug.variables.name":"Ім'я","debug.variables.value":"Значення","debug.variables.cancel":"Скасувати","debug.variables.save":"Зберегти","debug.visits":"Візити","debug.go-to-path":"Перейти до","debug.functions":"Функції","debug.functions.arguments":"Аргументи","debug.functions.arguments_placeholder":'Аргументи у JSON-форматі, наприклад: ["arg1", 5]',"debug.functions.run-function":"Виконати функцію","debug.functions.returned-value":"Повернене значення","debug.functions.output":"Вивід","about.components":"Компоненти та бібліотеки","about.iftf_support":"Зроблено за підтримки фонду {iftf}"}}],as="_application_wrapper_6fi81_1",cs={application_wrapper:as};let Be;function Rn(){window.innerHeight!==Be&&(Be=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${Be-1}px`))}window.addEventListener("resize",Rn);const ls=({children:e})=>(L(Rn,[]),s("div",{class:[cs.application_wrapper,"atrament-ui-app"].join(" "),children:e})),us="_error_modal_flonq_1",_s="_error_modal_content_flonq_12",ds="_error_message_flonq_19",ze={error_modal:us,error_modal_content:_s,error_message:ds},fs="_backdrop_rne3i_1",hs={backdrop:fs},Hn=({onClick:e})=>s("div",{class:[hs.backdrop,"atrament-backdrop"].join(" "),onClick:e}),ms="_modal_7txxf_1",gs={modal:ms},Nn=({children:e})=>s("div",{class:[gs.modal,"atrament-modal"].join(" "),children:e}),ps="_close_eyo4x_1",vs={close:ps},mt=({onClick:e})=>s("div",{class:vs.close,children:s("button",{onClick:e,title:"Close",children:"✕"})}),bs="_block_5hv3c_1",ys="_block_start_5hv3c_6",ks="_block_end_5hv3c_10",Ge={block:bs,block_start:ys,block_end:ks},K=({children:e,align:t=null})=>{const n=[Ge.block];return t==="start"?n.push(Ge.block_start):t==="end"&&n.push(Ge.block_end),n.push("atrament-block"),s("div",{class:n.join(" "),children:e})},Ft=()=>{},Bn=({close:e=Ft,message:t})=>s("div",{class:ze.error_modal,children:[s(Hn,{onClick:e}),s(Nn,{children:s("div",{class:ze.error_modal_content,children:[e!==Ft?s(mt,{onClick:e}):"",s(K,{children:s("p",{class:ze.error_message,children:t})})]})})]}),ws="_container_4l08p_1",Ss={container:ws},Ee=({children:e,style:t={}})=>s("div",{style:t,class:[Ss.container,"atrament-container"].join(" "),children:e}),Es="_loading_ffxmc_1",$s={loading:Es},Cs="_container_flex_at0vo_1",xs={container_flex:Cs},gt=({children:e})=>s("div",{class:[xs.container_flex,"atrament-flex-container"].join(" "),children:e}),As="_sk_cube_grid_fv0g6_1",Ls="_sk_cube1_fv0g6_17",Os="_sk_cube2_fv0g6_18",Ps="_sk_cube3_fv0g6_19",Ts="_sk_cube4_fv0g6_20",Vs="_sk_cube5_fv0g6_21",Ms="_sk_cube6_fv0g6_22",Is="_sk_cube7_fv0g6_23",js="_sk_cube8_fv0g6_24",Ds="_sk_cube9_fv0g6_25",N={sk_cube_grid:As,sk_cube1:Ls,sk_cube2:Os,sk_cube3:Ps,sk_cube4:Ts,sk_cube5:Vs,sk_cube6:Ms,sk_cube7:Is,sk_cube8:js,sk_cube9:Ds},Fs=()=>s("div",{class:N.sk_cube_grid,children:[s("div",{class:N.sk_cube1}),s("div",{class:N.sk_cube2}),s("div",{class:N.sk_cube3}),s("div",{class:N.sk_cube4}),s("div",{class:N.sk_cube5}),s("div",{class:N.sk_cube6}),s("div",{class:N.sk_cube7}),s("div",{class:N.sk_cube8}),s("div",{class:N.sk_cube9})]}),Rs=()=>s(Ee,{children:s(gt,{children:s("div",{class:[$s.loading,"atrament-loading"].join(" "),children:s(Fs,{})})})});var Hs={};function Ae(e,t){for(var n in t)e[n]=t[n];return e}function Ns(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,i=e.match(r),a={};if(i&&i[1])for(var c=i[1].split("&"),_=0;_<c.length;_++){var u=c[_].split("=");a[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=rt(e.replace(r,"")),t=rt(t||"");for(var d=Math.max(e.length,t.length),l=0;l<d;l++)if(t[l]&&t[l].charAt(0)===":"){var m=t[l].replace(/(^:|[+*?]+$)/g,""),h=(t[l].match(/[+*?]+$/)||Hs)[0]||"",f=~h.indexOf("+"),g=~h.indexOf("*"),E=e[l]||"";if(!E&&!g&&(h.indexOf("?")<0||f)){o=!1;break}if(a[m]=decodeURIComponent(E),f||g){a[m]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){o=!1;break}return(n.default===!0||o!==!1)&&a}function Bs(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function zs(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:rt(n.props.path).map(Gs).join("")}(e),e.props}function rt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Gs(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Us={},ee=[],Rt=[],D=null,zn={url:pt()},Ws=De(zn);function pt(){var e;return""+((e=D&&D.location?D.location:D&&D.getCurrentLocation?D.getCurrentLocation():typeof location<"u"?location:Us).pathname||"")+(e.search||"")}function Y(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var o=ee.length;o--;)if(ee[o].canRoute(n))return!0;return!1}(e)&&function(n,o){o===void 0&&(o="push"),D&&D[o]?D[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)}(e,t?"replace":"push"),Gn(e)}function Gn(e){for(var t=!1,n=0;n<ee.length;n++)ee[n].routeTo(e)&&(t=!0);return t}function Ys(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return Y(t)}}function qs(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Ks(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Ys(t))return qs(e)}while(t=t.parentNode)}}var Ht=!1;function Un(e){e.history&&(D=e.history),this.state={url:e.url||pt()}}Ae(Un.prototype=new ge,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=et(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Ht||(Ht=!0,D||addEventListener("popstate",function(){Gn(pt())}),addEventListener("click",Ks)),ee.push(this),D&&(this.u=D.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),ee.splice(ee.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(zs).sort(Bs);for(var n=0;n<e.length;n++){var o=e[n],r=Ns(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,i=t.url,a=this.c,c=this.g(et(e.children),i);if(c&&(o=go(c[0],Ae(Ae({url:i,matches:n=c[1]},n),{key:void 0,ref:void 0}))),i!==(a&&a.url)){Ae(zn,a=this.c={url:i,previous:a&&a.url,current:o,path:o?o.props.path:null,matches:n}),a.router=this,a.active=o?[o]:[];for(var _=Rt.length;_--;)Rt[_]({});typeof r=="function"&&r(a)}return ve(Ws.Provider,{value:a},o)}});function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Me.apply(null,arguments)}var re;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(re||(re={}));var Nt=function(e){return e};function Js(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,i=o.map(function(b){var y=Nt(Me({pathname:"/",search:"",hash:"",state:null,key:Gt()},typeof b=="string"?Ut(b):b));return y}),a=Bt(r??i.length-1,0,i.length-1),c=re.Pop,_=i[a],u=zt(),d=zt();function l(b){return typeof b=="string"?b:Xs(b)}function m(b,y){return y===void 0&&(y=null),Nt(Me({pathname:_.pathname,search:"",hash:""},typeof b=="string"?Ut(b):b,{state:y,key:Gt()}))}function h(b,y,M){return!d.length||(d.call({action:b,location:y,retry:M}),!1)}function f(b,y){c=b,_=y,u.call({action:c,location:_})}function g(b,y){var M=re.Push,T=m(b,y);function H(){g(b,y)}h(M,T,H)&&(a+=1,i.splice(a,i.length,T),f(M,T))}function E(b,y){var M=re.Replace,T=m(b,y);function H(){E(b,y)}h(M,T,H)&&(i[a]=T,f(M,T))}function v(b){var y=Bt(a+b,0,i.length-1),M=re.Pop,T=i[y];function H(){v(b)}h(M,T,H)&&(a=y,f(M,T))}var w={get index(){return a},get action(){return c},get location(){return _},createHref:l,push:g,replace:E,go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(y){return u.push(y)},block:function(y){return d.push(y)}};return w}function Bt(e,t,n){return Math.min(Math.max(e,t),n)}function zt(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function Gt(){return Math.random().toString(36).substr(2,8)}function Xs(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,i=e.hash,a=i===void 0?"":i;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function Ut(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Qs(e,t,n){let o=new Set(t).add(void 0);return e.listen((r,i,a)=>{o.has(a)&&n(r,i,a)})}function Zs(e,t={}){let[,n]=k({}),[o]=k(e.get());return L(()=>{o!==e.get()&&n({})},[]),L(()=>{let r,i,a,c=()=>{r||(r=1,i=setTimeout(()=>{r=void 0,n({})}))};return t.keys?a=Qs(e,t.keys,c):a=e.listen(c),()=>{a(),clearTimeout(i)}},[e,""+t.keys]),e.get()}const S=()=>{const e=Se(ft),t=p(_=>_?e.game.getAssetPath(_):null,[e]),n=p((_,u)=>{e.settings.set(_,u),e.settings.save()},[e]),o=p((..._)=>e.state.setSubkey(..._),[e]),r=p((_,u=[])=>{let d={};try{d=e.ink.evaluateFunction(_,u,!0)}catch(l){e.ink.story().onError&&e.ink.story().onError(l.toString()),d.error=l.toString()}return d},[e]),i=p((_,u)=>{try{e.ink.setVariable(_,u)}catch(d){e.ink.story().onError(d.toString())}},[e]),a=p(_=>{let u;try{u=e.ink.getVariable(_)}catch(d){e.ink.story().onError(d.toString())}return u},[e]),c=p(()=>{e.state.setSubkey("game","background",null),e.state.setSubkey("game","background_page",null)},[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:e.game.makeChoice,continueStory:e.game.continueStory,getAssetPath:t,updateSettings:n,setStateSubkey:o,evaluateInkFunction:r,setInkVariable:i,getInkVariable:a,resetBackground:c}},P=(e=void 0)=>{const t=Se(ft);return Zs(t.store,{keys:e})},Wn=()=>{const{evaluateInkFunction:e,setStateSubkey:t}=S(),n=P(["OVERLAY"]),o=p((a,c)=>{t("OVERLAY","activeOverlay",a);let _=c;const u=c.split(`
`),l=u.shift().match(/\[title\](.+?)\[\/title\]/i);l&&(t("OVERLAY","title",l[1]),_=u.join(`
`)),t("OVERLAY","content",_)},[t]),r=p(()=>{const a=n.OVERLAY.activeOverlay;if(a){const c=e(a);o(a,c.output)}},[n.OVERLAY.activeOverlay,o,e]),i=p(()=>{t("OVERLAY","activeOverlay",null),t("OVERLAY","content",""),t("OVERLAY","title",null)},[t]);return{refreshOverlay:r,closeOverlay:i,setOverlayContent:o,overlay:{active:n.OVERLAY.activeOverlay,content:n.OVERLAY.content.split(`
`),title:n.OVERLAY.title}}},er="_menu_container_131p9_1",tr="_menu_toggle_131p9_12",nr="_menu_content_131p9_26",or="_atrament_version_131p9_30",sr="_atrament_about_131p9_44",rr="_atrament_appversion_131p9_50",ne={menu_container:er,menu_toggle:tr,menu_content:nr,atrament_version:or,atrament_about:sr,atrament_appversion:rr},ir=()=>s("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:s("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})}),ar=()=>s("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),cr=()=>s("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),lr=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",children:[s("path",{d:"M0 0h24v24H0z",fill:"none"}),s("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),ur="_link_menu_go234_1",_r={link_menu:ur},F=({children:e,key:t,onClick:n,attributes:o={}})=>s("div",{children:s("button",{onClick:n,class:_r.link_menu,...o,children:e},t)}),dr="_link_home_1sln5_1",fr={link_home:dr},Yn=({children:e,onClick:t})=>s("button",{onClick:t,class:fr.link_home,children:e},"mainmenu"),hr="_header_1v1u3_1",mr="_header_align_1v1u3_9",Wt={header:hr,header_align:mr},Ie=({children:e})=>s("div",{class:[Wt.header,"atrament-header"].join(" "),children:s("div",{class:Wt.header_align,children:e})}),gr={break:"_break_jkn3k_1"},he=()=>s("div",{class:gr.break}),pr="_debug_toggle_198av_1",vr="_debug_container_198av_14",br="_container_198av_29",yr="_input_div_198av_45",kr="_button_198av_49",wr="_input_198av_45",Sr="_errormsg_198av_73",O={debug_toggle:pr,debug_container:vr,container:br,input_div:yr,button:kr,input:wr,errormsg:Sr},Er="_collapse_19tvh_1",$r="_collapse_title_19tvh_6",Cr="_collapse_children_19tvh_12",Ue={collapse:Er,collapse_title:$r,collapse_children:Cr},ue=({title:e,children:t,open:n=!1})=>s("details",{class:Ue.collapse,open:n,children:[s("summary",{class:Ue.collapse_title,children:e}),s("div",{class:Ue.collapse_children,children:t})]}),xr="_table_1jx8s_1",Ar="_caption_1jx8s_47",Lr="_page_1jx8s_73",Or="_page_active_1jx8s_81",Le={table:xr,caption:Ar,page:Lr,page_active:Or},$e=({columns:e=[],data:t=[],pageSize:n=0})=>{const[o,r]=k(0);L(()=>{r(0)},[t]);let i=1,a=0,c=t.length;n&&(i=Math.ceil(t.length/n),a=o*n,c=a+n);const _=d=>{r(+d.target.value)},u=t.slice(a,c);return s("table",{class:Le.table,children:[n>0&&s("caption",{class:Le.caption,children:[...Array(i).keys()].map(d=>s("button",{onClick:_,value:d,class:d===o?Le.page_active:Le.page,children:d+1},d))}),e.length>0&&s("thead",{children:s("tr",{children:e.map((d,l)=>s("th",{style:d.style,children:d.name},l))})}),u.length>0&&s("tbody",{children:u.map((d,l)=>s("tr",{children:d.map((m,h)=>s("td",{children:m},h))},l))})]})},Pr=()=>{const{atrament:e}=S(),t=I(),o=e.ink.story().state,r=e.state.get().game,i=[[t.translate("debug.info.ink-file"),`${r.$path}/${r.$file}`],[t.translate("debug.info.story-seed"),o.storySeed],[t.translate("debug.info.current-turn-index"),o.currentTurnIndex]];return s(ue,{title:t.translate("debug.info"),open:!0,children:s($e,{data:i})})},Tr=({closeFn:e})=>{const{atrament:t}=S(),[n,o]=k(""),[r,i]=k(""),a=_=>{o(_.target.value),i("")},c=()=>{if(n){try{t.ink.goTo(n),t.game.continueStory(),e()}catch(_){i(_.toString())}o("")}};return s(x,{children:[s("div",{class:O.container,children:[s("div",{children:[s($,{id:"debug.go-to-path"}),":"]}),s("div",{class:O.input_div,children:s("input",{class:O.input,type:"text",value:n,onInput:a})}),s("div",{children:[s("button",{class:O.button,onClick:c,children:">>>"})," ",s("br",{})]})]}),s("div",{class:O.container,children:s("span",{class:O.errormsg,children:r})})]})},Vr=()=>{const{atrament:e}=S(),t=I(),n=e.ink.getGlobalTags();return s(ue,{title:t.translate("debug.global-tags"),open:!0,children:s($e,{data:Object.entries(n)})})},Mr="_button_pofct_1",Ir="_button_close_pofct_33",jr="_input_pofct_65",Dr="_toggle_pofct_91",Fr="_listview_pofct_103",q={button:Mr,button_close:Ir,input:jr,toggle:Dr,listview:Fr},Rr="_checkbox_wrapper_1bc4s_1",Hr="_checkbox_1bc4s_1",Yt={checkbox_wrapper:Rr,checkbox:Hr},He=({enabled:e,onChange:t})=>s("div",{class:Yt.checkbox_wrapper,children:s("input",{type:"checkbox",class:Yt.checkbox,checked:e,onChange:t})}),Nr=({value:e,setNewValue:t})=>{const n=o=>t(+o.target.value);return s("input",{class:q.input,type:"number",value:e,onInput:n})},Br=({value:e,setNewValue:t})=>{const n=o=>t(o.target.value);return s("input",{class:q.input,type:"text",value:e,onInput:n})},zr=({value:e,setNewValue:t})=>{const n=o=>t(o.target.checked);return s("div",{class:q.toggle,children:s(He,{enabled:e,onChange:n})})},Gr=({name:e,value:t})=>{if(e===t._originNames[0]&&t.size===0){const o=[...t.origins[0]._itemNameToValues.keys()];return s("span",{class:q.listview,children:JSON.stringify(o).replace(/,/g,", ")})}const n=[];return t.forEach((o,r)=>n.push([JSON.parse(r),o])),s("ul",{class:q.listview,children:n.map(([o,r])=>s("li",{children:[s("abbr",{title:o.originName,children:o.itemName}),": ",r]},o))})},Ur=({name:e,value:t})=>{const{getInkVariable:n,setInkVariable:o}=S(),r=I(),[i,a]=k(!1),[c,_]=k(!1),[u,d]=k(!1);L(()=>{const f=n(e);_(f),d(f)},[e,n,_,d]);const l=f=>{f.preventDefault(),a(!0)},m=()=>a(!1),h=()=>{u!==c&&(o(e,u),_(u)),a(!1)};return i?s(x,{children:[s("button",{class:q.button_close,onClick:m,title:r.translate("debug.variables.cancel"),children:"X"}),typeof t=="number"&&s(Nr,{value:u,setNewValue:d}),typeof t=="string"&&s(Br,{value:u,setNewValue:d}),typeof t=="boolean"&&s(zr,{value:u,setNewValue:d}),s("button",{class:q.button,onClick:h,title:r.translate("debug.variables.save"),children:">"})]}):s(x,{children:typeof u=="object"?s(Gr,{name:e,value:u}):s("button",{class:q.button,onClick:l,children:JSON.stringify(u)})})};function Wr(e){const t=e.ink.getVariables();return Object.entries(t).sort((o,r)=>o[0]>r[0]?0:-1)}const Yr=({variables:e})=>{const t=I(),n=e.map((o,r)=>[o[0],s(Ur,{name:o[0],value:o[1]},r)]);return s($e,{columns:[{name:t.translate("debug.variables.name"),style:{width:"25%","text-align":"left"}},{name:t.translate("debug.variables.value"),style:{"text-align":"left"}}],data:n,pageSize:10})},qr=()=>{const[e,t]=k(""),{atrament:n}=S(),o=I(),r=Wr(n).filter(a=>a[0].includes(e)),i=a=>{t(a.target.value)};return s(ue,{title:o.translate("debug.variables"),children:[s("div",{class:O.input_div,children:s("input",{class:O.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:i})}),s(Yr,{variables:r})]})};function Kr(e){const t=e.ink.story().state._visitCounts,n=[];for(let o of t)n.push(o);return n.sort((o,r)=>o[0]>r[0]?0:-1)}const Jr=()=>{const{atrament:e}=S(),t=I(),n=Kr(e);return s(ue,{title:t.translate("debug.visits"),children:s($e,{data:n})})},Xr=()=>{const{atrament:e}=S(),t=I(),[n,o]=k(""),[r,i]=k(null),[a,c]=k(""),[_,u]=k(null),d=f=>{let g=[];try{g=JSON.parse(f)}catch{}return g},l=f=>{o(f.target.value),c(""),u(null)},m=f=>{i(f.target.value),c(""),u(null)},h=()=>{if(n)try{const f=e.ink.evaluateFunction(n,d(r),!0);u(f),c("")}catch(f){c(f.toString())}};return s(ue,{title:t.translate("debug.functions"),children:[s("div",{class:O.container,children:[s("div",{children:[s($,{id:"debug.functions.run-function"}),":"]}),s("div",{class:O.input_div,children:s("input",{class:O.input,type:"text",value:n,onInput:l})})]}),s("div",{class:O.container,children:[s("div",{children:[s($,{id:"debug.functions.arguments"}),":"]}),s("div",{class:O.input_div,children:s("input",{class:O.input,type:"text",value:r,onInput:m,placeholder:t.translate("debug.functions.arguments_placeholder"),title:t.translate("debug.functions.arguments_placeholder")})}),s("div",{children:[s("button",{class:O.button,onClick:h,children:">>>"})," ",s("br",{})]})]}),s("div",{class:O.container,children:s("pre",{children:n&&`${n}(${r?d(r).map(JSON.stringify).join(", "):""})`})}),a&&s("div",{class:O.container,children:s("span",{class:O.errormsg,children:a})}),s("div",{class:O.container,children:_&&s($e,{data:[[t.translate("debug.functions.returned-value"),JSON.stringify(_.returned)],[t.translate("debug.functions.output"),s("pre",{children:_.output},"output")]]})})]})},Qr=()=>{const[e,t]=k(!1),[n,o]=k(!1),r=p(()=>t(!e),[e]),i=p(a=>{a.code==="Backquote"&&(n?(r(),o(!1)):(o(!0),setTimeout(()=>o(!1),1e3)))},[r,n,o]);return L(()=>(document.addEventListener("keydown",i,!1),()=>{document.removeEventListener("keydown",i,!1)}),[i]),e?s("div",{class:O.debug_container,children:[s(mt,{onClick:r}),s(Pr,{}),s(Vr,{}),s(qr,{}),s(Jr,{}),s(Xr,{}),s(Tr,{closeFn:r})]}):s("button",{class:O.debug_toggle,onClick:r,children:"⚙"})},Zr=()=>{const{metadata:e}=P(["metadata"]);return e.debug?s(Qr,{}):s(x,{})},ei="_container_kfk52_1",ti="_prompt_kfk52_7",ni="_menu_item_kfk52_15",oi="_small_kfk52_49",si="_is_deletable_kfk52_54",ri="_delete_button_kfk52_58",ii="_delete_item_kfk52_79",R={container:ei,prompt:ti,menu_item:ni,small:oi,is_deletable:si,delete_button:ri,delete_item:ii},qt=({prompt:e,onAccept:t,onReject:n,attributes:o})=>s("div",{class:R.container,children:[s("div",{class:R.prompt,children:e}),s("button",{onClick:t,class:`${R.menu_item} ${R.delete_item} ${R.small}`,...o,children:s($,{id:"yes"})}),s("button",{onClick:n,class:`${R.menu_item} ${R.small}`,...o,children:s($,{id:"no"})})]}),vt=({children:e,key:t,onSelect:n,isDisabled:o=!1,isDeletable:r=!1,onDelete:i=()=>{},deletePrompt:a="",hasConfirmation:c=!1,confirmPrompt:_="",attributes:u={}})=>{const[d,l]=k(!1),[m,h]=k(!1),f=()=>l(!0),g=()=>l(!1),E=y=>{i(y),g()},v=()=>h(!0),w=()=>h(!1),b=y=>{n(y),w()};return m?s(qt,{prompt:_,onAccept:b,onReject:w,attributes:u}):d?s(qt,{prompt:a,onAccept:E,onReject:g,attributes:u}):s("div",{class:R.container,children:[s("button",{onClick:c?v:n,disabled:o,class:`${R.menu_item} ${r&&R.is_deletable}`,...u,children:e},t),r&&!o&&s("button",{onClick:f,class:`${R.menu_item} ${R.delete_button}`,...u,children:"✕"},t)]})},Kt=e=>new Date(e).toLocaleString(On),qn=({loadGame:e,hasConfirmation:t=!1})=>{const[n,o]=k([]),r=I(),{atrament:i}=S(),{metadata:a}=P(["metadata"]),c=p(async()=>{const d=await i.game.listSaves(),l=[],m=d.filter(f=>f.type===i.game.SAVE_AUTOSAVE).map(f=>({...f,slot:r.translate("main.autosave",{date:Kt(f.date)})}));if(m.length&&l.push(m[0]),a.load_from_checkpoints){const f=d.filter(g=>g.type===i.game.SAVE_CHECKPOINT).map(g=>({...g,slot:typeof g.name=="boolean"?r.translate("main.checkpoint"):r.translate("main.checkpoint-named",{name:g.name})}));f.length&&l.push(...f)}const h=d.filter(f=>f.type===i.game.SAVE_GAME).map(f=>({...f,slot:Kt(f.date)}));l.push(...h),o(l)},[i,a,r]),_=p(async d=>{const l=d.target.getAttribute("data-save");await e(l)},[e]),u=p(async d=>{const l=d.target.getAttribute("data-save");await i.game.removeSave(l),await c()},[i,c]);return L(()=>{(async()=>c())()},[c]),s(x,{children:n.map(d=>s(vt,{onSelect:_,onDelete:u,isDisabled:!d.type,isDeletable:d.type,deletePrompt:r.translate("main.delete-save"),hasConfirmation:t,confirmPrompt:r.translate("main.confirm-load"),attributes:{"data-save":d.id},children:d.slot},d.name))})},ai=e=>new Date(e).toLocaleString(On),ci=({saveGame:e})=>{const[t,n]=k([]),o=I(),{atrament:r}=S(),{metadata:i}=P(["metadata"]),a=i.saves?+i.saves:0,c=p(async()=>{const l=(await r.game.listSaves()).filter(m=>m.type===r.game.SAVE_GAME).map(m=>({...m,slot:ai(m.date)}));l.length<a&&l.push({name:l.length+1,slot:o.translate("main.new-save")}),n(l)},[r,o,a]),_=p(async d=>{const l=d.target.getAttribute("data-savename");await e(l),await c()},[e,c]),u=p(async d=>{const l=d.target.getAttribute("data-saveid");await r.game.removeSave(l),await c()},[r,c]);return L(()=>{(async()=>c())()},[c]),s(x,{children:t.map(d=>s(vt,{onSelect:_,onDelete:u,isDisabled:!1,isDeletable:d.type,deletePrompt:o.translate("main.delete-save"),hasConfirmation:d.type,confirmPrompt:o.translate("main.confirm-save"),attributes:{"data-saveid":d.id,"data-savename":d.name},children:d.slot},d.name))})},li="_settings_container_1lyb2_1",ui={settings_container:li},_i=()=>{const{updateSettings:e}=S(),t=P(["settings"]),n=o=>e("fullscreen",o.target.checked);return s("div",{class:["atrament-settings-fullscreen"].join(" "),children:[s(He,{enabled:t.settings.fullscreen,onChange:n})," ",s($,{id:"settings.fullscreen"})]})},di="_settings_sound_container_z755p_1",fi="_settings_sound_input_container_z755p_6",hi="_settings_sound_volume_z755p_10",mi="_settings_sound_icon_z755p_17",oe={settings_sound_container:di,settings_sound_input_container:fi,settings_sound_volume:hi,settings_sound_icon:mi},gi=()=>{const{updateSettings:e}=S(),t=P(["settings"]),n=a=>e("mute",!a.target.checked),o=a=>e("volume",a.target.value),{mute:r,volume:i}=t.settings;return s(x,{children:[s("div",{class:[oe.settings_sound,"atrament-settings-sound"].join(" "),children:[s(He,{enabled:!r,onChange:n})," ",s($,{id:"settings.sound"})]}),s("div",{class:oe.settings_sound_container,children:[s("div",{class:oe.settings_sound_icon,children:s(cr,{})}),s("div",{class:oe.settings_sound_input_container,children:s("input",{class:oe.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:i,onChange:o})}),s("div",{class:oe.settings_sound_icon,children:s(ar,{})})]})]})},pi="_settings_fontsize_container_1ho7s_1",vi="_settings_font_a_1ho7s_6",bi="_settings_fontsize_input_container_1ho7s_12",yi="_settings_fontsize_input_1ho7s_12",ki="_settings_font_sample_1ho7s_22",X={settings_fontsize_container:pi,settings_font_a:vi,settings_fontsize_input_container:bi,settings_fontsize_input:yi,settings_font_sample:ki},Kn=[];for(let e=ot;e<=st;e+=Re)Kn.push(e);const wi=()=>{const{updateSettings:e}=S(),t=P(["settings"]),{font:n,fontSize:o}=t.settings,r=i=>e("fontSize",i.target.value);return s("div",{class:[X.settings_text,"atrament-settings-text"].join(" "),children:[s("div",{class:X.settings_fontsize_container,children:[s("div",{class:X.settings_font_a,style:{"font-size":`${ot}%`},children:"A"}),s("div",{class:X.settings_fontsize_input_container,children:[s("input",{class:X.settings_fontsize_input,type:"range",min:ot,max:st,step:Re,value:o||ht,onInput:r,list:"fontSizes"}),s("datalist",{id:"fontSizes",children:Kn.map(i=>s("option",{value:i},i))})]}),s("div",{class:X.settings_font_a,style:{"font-size":`${st}%`},children:"A"})]}),s("div",{class:X.settings_font_sample,style:{"font-size":`${o}%`,"font-family":le[n]},children:s($,{id:"font.sampleText"})})]})},Si="_settings_font_container_yph84_1",Ei={settings_font_container:Si},$i=()=>{const{updateSettings:e}=S(),t=P(["settings"]),n=r=>e("font",r.target.value),o=t.settings.font;return s("div",{class:[Ei.settings_font_container,"atrament-settings-font"].join(" "),children:s("select",{onChange:n,style:{"font-family":le[o]},children:Object.entries(le).map(([r,i])=>s("option",{value:r,style:{"font-family":i},selected:o===r,children:r},r))})})},Ci="_settings_theme_container_1gr28_1",xi="_settings_theme_button_1gr28_8",Jn={settings_theme_container:Ci,settings_theme_button:xi},Ai=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["fg-color"],"background-color":t["bg-color"]};return s("button",{class:Jn.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:s($,{id:`themes.${e}`,defaultMessage:e})})},Li=()=>{const{updateSettings:e}=S(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return s("div",{class:[Jn.settings_theme_container,"atrament-settings-theme"].join(" "),children:Object.entries(ye).map(([n,o])=>s(Ai,{themeId:n,themeConfig:o,onClick:t},n))})},Oi=()=>{const{updateSettings:e}=S(),t=P(["settings"]),n=o=>e("animation",o.target.checked);return s("div",{class:["atrament-settings-animation"].join(" "),children:[s(He,{enabled:t.settings.animation,onChange:n})," ",s($,{id:"settings.animations"})]})},it=()=>{const e=I();return s("div",{class:ui.settings_container,children:[s(_i,{}),s(Oi,{}),s(gi,{}),s(ue,{title:e.translate("settings.appearance"),children:[s($i,{}),s(wi,{}),s(Li,{})]})]})},Pi="_header_1gyyv_1",Ti="_infobox_1gyyv_19",Jt={header:Pi,infobox:Ti},Vi=""+new URL("atrament-logo-D7LOrOOl.png",import.meta.url).href,Mi=""+new URL("iftf-logo-BWs-h1t3.png",import.meta.url).href,Xn=[["Atrament Core","https://github.com/technix/atrament-core"],["Atrament Web","https://github.com/technix/atrament-web"],["Atrament Web UI","https://github.com/technix/atrament-web-ui"],["InkJS","https://github.com/y-lohse/inkjs"],["Preact","https://preactjs.com/"],["Howler","https://howlerjs.com/"],["Nanostores","https://github.com/nanostores/nanostores"],["LocalForage","https://github.com/localForage/localForage"],["fflate","https://github.com/101arrowz/fflate"]],Ii=Xn.length-1,Xt=({href:e,children:t})=>s("a",{href:e,target:"_blank",rel:"noreferrer",children:t}),ji='<a href="https://iftechfoundation.org/" target="_blank" rel="noreferrer">Interactive Fiction Technology Foundation</a>',Di=({onClick:e})=>s(K,{children:s("div",{onClick:n=>n.target.tagName.toLowerCase()==="a"?"":e(n),children:[s("div",{class:Jt.header,children:[s("img",{src:Vi}),s("h1",{children:["Atrament ",s("small",{children:xn})]})]}),s("p",{children:s(Xt,{href:"https://atrament.ink/",children:"https://atrament.ink/"})}),s("p",{children:[s($,{id:"about.components"}),": ",Xn.map((n,o)=>s("span",{children:[s(Xt,{href:n[1],children:n[0]}),o===Ii?".":","," "]},n[1]))]}),s("div",{class:Jt.infobox,children:[s("img",{src:Mi}),s("p",{children:s($,{id:"about.iftf_support",html:!0,iftf:ji})})]})]})}),Fi=()=>s(Yn,{onClick:()=>Y("/"),children:s($,{id:"game.quit"})}),Ri=()=>s(it,{}),Hi=({toggleMenu:e})=>{const{atrament:t}=S(),n=P(["metadata"]),{saves:o,load_from_checkpoints:r}=n.metadata,[i,a]=k(!1),[c,_]=k(!1),[u,d]=k(!1),l=p(()=>a(!i),[i]),m=p(()=>_(!c),[c]),h=p(()=>d(!u),[u]),f=p(async E=>{await t.game.restart(E),m(),e()},[t,e,m]),g=p(async E=>{await t.game.saveGame(E)},[t]);return i?s(x,{children:[s(Ie,{children:s("h2",{children:s($,{id:"main.savegame"})})}),s(ci,{saveGame:g}),s(he,{}),s(F,{onClick:l,children:s($,{id:"cancel"})},"go-back")]}):c?s(x,{children:[s(Ie,{children:s("h2",{children:s($,{id:"main.loadgame"})})}),s(qn,{loadGame:f,hasConfirmation:!0}),s(he,{}),s(F,{onClick:m,children:s($,{id:"cancel"})},"go-back")]}):u?s(x,{children:[s(it,{}),s(he,{}),s(F,{onClick:h,children:s($,{id:"back"})},"go-back")]}):s(x,{children:[o?s(F,{onClick:l,children:s($,{id:"main.savegame"})},"save-game"):null,o||r?s(F,{onClick:m,children:s($,{id:"main.loadgame"})},"load-game"):null,o||r?s(F,{onClick:h,children:s($,{id:"main.settings"})},"settings"):s(it,{}),s(he,{}),s(Fi,{})]})},Ni=({isHomeScreen:e,toggleMenu:t})=>e?s(Ri,{}):s(Hi,{toggleMenu:t}),bt=({isHomeScreen:e=!1})=>{const[t,n]=k(!1),[o,r]=k(!1),i=p(()=>{n(!t),r(!1)},[t]),a=p(()=>r(!o),[o]),c=p(_=>{_.key==="Escape"&&(i(),r(!1))},[i,r]);return L(()=>(document.addEventListener("keydown",c,!1),()=>{document.removeEventListener("keydown",c,!1)}),[c]),t?s("div",{class:ne.menu_container,children:[s(Hn,{onClick:i}),s(Nn,{children:s("div",{class:ne.menu_content,children:[s(mt,{onClick:i}),o?s(Di,{onClick:a}):s(x,{children:[s(Ni,{isHomeScreen:e,toggleMenu:i}),s("div",{class:ne.atrament_version,onClick:a,children:[s("div",{class:ne.atrament_about,children:"?"}),s("div",{class:ne.atrament_appversion,children:["Atrament ",xn]})]})]})]})})]}):s(x,{children:[s("button",{class:ne.menu_toggle,onClick:i,children:s(ir,{})}),s(Zr,{})]})},Bi=({newGame:e,loadGame:t,resumeGame:n,canResume:o})=>{const[r,i]=k([]),a=I(),{atrament:c}=S(),{metadata:_}=P(["metadata"]),u=p(async()=>{const m=await c.game.getSessions();let h=!0;i([...Array(+_.sessions).keys()].map(f=>{const g=f+1,E=`session${g}`,v=!!m[`session${g}`],w=v||h;return!v&&h&&(h=!1),{id:g,name:E,hasSaves:v,canStart:w}}))},[c,_,i]),d=p(async m=>{const h=m.target.getAttribute("data-session"),f=r.filter(g=>g.name===h)[0];f&&(c.game.setSession(h),f.hasSaves?await o()?await n():await t():await e())},[c,r,e,o,n,t]),l=p(async m=>{const h=m.target.getAttribute("data-session");await c.game.removeSession(h),await u()},[c,u]);return L(()=>{(async()=>u())()},[u]),s(x,{children:r.map(m=>s(vt,{onSelect:d,onDelete:l,isDisabled:!m.canStart,isDeletable:m.hasSaves,deletePrompt:a.translate("main.delete-session"),attributes:{"data-session":m.name},children:m.hasSaves?s($,{id:"main.continue-session",session:m.id}):m.canStart?s($,{id:"main.newgame"}):s($,{id:"main.emptyslot"})},m.name))})},yt=()=>{const{resetBackground:e,gameStart:t,gameResume:n,continueStory:o}=S(),{metadata:r}=P(["metadata"]),i=p(async()=>{e(),await t(),o(),Y("/game")},[e,t,o]),a=p(async()=>{e(),await n(),r.continue_maximally!==!1&&o(),Y("/game")},[e,n,o,r]),c=p(async _=>{e(),await t(_),r.continue_maximally!==!1&&o(),Y("/game")},[e,t,o,r]);return{newGame:i,resumeGame:a,loadGame:c}},Qn=({children:e})=>{const{loadGame:t}=yt();return s(K,{align:"end",children:[s(Ie,{children:s("h2",{children:s($,{id:"main.loadgame"})})}),s(qn,{loadGame:t}),s(he,{}),e]})},zi="_imagebox_1x268_1",Gi="_image_1x268_1",Ui="_illustration_1x268_10",We={imagebox:zi,image:Gi,illustration:Ui},kt=({src:e,options:t={}})=>s("div",{class:[We.imagebox,"atrament-image-container"].join(" "),style:{"margin-left":t.leftmargin||"none","margin-right":t.rightmargin||"none"},children:s("img",{src:e,style:{width:t.width||"auto"},class:[We.image,t.fullsize?"":We.illustration,"atrament-image"].join(" ")})}),Zn=()=>{const{getAssetPath:e}=S(),t=I(),n=P(["metadata"]),{title:o,author:r,cover:i}=n.metadata;return s(Ie,{children:[i?s(kt,{src:e(i)}):"",s("h1",{children:o||t.translate("default.title")}),s("p",{children:r||t.translate("default.author")})]})},eo=()=>s(F,{onClick:()=>Y("/about"),children:s($,{id:"main.about"})},"about"),Wi=({canBeResumed:e,canBeLoaded:t,openLoadGameMenu:n,about:o})=>{const{newGame:r,resumeGame:i}=yt();return s(x,{children:[s(Zn,{}),s(K,{align:"end",children:[e?s(F,{onClick:i,children:s($,{id:"main.continue"})},"continuegame"):"",s(F,{onClick:r,children:s($,{id:"main.newgame"})},"startgame"),t?s(F,{onClick:n,children:s($,{id:"main.loadgame"})},"loadgame"):"",o?s(eo,{}):""]})]})},Yi=()=>{const[e,t]=k(!1),{atrament:n,canResume:o}=S(),{newGame:r,resumeGame:i}=yt();return s(x,{children:e?s(Qn,{children:s(F,{onClick:()=>{n.game.setSession(),t(!1)},children:s($,{id:"cancel"})},"go-back")}):s(x,{children:[s(Zn,{}),s(K,{align:"end",children:[s(Bi,{newGame:r,resumeGame:i,canResume:o,loadGame:()=>t(!0)}),s(eo,{})]})]})})},qi=()=>{const[e,t]=k(!1),[n,o]=k(!1),[r,i]=k(!1),{atrament:a,canResume:c}=S(),{metadata:_}=P(["metadata"]),u=()=>t(!0),d=()=>t(!1);return L(()=>{(async()=>{const m=await c();o(!!m),(await a.game.listSaves()).filter(g=>_.load_from_checkpoints&&g.type===a.game.SAVE_CHECKPOINT?!0:g.type===a.game.SAVE_GAME).length&&i(!0)})()},[a.game,c,_,i]),s(x,{children:e?s(Qn,{children:s(F,{onClick:d,children:s($,{id:"main.menu"})},"go-back")}):s(Wi,{canBeResumed:n,canBeLoaded:r,openLoadGameMenu:u,about:_.about})})},to=(e,t)=>{e?(document.body.style.backgroundImage=`url(${t(e)})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"):document.body.style.backgroundImage="none"},Ki=()=>{const{canResume:e,getAssetPath:t,resetBackground:n}=S(),o=P(["metadata"]),{background:r,sessions:i}=o.metadata;return L(()=>{n(),to(r,t)},[n,e,r,t]),s(Ee,{children:s(gt,{children:[s(bt,{isHomeScreen:!0}),i?s(Yi,{}):s(qi,{})]})})},Ji=()=>{const{atrament:e}=S(),t=P(["ERROR"]),n=p(()=>e.state.setKey("ERROR",null),[e]),o=p(r=>{r.key==="Escape"&&n()},[n]);if(L(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),t.ERROR)return s(Bn,{close:n,message:t.ERROR})},Xi="_toolbar_y184t_1",Qi={toolbar:Xi},Zi="_inline_button_ws4x6_1",ea="_bordered_button_ws4x6_19",Qt={inline_button:Zi,bordered_button:ea};function G(e){const t=e.match(/(\w+)=["']?((?:.?(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/g),n={};return t&&t.forEach(o=>{const[,r,i]=o.match(/(.+)=(.+)/);try{n[r]=JSON.parse(i)}catch{n[r]=i}}),n}const ta=({children:e,options:t})=>{const{evaluateInkFunction:n}=S(),{setOverlayContent:o,refreshOverlay:r}=Wn(),i=p(c=>{c.stopPropagation();const _=t.onclick,u=n(_);u.output?o(_,u.output):r()},[n,o,r,t.onclick]);let a=t.bordered===!1?Qt.inline_button:Qt.bordered_button;return s("button",{class:a,onClick:i,disabled:t.disabled,children:e})},na={regexp:/\[button[ =].+?\].+?\[\/button\]/ig,replacer:(e,t)=>{const n=e.match(/\[button([ =].+?)\](.+?)\[\/button\]/i);let o=n[1];o.startsWith("=")&&(o=`onclick${o}`);const r=G(o);return s(ta,{options:r,children:t(n[2])})}},oa="_inline_image_1jlev_1",sa={inline_image:oa},ra=({src:e})=>{const{getAssetPath:t}=S();return s("img",{class:sa.inline_image,src:t(e)})},ia={regexp:/\[img\].+?\[\/img\]/ig,replacer:e=>{const t=e.match(/\[img\](.+?)\[\/img\]/i);return s(ra,{src:t[1]})}},aa="_inline_link_1di4e_1",ca={inline_link:aa},la=({children:e,choice:t})=>{const{atrament:n,makeChoice:o,continueStory:r}=S(),i=P(["scenes"]),a=p(()=>{const c=i.scenes.length-1,u=i.scenes[c].choices.findIndex(d=>d.choice===t);if(u<0){n.state.setKey("ERROR",`[link=${t}] leads to nonexistent choice!`);return}o(u),r()},[n,r,o,t,i.scenes]);return s("a",{href:"#",class:ca.inline_link,onClick:a,children:e})},ua={regexp:/\[link=.+?\].+?\[\/link\]/ig,replacer:(e,t)=>{const n=e.match(/\[link=(.+?)\](.+?)\[\/link\]/i);return s(la,{choice:n[1],children:t(n[2])})}},_a="_progress_frame_17ofj_1",da="_progress_bar_17ofj_7",fa="_standard_17ofj_14",ha="_accent_17ofj_18",ma="_progress_content_17ofj_22",_e={progress_frame:_a,progress_bar:da,standard:fa,accent:ha,progress_content:ma},ga=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let i=r?(r-n)*100/(o-n):0;i>100&&(i=100),i<0&&(i=0);const a=[_e.progress_bar];return e.style==="accent"?a.push(_e.accent):a.push(_e.standard),s("div",{class:_e.progress_frame,children:[s("div",{class:a.join(" "),style:{width:`${i}%`}}),s("div",{class:_e.progress_content,children:[t," "]})]})},pa={regexp:/\[progress.+?\].*?\[\/progress\]/ig,replacer:(e,t)=>{const n=e.match(/\[progress(.+?)\](.*?)\[\/progress\]/i),o=G(n[1]);return s(ga,{options:o,children:t(n[2])})}},va="_input_1c260_1",ba={input:va},ya=({options:e})=>{const t=Se(Cn),[n,o]=k(null),{getInkVariable:r,setInkVariable:i}=S();L(()=>o(r(e.var)),[r,e.var]);const a=_=>{let u=_.srcElement.value||n;e.type==="number"&&(u=+u),i(e.var,u),o(u)},c=e.type==="number"?"number":"text";return s("input",{disabled:!t,class:ba.input,value:n,placeholder:e.placeholder,type:c,onInput:a})},ka={regexp:/\[input.+?\]/ig,replacer:e=>{const t=e.match(/\[input(.+?)\]/i),n=G(t[1]);return s(ya,{options:n})}},wa="_hidden_1ydvn_1",Sa="_revealed_1ydvn_12",Zt={hidden:wa,revealed:Sa},Ea=[Zt.hidden,Zt.revealed],$a=({children:e})=>{const[t,n]=k(0);return s("span",{class:Ea[t],onClick:()=>n(1-t),children:s("span",{children:e})})},Ca={regexp:/\[spoiler\].*?\[\/spoiler\]/ig,replacer:(e,t)=>{const n=e.match(/\[spoiler\](.*?)\[\/spoiler\]/i);return s($a,{children:t(n[1])})}},xa="_infoblock_10o9f_1",Aa="_font_ui_10o9f_9",La="_side_highlight_10o9f_13",Oa="_side_accent_10o9f_17",Oe={infoblock:xa,font_ui:Aa,side_highlight:La,side_accent:Oa},Pa=({children:e,options:t})=>{const n=[Oe.infoblock];return t.font==="system"&&n.push(Oe.font_ui),t.side&&(t.side==="accent"?n.push(Oe.side_accent):n.push(Oe.side_highlight)),s("div",{class:n.join(" "),children:e})},Ta={regexp:/\[info.*?\].*?\[\/info\]/ig,replacer:(e,t)=>{const n=e.match(/\[info(.*?)\](.*?)\[\/info\]/i),o=G(n[1]);return s(Pa,{options:o,children:t(n[2])})}},Va="_bannerblock_1ry2a_1",Ma="_accent_1ry2a_11",Ia="_allcaps_1ry2a_17",Ye={bannerblock:Va,accent:Ma,allcaps:Ia},ja=({children:e,options:t})=>{const n=[Ye.bannerblock];return t.style==="accent"&&n.push(Ye.accent),t.allcaps&&n.push(Ye.allcaps),s("div",{class:n.join(" "),children:e})},Da={regexp:/\[banner.*?\].*?\[\/banner\]/ig,replacer:(e,t)=>{const n=e.match(/\[banner(.*?)\](.*?)\[\/banner\]/i),o=G(n[1]);return s(ja,{options:o,children:t(n[2])})}},Fa={regexp:/\[font=.+?\].+?\[\/font\]/ig,replacer:(e,t)=>{const n=e.match(/\[font=(.+?)\](.+?)\[\/font\]/i);return s("span",{style:{"font-family":n[1]},children:t(n[2])})}},Ra={regexp:/\[highlight.*?\].+?\[\/highlight\]/ig,replacer:(e,t)=>{const n=e.match(/\[highlight(.*?)\](.+?)\[\/highlight\]/i);let o={};n[1]&&(o=G(n[1]));const r={display:"inline-block","background-color":o.bgcolor||"var(--accent-bg-color)",color:o.color||"var(--accent-fg-color)"};return s("span",{style:r,children:t(n[2])})}},Ha={regexp:/\[block.*?\].+?\[\/block\]/ig,replacer:(e,t)=>{const n=e.match(/\[block(.*?)\](.+?)\[\/block\]/i);let o={};n[1]&&(o=G(n[1]));const r={display:"inline-block",width:o.width||"100%","text-align":o.align||"inherit","vertical-align":o.valign||"top"};return s("div",{style:r,children:t(n[2])})}},Na=({src:e,options:t})=>{const{getAssetPath:n}=S();return s("video",{style:{"pointer-events":"none"},width:"100%",autoplay:!0,disablePictureInPicture:!0,loop:!0,...t,children:s("source",{src:n(e)})})},Ba={regexp:/\[video.*?\].+?\[\/video\]/ig,replacer:e=>{const t=e.match(/\[video(.*?)\](.+?)\[\/video\]/i);let n={};return t[1]&&(n=G(t[1])),s(Na,{options:n,src:t[2]})}},za=({options:e,src:t})=>{const{getAssetPath:n}=S(),o={fullsize:!0};return["leftmargin","rightmargin","width"].forEach(r=>{e[r]&&(o[r]=e[r])}),s(kt,{src:n(t),options:o})},Ga={regexp:/\[picture.*?\].*?\[\/picture\]/ig,replacer:e=>{const t=e.match(/\[picture(.*?)\](.*?)\[\/picture\]/i),n=G(t[1]);return s(za,{options:n,src:t[2]})}},Ua={regexp:/\[url=.+?\].+?\[\/url\]/ig,replacer:(e,t)=>{const n=e.match(/\[url=(.+?)\](.+?)\[\/url\]/i);return s("a",{href:n[1],target:"_blank",rel:"noreferrer",children:t(n[2])})}},Wa=[na,ia,ua,pa,ka,Ca,Ta,Da,Fa,Ra,Ha,Ba,Ga,Ua],Ya=({index:e,item:t})=>s("span",{dangerouslySetInnerHTML:{__html:t}},e),qa=e=>/<\/?[a-z][\s\S]*>/i.test(e);function Ka(e,t,n){if(typeof e!="string")return e;const o=e.match(t);return o?e.split(t).flatMap((a,c)=>c<o.length?[a,n(o[c],no)]:[a]):e}function no(e){let t=[e];const n=[];return Wa.forEach(o=>{const r=e.match(o.regexp);r&&r.forEach(i=>n.push({component:o,size:i.length}))}),n.sort((o,r)=>r.size-o.size).forEach(({component:o})=>{t=t.flatMap(r=>Ka(r,o.regexp,o.replacer))}),t.map((o,r)=>typeof o=="string"&&qa(o)?Ya({index:r,item:o}):o)}const Ce=({content:e,isActive:t=!0})=>{const n=_t(()=>no(e),[e]);return s(Cn.Provider,{value:t,children:n})},qe="TOOLBAR",Ja=()=>{const e=I(),t=P([qe]),n=t[qe]!=="__DEFAULT__"?t[qe]:e.translate("default.title");return s("div",{class:[Qi.toolbar,"atrament-toolbar"].join(" "),children:s(Ce,{content:n})})},Xa="_container_text_138rh_1",Qa={container_text:Xa},wt=({children:e})=>s("div",{class:[Qa.container_text,"atrament-text-container"].join(" "),children:e}),Za="_container_scenes_13lih_1",ec={container_scenes:Za},tc=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",nc=({children:e,align:t})=>s("div",{class:[ec.container_scenes,"atrament-container-scene"].join(" "),style:{"justify-content":tc(t)},children:e}),oc="_container_choices_41rpm_1",sc={container_choices:oc},rc=({children:e,key:t,isReady:n})=>s("div",{class:[sc.container_choices,"atrament-container-choices",n?"animation_appear":""].join(" "),children:s("div",{style:{opacity:n?1:0},children:s(K,{children:e})})},t),ic="_scene_1or5e_1",ac={scene:ic},oo=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function cc(e,t){this.scrollLeft=e,this.scrollTop=t}const so=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,ro=(e,t,n)=>so(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),en=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},lc=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},St=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function uc(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const _c=e=>.5*(1-Math.cos(Math.PI*e));function Et(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),Et=t,t()}const dc=500,io=e=>{const n=(Et()-e.timeStamp)/(e.duration||dc);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||_c)(n),r=e.startX+(e.targetX-e.startX)*o,i=e.startY+(e.targetY-e.startY)*o;e.method(r,i),e.rafId=window.requestAnimationFrame(()=>{io(e)})},je=e=>isFinite(e)?Number(e):0,fc=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},hc=(e,t,n)=>{var o,r;if(!fc(e))return;const i=e.scrollLeft,a=e.scrollTop,c=je((o=t.left)!==null&&o!==void 0?o:i),_=je((r=t.top)!==null&&r!==void 0?r:a);if(c===i&&_===a)return;const u=en(HTMLElement.prototype,"scroll",cc),d=en(Object.getPrototypeOf(e),"scroll",u).bind(e);if(t.behavior!=="smooth"){d(c,_);return}const l=()=>{window.removeEventListener("wheel",f),window.removeEventListener("touchmove",f)},m=()=>{l();const g=e.nodeType===9;e.dispatchEvent(uc(g))},h=Object.assign(Object.assign({},n),{timeStamp:Et(),startX:i,startY:a,targetX:c,targetY:_,rafId:0,method:d,callback:m}),f=()=>{window.cancelAnimationFrame(h.rafId),l()};window.addEventListener("wheel",f,{passive:!0,once:!0}),window.addEventListener("touchmove",f,{passive:!0,once:!0}),io(h)},mc=e=>e.window===e,gc=e=>(t,n,o)=>{const[r,i]=mc(t)?[St(t.document.documentElement),"Window"]:[t,"Element"],a=n??{};if(!lc(a))throw new TypeError(so(e,i));if(!oo(a.behavior))throw new TypeError(ro(e,i,a.behavior));e==="scrollBy"&&(a.left=je(a.left)+r.scrollLeft,a.top=je(a.top)+r.scrollTop),hc(r,a,o)},pc=gc("scroll"),vc=pc,ao=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},co=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},bc=e=>(co(ao(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,yc=(e,t,n)=>{const[o,r,i]=co(t,n,e.block||"start",e.inline||"nearest");return[r,i].map((a,c)=>{switch(a){case"center":return 1;case"nearest":return 0;default:{const _=o>>c&1;return a==="start"==!_?2:3}}})},tn=(e,t,n,o,r,i,a)=>e!==0?e:r<t&&i>n||r>t&&i<n?null:r<=t&&a<=o||i>=n&&a>=o?2:i>n&&a<o||r<t&&a>o?3:null,nn=e=>e!=="visible"&&e!=="clip",kc=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},wc=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?nn(t.overflowY)||nn(t.overflowX)||e===St(e):!1,on=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return kc(e)}return n},Ke=(e,t,n)=>e<t?t:e>n?n:e,Sc=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],Ec=(e,t,n)=>{const{top:o,right:r,bottom:i,left:a}=t,c=Sc(e.ownerDocument);if(!c)return[o,r,i,a];const _=u=>{const d=n.getPropertyValue(`${c}-${u}`);return parseInt(d,10)||0};return[o-_("top"),r+_("right"),i+_("bottom"),a-_("left")]},Pe=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},$c=(e,t)=>{var n,o,r;const i=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[a,c,_,u]=e===St(e)?[0,0,(o=i==null?void 0:i.width)!==null&&o!==void 0?o:e.clientWidth,(r=i==null?void 0:i.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],d=a+e.clientLeft,l=c+e.clientTop,m=d+_,h=l+u;return[l,m,h,d]},Cc=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const i=window.getComputedStyle(e),a=i.direction!=="rtl",c=ao(i.writingMode||i.getPropertyValue("-webkit-writing-mode")||i.getPropertyValue("-ms-writing-mode")),[_,u]=yc(t,c,a);let[d,l,m,h]=Ec(e,e.getBoundingClientRect(),i);for(let f=on(e);f!==null;f=on(f)){if(o!==f.ownerDocument){if(o=f.ownerDocument,r=o.defaultView,!r)break;const{left:j,top:U}=f.getBoundingClientRect();d+=U,l+=j,m+=U,h+=j}const g=r.getComputedStyle(f);if(g.position==="fixed")break;if(!wc(f,g))continue;const E=f.getBoundingClientRect(),[v,w,b,y]=$c(f,E),M=tn(_,y,w,f.clientWidth,h,l,l-h),T=tn(u,v,b,f.clientHeight,d,m,m-d),H=M===null?0:Pe(M,h,l)-Pe(M,y,w),te=T===null?0:Pe(T,d,m)-Pe(T,v,b),z=bc(g)?Ke(H,-f.scrollWidth+f.clientWidth-f.scrollLeft,-f.scrollLeft):Ke(H,-f.scrollLeft,f.scrollWidth-f.clientWidth-f.scrollLeft),J=Ke(te,-f.scrollTop,f.scrollHeight-f.clientHeight-f.scrollTop);n.push([f,{left:f.scrollLeft+z,top:f.scrollTop+J,behavior:t.behavior}]),d=Math.max(d-J,v),l=Math.min(l-z,w),m=Math.min(m-J,b),h=Math.max(h-z,y)}return n},xc=(e,t,n)=>{const o=t||{};if(!oo(o.behavior))throw new TypeError(ro("scrollIntoView","Element",o.behavior));Cc(e,o).forEach(([i,a])=>{vc(i,a,n)})},Ac="_paragraph_gh666_1",Lc={paragraph:Ac},Oc=({content:e,isCurrent:t})=>{if(e.text===`
`)return s(x,{});let n;t||(n={opacity:"70%"});let o=e.tags.CLASS||"";return Array.isArray(o)&&(o=o.join(" ")),s("div",{style:n,class:`${Lc.paragraph} ${o}`,children:s(Ce,{content:e.text,isActive:t})})};function Pc(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{const i=new Image;i.onload=r,i.onerror=r,i.src=e(o)}));return Promise.allSettled(n)}const Tc=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:r}=S(),[i,a]=k(!1),c=ko(null),_=p(u=>{o(!0),setTimeout(()=>{xc(c.current,{behavior:u,block:"start"},{duration:300})},100)},[o]);return L(()=>{i&&t&&_(n?"instant":"smooth")},[i,t,n,_]),L(()=>{(async()=>{await Pc(r,e.images),a(!0)})()},[e,a,r]),s("div",{class:[ac.scene,"atrament-scene",t&&i?"animation_appear":""].join(" "),ref:c,children:s("div",{style:{opacity:i?1:0},children:e.content.map((u,d)=>s(x,{children:[u.images.map((l,m)=>s(kt,{src:r(l)},`${m}-${l}`)),s(Oc,{isCurrent:t,content:u})]},`paragraph-${e.uuid}-${d}`))})})},Vc="_choice_button_7bb99_1",Mc="_choice_active_7bb99_20",Ic="_choice_inactive_7bb99_44",Je={choice_button:Vc,choice_active:Mc,choice_inactive:Ic},jc=({choice:e,chosen:t,handleClick:n})=>{const o=t!==null,r=t===e.id,i=()=>{o||n(e.id)},a=o?r?Je.choice_active:Je.choice_inactive:"";let c=e.tags.CLASS;return Array.isArray(c)&&(c=c.join(" ")),s("button",{class:`${Je.choice_button} ${a} ${c}`,onClick:i,disabled:e.disabled,children:s(Ce,{content:e.choice})})},Dc=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=S(),[i,a]=k(null),c=t&&t.choices?t.choices.length:-1,_=p(d=>{const l=c>1?350:150;a(d),setTimeout(()=>{setTimeout(()=>{a(null),n(!1),o(d),r()},l)},0)},[o,r,n,c]),u=p(d=>{const l=+d.key;d.target.tagName.toLowerCase()!=="input"&&c>0&&l>0&&l<=c&&!t.choices[l-1].disabled&&_(t.choices[l-1].id)},[c,_,t.choices]);return L(()=>(document.addEventListener("keydown",u,!1),()=>{document.removeEventListener("keydown",u,!1)}),[u]),s(x,{children:t.choices.map((d,l)=>s(jc,{choice:d,chosen:i,handleClick:_},`${e}-${l}`))})},Fc="_container_tw0if_10",Rc="_circle_tw0if_18",sn={container:Fc,circle:Rc},rn=({setReady:e,withChoice:t=!1})=>{const{makeChoice:n,continueStory:o}=S(),[r,i]=k(!1),a=I(),c=p(()=>{setTimeout(()=>{e(!1),t&&n(0),o()},0)},[n,o,e,t]),_=p(u=>{(u.key===" "||u.key==="Enter")&&c()},[c]);return L(()=>(document.addEventListener("keydown",_,!1),document.getElementsByClassName("atrament-container-scene")[0].addEventListener("click",c,!1),document.getElementsByClassName("atrament-container-choices")[0].addEventListener("click",c,!1),setTimeout(()=>{i(!0)},3e3),()=>{document.removeEventListener("keydown",_,!1),document.getElementsByClassName("atrament-container-scene")[0].removeEventListener("click",c,!1),document.getElementsByClassName("atrament-container-choices")[0].removeEventListener("click",c,!1)}),[_,c,i]),s("div",{class:sn.container,children:r&&s("div",{class:`${sn.circle}`,title:a.translate("game.click-to-continue")})})},Hc=()=>{const{atrament:e}=S();return s(Yn,{onClick:async()=>{await e.game.removeSave(),Y("/")},children:s($,{id:"game.end"})})},Nc=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t&&t.choices?t.choices.length:-1;if(r===1&&["",">>>"].includes(t.choices[0].choice))return s(rn,{setReady:n,withChoice:!0});if(r===0)return t.canContinue?s(rn,{setReady:n}):s(Hc,{});if(r>=0&&!o)return s(Dc,{currentScene:t,setReady:n},e)},Bc=()=>{var a;const e=P(["scenes","metadata"]),[t,n]=k(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext,i=`choices-${(a=e.scenes[o])==null?void 0:a.uuid}`;return s(wt,{children:[s(nc,{align:e.metadata.scenes_align,children:e.scenes.map((c,_)=>s(Tc,{scene:c,isCurrent:_===o,isSingle:o===0,readyHandler:n},c.uuid))}),s(rc,{isReady:t,children:s(Nc,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},i)},i)]})},zc="_overlay_container_1lt26_1",Gc="_overlay_header_1lt26_11",Uc="_overlay_title_1lt26_24",Wc="_overlay_content_1lt26_33",Yc="_button_back_1lt26_48",de={overlay_container:zc,overlay_header:Gc,overlay_title:Uc,overlay_content:Wc,button_back:Yc},qc=()=>{const{overlay:e,closeOverlay:t}=Wn();return e.active?s("div",{class:de.overlay_container,children:[s("div",{class:de.overlay_header,children:[s("button",{class:de.button_back,onClick:t,children:s(lr,{})}),e.title&&s("div",{class:de.overlay_title,children:e.title})]}),s("div",{class:[de.overlay_content,"atrament-overlay"].join(" "),children:s(wt,{children:e.content.map((n,o)=>s("p",{children:s(Ce,{content:n})},o))})})]}):s(x,{})},Kc=()=>{const{getAssetPath:e}=S(),t=P(["game"]);let n;t.game.background&&(n={"background-image":`url(${e(t.game.background)})`,"background-size":"cover","background-position":"center"});const o=t.game.background_page;return L(()=>{to(o,e)},[o,e]),s(Ee,{style:n,children:[s(bt,{}),s(Ji,{}),s(Ja,{}),s(qc,{}),s(Bc,{})]})},Jc=()=>{const{evaluateInkFunction:e}=S(),{metadata:t}=P(["metadata"]),[n,o]=k(" "),r=()=>Y("/");return L(()=>{const i=e(t.about);i.output?o(i.output):o(i.error)},[t.about,o,e]),s(Ee,{children:[s(bt,{isHomeScreen:!0}),s(wt,{children:[s(gt,{children:s(K,{children:s(Ce,{content:n})})}),s(K,{children:s(F,{onClick:r,children:s($,{id:"main.menu"})},"mainmenu")})]})]})};function Xc(){const{atrament:e}=S(),t=p(n=>{n.url==="/"&&n.previous&&e.game.clear()},[e.game]);return s(Un,{history:Js(),onChange:t,children:[s(Ki,{path:"/"}),s(Kc,{path:"/game"}),s(Jc,{path:"/about"})]})}function Qc(){const[e,t]=k(null),[n,o]=k(null);return L(()=>{(async()=>{const{default:i}=await se(async()=>{const{default:c}=await import("./index-BCwVbfrl.js");return{default:c}},[],import.meta.url),{Story:a}=await se(async()=>{const{Story:c}=await import("./ink-1GKhkQBA.js");return{Story:c}},[],import.meta.url);try{await rs(i,a),t(i)}catch(c){console.error(c),o(c.message)}})()},[]),s(Lo,{language:jo,locales:is,children:s(ft.Provider,{value:e,children:s(ls,{children:e?s(Xc,{}):n?s(Ee,{children:s(Bn,{message:n})}):s(Rs,{})})})})}mo(s(Qc,{}),document.getElementById("app"));export{se as _};
