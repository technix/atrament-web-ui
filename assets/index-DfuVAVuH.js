const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-B0paYohH.js","./atrament-7Pq6nBRK.js","./index-BoPOHvfY.js","./index-tR73Kt0Z.js","./index-NJulkSzl.js"])))=>i.map(i=>d[i]);
import{l as mr}from"./atrament-7Pq6nBRK.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var Re,x,so,_e,sn,ao,io,co,Rt,St,xt,lo,Le={},uo=[],vr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,De=Array.isArray;function Y(e,t){for(var n in t)e[n]=t[n];return e}function Dt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ee(e,t,n){var o,r,a,i={};for(a in t)a=="key"?o=t[a]:a=="ref"?r=t[a]:i[a]=t[a];if(arguments.length>2&&(i.children=arguments.length>3?Re.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)i[a]===void 0&&(i[a]=e.defaultProps[a]);return Pe(e,i,o,r,null)}function Pe(e,t,n,o,r){var a={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++so,__i:-1,__u:0};return r==null&&x.vnode!=null&&x.vnode(a),a}function $(e){return e.children}function X(e,t){this.props=e,this.context=t}function ke(e,t){if(t==null)return e.__?ke(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ke(e):null}function _o(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return _o(e)}}function Ct(e){(!e.__d&&(e.__d=!0)&&_e.push(e)&&!Ye.__r++||sn!=x.debounceRendering)&&((sn=x.debounceRendering)||ao)(Ye)}function Ye(){for(var e,t,n,o,r,a,i,c=1;_e.length;)_e.length>c&&_e.sort(io),e=_e.shift(),c=_e.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,a=[],i=[],t.__P&&((n=Y({},o)).__v=o.__v+1,x.vnode&&x.vnode(n),Ft(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,a,r??ke(o),!!(32&o.__u),i),n.__v=o.__v,n.__.__k[n.__i]=n,go(a,n,i),o.__e=o.__=null,n.__e!=r&&_o(n)));Ye.__r=0}function fo(e,t,n,o,r,a,i,c,_,u,d){var l,f,h,g,p,b,m,y=o&&o.__k||uo,v=t.length;for(_=br(n,t,y,_,v),l=0;l<v;l++)(h=n.__k[l])!=null&&(f=h.__i==-1?Le:y[h.__i]||Le,h.__i=l,b=Ft(e,h,f,r,a,i,c,_,u,d),g=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Vt(f.ref,null,h),d.push(h.ref,h.__c||g,h)),p==null&&g!=null&&(p=g),(m=!!(4&h.__u))||f.__k===h.__k?_=ho(h,_,e,m):typeof h.type=="function"&&b!==void 0?_=b:g&&(_=g.nextSibling),h.__u&=-7);return n.__e=p,_}function br(e,t,n,o,r){var a,i,c,_,u,d=n.length,l=d,f=0;for(e.__k=new Array(r),a=0;a<r;a++)(i=t[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?i=e.__k[a]=Pe(null,i,null,null,null):De(i)?i=e.__k[a]=Pe($,{children:i},null,null,null):i.constructor==null&&i.__b>0?i=e.__k[a]=Pe(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):e.__k[a]=i,_=a+f,i.__=e,i.__b=e.__b+1,(u=i.__i=yr(i,n,_,l))!=-1&&(l--,(c=n[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(r>d?f--:r<d&&f++),typeof i.type!="function"&&(i.__u|=4)):u!=_&&(u==_-1?f--:u==_+1?f++:(u>_?f--:f++,i.__u|=4))):e.__k[a]=null;if(l)for(a=0;a<d;a++)(c=n[a])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=ke(c)),mo(c,c));return o}function ho(e,t,n,o){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=ho(r[a],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=ke(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function we(e,t){return t=t||[],e==null||typeof e=="boolean"||(De(e)?e.some(function(n){we(n,t)}):t.push(e)),t}function yr(e,t,n,o){var r,a,i,c=e.key,_=e.type,u=t[n],d=u!=null&&(2&u.__u)==0;if(u===null&&c==null||d&&c==u.key&&_==u.type)return n;if(o>(d?1:0)){for(r=n-1,a=n+1;r>=0||a<t.length;)if((u=t[i=r>=0?r--:a++])!=null&&(2&u.__u)==0&&c==u.key&&_==u.type)return i}return-1}function an(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||vr.test(t)?n:n+"px"}function ze(e,t,n,o,r){var a,i;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||an(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||an(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(co,"$1")),i=t.toLowerCase(),t=i in e||t=="onFocusOut"||t=="onFocusIn"?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=Rt,e.addEventListener(t,a?xt:St,a)):e.removeEventListener(t,a?xt:St,a);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function cn(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Rt++;else if(t.t<n.u)return;return n(x.event?x.event(t):t)}}}function Ft(e,t,n,o,r,a,i,c,_,u){var d,l,f,h,g,p,b,m,y,v,S,T,P,R,D,J,ce,N=t.type;if(t.constructor!=null)return null;128&n.__u&&(_=!!(32&n.__u),a=[c=t.__e=n.__e]),(d=x.__b)&&d(t);e:if(typeof N=="function")try{if(m=t.props,y="prototype"in N&&N.prototype.render,v=(d=N.contextType)&&o[d.__c],S=d?v?v.props.value:d.__:o,n.__c?b=(l=t.__c=n.__c).__=l.__E:(y?t.__c=l=new N(m,S):(t.__c=l=new X(m,S),l.constructor=N,l.render=wr),v&&v.sub(l),l.state||(l.state={}),l.__n=o,f=l.__d=!0,l.__h=[],l._sb=[]),y&&l.__s==null&&(l.__s=l.state),y&&N.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Y({},l.__s)),Y(l.__s,N.getDerivedStateFromProps(m,l.__s))),h=l.props,g=l.state,l.__v=t,f)y&&N.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),y&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(y&&N.getDerivedStateFromProps==null&&m!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,S),t.__v==n.__v||!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,S)===!1){for(t.__v!=n.__v&&(l.props=m,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),T=0;T<l._sb.length;T++)l.__h.push(l._sb[T]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,S),y&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,g,p)})}if(l.context=S,l.props=m,l.__P=e,l.__e=!1,P=x.__r,R=0,y){for(l.state=l.__s,l.__d=!1,P&&P(t),d=l.render(l.props,l.state,l.context),D=0;D<l._sb.length;D++)l.__h.push(l._sb[D]);l._sb=[]}else do l.__d=!1,P&&P(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++R<25);l.state=l.__s,l.getChildContext!=null&&(o=Y(Y({},o),l.getChildContext())),y&&!f&&l.getSnapshotBeforeUpdate!=null&&(p=l.getSnapshotBeforeUpdate(h,g)),J=d,d!=null&&d.type===$&&d.key==null&&(J=po(d.props.children)),c=fo(e,De(J)?J:[J],t,n,o,r,a,i,c,_,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),b&&(l.__E=l.__=null)}catch(Z){if(t.__v=null,_||a!=null)if(Z.then){for(t.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else{for(ce=a.length;ce--;)Dt(a[ce]);Et(t)}else t.__e=n.__e,t.__k=n.__k,Z.then||Et(t);x.__e(Z,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=kr(n.__e,t,n,o,r,a,i,_,u);return(d=x.diffed)&&d(t),128&t.__u?void 0:c}function Et(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Et)}function go(e,t,n){for(var o=0;o<n.length;o++)Vt(n[o],n[++o],n[++o]);x.__c&&x.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){x.__e(a,r.__v)}})}function po(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:De(e)?e.map(po):Y({},e)}function kr(e,t,n,o,r,a,i,c,_){var u,d,l,f,h,g,p,b=n.props||Le,m=t.props,y=t.type;if(y=="svg"?r="http://www.w3.org/2000/svg":y=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((h=a[u])&&"setAttribute"in h==!!y&&(y?h.localName==y:h.nodeType==3)){e=h,a[u]=null;break}}if(e==null){if(y==null)return document.createTextNode(m);e=document.createElementNS(r,y,m.is&&m),c&&(x.__m&&x.__m(t,a),c=!1),a=null}if(y==null)b===m||c&&e.data==m||(e.data=m);else{if(a=a&&Re.call(e.childNodes),!c&&a!=null)for(b={},u=0;u<e.attributes.length;u++)b[(h=e.attributes[u]).name]=h.value;for(u in b)if(h=b[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=h;else if(!(u in m)){if(u=="value"&&"defaultValue"in m||u=="checked"&&"defaultChecked"in m)continue;ze(e,u,null,h,r)}}for(u in m)h=m[u],u=="children"?f=h:u=="dangerouslySetInnerHTML"?d=h:u=="value"?g=h:u=="checked"?p=h:c&&typeof h!="function"||b[u]===h||ze(e,u,h,b[u],r);if(d)c||l&&(d.__html==l.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),fo(t.type=="template"?e.content:e,De(f)?f:[f],t,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,i,a?a[0]:n.__k&&ke(n,0),c,_),a!=null)for(u=a.length;u--;)Dt(a[u]);c||(u="value",y=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[u]||y=="progress"&&!g||y=="option"&&g!=b[u])&&ze(e,u,g,b[u],r),u="checked",p!=null&&p!=e[u]&&ze(e,u,p,b[u],r))}return e}function Vt(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){x.__e(r,n)}}function mo(e,t,n){var o,r;if(x.unmount&&x.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||Vt(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){x.__e(a,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&mo(o[r],t,n||typeof e.type!="function");n||Dt(e.__e),e.__c=e.__=e.__e=void 0}function wr(e,t,n){return this.constructor(e,n)}function $t(e,t,n){var o,r,a,i;t==document&&(t=document.documentElement),x.__&&x.__(e,t),r=(o=!1)?null:t.__k,a=[],i=[],Ft(t,e=t.__k=ee($,null,[e]),r||Le,Le,t.namespaceURI,r?null:t.firstChild?Re.call(t.childNodes):null,a,r?r.__e:t.firstChild,o,i),go(a,e,i)}function Sr(e,t,n){var o,r,a,i,c=Y({},e.props);for(a in e.type&&e.type.defaultProps&&(i=e.type.defaultProps),t)a=="key"?o=t[a]:a=="ref"?r=t[a]:c[a]=t[a]===void 0&&i!=null?i[a]:t[a];return arguments.length>2&&(c.children=arguments.length>3?Re.call(arguments,2):n),Pe(e.type,c,o||e.key,r||e.ref,null)}function Ze(e){function t(n){var o,r;return this.getChildContext||(o=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&o.forEach(function(i){i.__e=!0,Ct(i)})},this.sub=function(a){o.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){o&&o.delete(a),i&&i.call(a)}}),n.children}return t.__c="__cC"+lo++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}Re=uo.slice,x={__e:function(e,t,n,o){for(var r,a,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(c){e=c}throw e}},so=0,X.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Y({},this.state),typeof e=="function"&&(e=e(Y({},n),this.props)),e&&Y(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ct(this))},X.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ct(this))},X.prototype.render=$,_e=[],ao=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,io=function(e,t){return e.__v.__b-t.__v.__b},Ye.__r=0,co=/(PointerCapture)$|Capture$/i,Rt=0,St=cn(!1),xt=cn(!0),lo=0;var xr=0;function s(e,t,n,o,r,a){t||(t={});var i,c,_=t;if("ref"in _)for(c in _={},t)c=="ref"?i=t[c]:_[c]=t[c];var u={type:e,props:_,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--xr,__i:-1,__u:0,__source:r,__self:a};if(typeof e=="function"&&(i=e.defaultProps))for(c in i)_[c]===void 0&&(_[c]=i[c]);return x.vnode&&x.vnode(u),u}const Cr="modulepreload",Er=function(e,t){return new URL(e,t).href},ln={},pe=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(l=>Promise.resolve(l).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const i=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),_=c?.nonce||c?.getAttribute("nonce");r=u(n.map(d=>{if(d=Er(d,o),d in ln)return;ln[d]=!0;const l=d.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(o)for(let g=i.length-1;g>=0;g--){const p=i[g];if(p.href===d&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${f}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":Cr,l||(h.as="script"),h.crossOrigin="",h.href=d,_&&h.setAttribute("nonce",_),document.head.appendChild(h),l)return new Promise((g,p)=>{h.addEventListener("load",g),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return r.then(i=>{for(const c of i||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};var Se,I,lt,un,Me=0,vo=[],j=x,_n=j.__b,dn=j.__r,fn=j.diffed,hn=j.__c,gn=j.unmount,pn=j.__;function Qe(e,t){j.__h&&j.__h(I,e,Me||t),Me=0;var n=I.__H||(I.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function E(e){return Me=1,$r(yo,e)}function $r(e,t,n){var o=Qe(Se++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):yo(void 0,t),function(c){var _=o.__N?o.__N[0]:o.__[0],u=o.t(_,c);_!==u&&(o.__N=[u,o.__[1]],o.__c.setState({}))}],o.__c=I,!I.__f)){var r=function(c,_,u){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!a||a.call(this,c,_,u);var l=o.__c.props!==c;return d.forEach(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(l=!0)}}),a&&a.call(this,c,_,u)||l};I.__f=!0;var a=I.shouldComponentUpdate,i=I.componentWillUpdate;I.componentWillUpdate=function(c,_,u){if(this.__e){var d=a;a=void 0,r(c,_,u),a=d}i&&i.call(this,c,_,u)},I.shouldComponentUpdate=r}return o.__N||o.__}function A(e,t){var n=Qe(Se++,3);!j.__s&&bo(n.__H,t)&&(n.__=e,n.u=t,I.__H.__h.push(n))}function et(e){return Me=5,Ht(function(){return{current:e}},[])}function Ht(e,t){var n=Qe(Se++,7);return bo(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function k(e,t){return Me=8,Ht(function(){return e},t)}function ie(e){var t=I.context[e.__c],n=Qe(Se++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(I)),t.props.value):e.__}function Or(){for(var e;e=vo.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(qe),e.__H.__h.forEach(Ot),e.__H.__h=[]}catch(t){e.__H.__h=[],j.__e(t,e.__v)}}j.__b=function(e){I=null,_n&&_n(e)},j.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),pn&&pn(e,t)},j.__r=function(e){dn&&dn(e),Se=0;var t=(I=e.__c).__H;t&&(lt===I?(t.__h=[],I.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(qe),t.__h.forEach(Ot),t.__h=[],Se=0)),lt=I},j.diffed=function(e){fn&&fn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(vo.push(t)!==1&&un===j.requestAnimationFrame||((un=j.requestAnimationFrame)||Tr)(Or)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),lt=I=null},j.__c=function(e,t){t.some(function(n){try{n.__h.forEach(qe),n.__h=n.__h.filter(function(o){return!o.__||Ot(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],j.__e(o,n.__v)}}),hn&&hn(e,t)},j.unmount=function(e){gn&&gn(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{qe(o)}catch(r){t=r}}),n.__H=void 0,t&&j.__e(t,n.__v))};var mn=typeof requestAnimationFrame=="function";function Tr(e){var t,n=function(){clearTimeout(o),mn&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);mn&&(t=requestAnimationFrame(n))}function qe(e){var t=I,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),I=t}function Ot(e){var t=I;e.__c=e.__(),I=t}function bo(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function yo(e,t){return typeof t=="function"?t(e):t}var ne,Tt=function(e,t){return Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},Tt(e,t)},vn=(function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return(function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}Tt(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)})(t,e),t.is=function(n){return n instanceof t},t})(Error),Pr=(function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e})();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(ne||(ne={}));var Ar=["{","}",","],Lr=(function(){function e(t){this.input=new Pr(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile((function(o){return!(function(r){return Ar.includes(r)})(o)})).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:ne.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:ne.Text,value:this.readWhile((function(t){return t!=="{"&&t!=="}"}))}},e.prototype.readVariableType=function(){var t=this.readWhile((function(n){return n!==","})).trim();return t==="plural"?ne.Plural:t==="select"?ne.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e})();function Mr(e,t,n){for(var o=new Lr(t),r=[],a=function(i){var c=i.options,_=i.type,u=i.value;if(_!==ne.Variable)if(c)if(_!==ne.Select)try{r.concat(c[new Intl.PluralRules(e).select(n[u])].map(a))}catch{r.concat(c.other.map(a))}else r.concat((c[n[u]]||c.other).map(a));else r.push(u);else r.push(n[u])};!o.input.done;)a(o.next());return r}var ko=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,a){return new Intl.DateTimeFormat(n.language,a).format(r)},this.formatNumber=function(r,a){return new Intl.NumberFormat(n.language,a).format(r)},this.translate=function(r,a){a===void 0&&(a={});var i=n.getMessageById(r,a.defaultMessage);if(typeof i=="string")try{return Mr(n.language,i,a).join("")}catch{n.onError(new vn(r,n.language))}return i+""},this.getMessageById=function(r,a){if(!n.memo[r]){var i=n.messages[r];i===void 0&&(i=r.split(".").reduce((function(c,_){return c?c[_]:void 0}),n.messages)),typeof i!="string"&&(n.onError(new vn(r,n.language)),i=a||r),n.memo[r]=i}return n.memo[r]};var o=t.find((function(r){return r.language===e}));this.language=e,this.messages=o?o.messages:{}};function Ir(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var Nt=Ze({language:"",locales:[],setLanguage:function(){},translator:new ko}),jr=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,a=E(n);A((function(){a[1](n)}),[n]);var i=new ko(a[0],o);return r&&(i.onError=r),ee(Nt.Provider,{value:{language:a[0],locales:o,setLanguage:a[1],translator:i}},t)};function V(e){var t=ie(Nt);return t.translator}var O=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,a=Ir(e,["children","html","id","tagName"]),i=ie(Nt).translator.translate(n,a);return t?ee(r,{dangerouslySetInnerHTML:{__html:i}}):ee($,null,i)};const zt=Ze(null),Fe=Ze(!0),oe=window.$atramentConfig,wo="2.4.0",So=oe.game?.zip?oe.game?.zip:oe.game?.path,xo=oe.game.script,Rr=["Atrament://",window.location.host,window.location.pathname,So,"/",xo].join(""),Dr=oe.language||"en",Co=oe.locale||"en-US",Eo=oe.theme,Pt=oe.font,tt=100,nt=10,At=tt-nt*3,Lt=tt+nt*5,Fr=50,Ae="ERROR",F="OVERLAY",ve="TOOLBAR",$o="__DEFAULT__",Oo="$story_path",Vr=["title","author","theme","font","observe","persist","sessions","autosave","saves","load_from_checkpoints","continue_maximally","single_scene","scenes_align","choices","hypertext","toolbar","about","cover","background","debug","allow_external_function_fallbacks"],Te='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',To={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, system-ui, sans-serif, ${Te}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, sans-serif, ${Te}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", serif, ${Te}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", monospaced, ${Te}`},Hr=300,Nr=150,zr=350,Ur=100,Br=300;function Wr(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}let he={...To};(async()=>{{const e={},t=Object.assign({"../resources/fonts/fira-sans/index.js":()=>pe(()=>import("./index-B0paYohH.js"),__vite__mapDeps([0,1]),import.meta.url),"../resources/fonts/lora/index.js":()=>pe(()=>import("./index-BoPOHvfY.js"),__vite__mapDeps([2,1]),import.meta.url),"../resources/fonts/merriweather/index.js":()=>pe(()=>import("./index-tR73Kt0Z.js"),__vite__mapDeps([3,1]),import.meta.url),"../resources/fonts/opendyslexic/index.js":()=>pe(()=>import("./index-NJulkSzl.js"),__vite__mapDeps([4,1]),import.meta.url)});await Promise.all(Object.values(t).map(n=>n().then(o=>{const r=o.default;r.name&&(e[r.name]=`${r.name}, ${r.fallback||"serif"}, ${Te}`)}))),Object.keys(e).sort().forEach(n=>he[n]=e[n])}})();function Gr(e){document.documentElement.style.setProperty("--font-face-game",he[e]||he[Pt])}function qr(e){document.documentElement.style.setProperty("--font-face-ui",he[e]||To.System)}function Kr(e){const t=e.state.get().metadata.theme||Eo;e.settings.get("theme")||e.settings.set("theme",t)}function Yr(e){const t=e.state.get().metadata.font||Pt;e.settings.get("font")||e.settings.set("font",t),qr(Pt)}const Po="dark",Ao={"bg-color":"#4c3b4d","fg-color":"#FCFCFC","shade-color":"rgba(255, 255, 255, 0.1)","font-color":"#EEEEEE","accent-bg-color":"#4c3b4d","accent-fg-color":"#F7567C","accent-inverse-color":"#EEEEEE","border-radius":"0.5rem","border-radius-inline":"0.25rem"},Xr={name:Po,theme:Ao},Jr=Object.freeze(Object.defineProperty({__proto__:null,default:Xr,name:Po,theme:Ao},Symbol.toStringTag,{value:"Module"})),Lo="light",Mo={"bg-color":"#FCFCFC","fg-color":"#5D576B","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#FCFCFC","accent-fg-color":"#F7567C","accent-inverse-color":"#FCFCFC","border-radius":"0.5rem","border-radius-inline":"0.25rem"},Zr={name:Lo,theme:Mo},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:Zr,name:Lo,theme:Mo},Symbol.toStringTag,{value:"Module"})),Io="sepia",jo={"bg-color":"#ffeedb","fg-color":"#4c3b4d","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#ffeedb","accent-fg-color":"#a53850","accent-inverse-color":"#ffeedb","border-radius":"0.5rem","border-radius-inline":"0.25rem"},es={name:Io,theme:jo},ts=Object.freeze(Object.defineProperty({__proto__:null,default:es,name:Io,theme:jo},Symbol.toStringTag,{value:"Module"})),be={},ye={},ns=Object.assign({"../resources/themes/dark.json":Jr,"../resources/themes/light.json":Qr,"../resources/themes/sepia.json":ts});Object.values(ns).map(({default:e})=>{e&&(ye[e.name]=e.theme)});["light","sepia","dark"].forEach(e=>{ye[e]&&(be[e]=ye[e],delete ye[e])});Object.keys(ye).sort().forEach(e=>be[e]=ye[e]);function os(e){!e||!be[e]||Object.entries(be[e]||be[Eo]).forEach(([t,n])=>{document.documentElement.style.setProperty(`--${t}`,n)})}function rs(e){e.settings.defineHandler("theme",(t,n)=>{os(n)}),e.settings.defineHandler("font",(t,n)=>{Gr(n)}),e.settings.defineHandler("fontSize",(t,n)=>{document.documentElement.style.setProperty("--game-font-size",`${n}%`)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{e.interfaces.platform.setFullscreen(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function ss(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got ${typeof e}`);if(e.length===0)return[];const t=JSON.parse(JSON.stringify(e));for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}function bn(e,t={}){let n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\].*?\\[\\/${e}\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\](.*?)\\[\\/${e}\\]`,"i");return t.single&&(n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\]`,"i")),{matcher:n,parser:o}}const as=[bn("img"),bn("picture")];function Ro(e){if(!e)return[];const t={};return e.forEach(n=>{as.forEach(o=>{n?.match(o.matcher)?.forEach(r=>{const a=r.match(o.parser);t[a[2]]=!0})})}),Object.keys(t)}function is(e){const t=e.tags?.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game","background",t));const n=e.tags?.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game","background_page",n))}function cs(e){e.tags?.SHUFFLE_CHOICES&&(e.choices=ss(e.choices))}function ls(e){const t=Ro(e.content?.map(n=>n.text));e.images.push(...t)}function us(e){[is,cs,ls].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function _s(e){Object.values(Object.assign({})).map(({default:n})=>e.ink.story().BindExternalFunction(n.name,n.external.bind(e),n.lookaheadSafe||!1))}function Do(e){e.state.setKey(F,{current:null,content:"",title:null,display:null})}function ds(e,t){const n=()=>{let r;try{r=e.ink.evaluateFunction(t,[],!0),e.state.setKey(ve,r.output)}catch(a){e.ink.story().onError(a.toString())}},o=()=>setTimeout(n,0);e.on("game/start",o),e.on("game/continueStory",o),e.on("ink/evaluateFunction",r=>{r.function!==t&&o()})}function fs(e){const t=e.state.get().metadata;t.toolbar?ds(e,t.toolbar):t.title?e.state.setKey(ve,t.title):e.state.setKey(ve,$o),Do(e)}function hs(e){Do(e)}async function gs(e,t){e.on("*",(o,r)=>console.log(`%c Atrament > ${o} `,"color: #111111; background-color: #7FDBFF;",r)),rs(e),await e.init(t,{applicationID:Rr,settings:{fullscreen:!1,animation:!0,mute:!1,volume:Fr,fontSize:tt}}),e.on("game/initInkStory",()=>fs(e)),e.on("game/start",()=>hs(e)),await e.game.init(So,xo),await e.game.initInkStory(),Kr(e),Yr(e),us(e),_s(e),Wr(e);const n=e.state.get().metadata;n.title&&e.interfaces.platform.setTitle(n.title),n.allow_external_function_fallbacks&&(e.ink.story().allowExternalFunctionFallbacks=!0),e.ink.onError(o=>e.state.setKey(Ae,o)),n.debug&&e.on("game/continueStory",()=>{const o=e.ink.story().state.previousPathString;e.state.setSubkey("game",Oo,o)})}const Fo="de",Vo={yes:"Ja",no:"Nein",cancel:"Abbrechen",back:"Zurück","default.title":"Atrament UI","default.author":"Testanwendung","main.menu":"Hauptmenü","main.newgame":"Neues Spiel","main.loadgame":"Spiel laden","main.savegame":"Spiel speichern","main.continue":"Fortsetzen","main.emptyslot":"Leerer Speicherstand","main.continue-session":"Spiel fortsetzen {session}","main.autosave":"Automatisch gespeichert: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"Neuer Speicherstand","main.delete-session":"Diese Sitzung löschen?","main.delete-save":"Diesen Speicherstand löschen?","main.confirm-load":"Dieses Spiel laden?","main.confirm-save":"Diesen Speicherstand überschreiben?","main.settings":"Einstellungen","main.about":"Über","main.exit":"Beenden","icon.menu":"Menü","icon.back":"Zurück","icon.debugger":"Debugger","game.end":"Ende","game.save-and-quit":"Speichern und beenden","game.quit":"Spiel beenden","game.click-to-continue":"Klicke, um fortzufahren","settings.fullscreen":"Vollbild","settings.animations":"Animationen","settings.sound":"Ton","settings.appearance":"Darstellung","themes.light":"Hell","themes.sepia":"Sepia","themes.dark":"Dunkel","font.sampleText":"Franz jagt im komplett verwahrlosten Taxi quer durch Bayern. äöüßé ÄÖÜẞÉ",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink-Datei","debug.info.story-seed":"Story-Seed","debug.info.current-turn-index":"Aktueller Zug: Index","debug.info.path":"Pfad","debug.global-tags":"Globale Tags","debug.unknown-tag":"Unbekannter Tag","debug.variables":"Variablen","debug.variables.filter-by-name":"Nach Namen filtern","debug.variables.name":"Name","debug.variables.value":"Wert","debug.variables.cancel":"Abbrechen","debug.variables.save":"Speichern","debug.visits":"Aufrufe","debug.visits.path":"Pfad","debug.visits.count":"Anzahl","debug.go-to-path":"Gehe zu Pfad","debug.functions":"Funktionen","debug.functions.arguments":"Argumente","debug.functions.arguments_placeholder":'JSON-formatierte Argumente, z. B. ["arg1", 5]',"debug.functions.run-function":"Funktion ausführen","debug.functions.returned-value":"Rückgabewert","debug.functions.output":"Ausgabe","about.components":"Komponenten und Bibliotheken","about.iftf_support":"Erstellt mit Unterstützung der {iftf}"},ps={language:Fo,messages:Vo},ms=Object.freeze(Object.defineProperty({__proto__:null,default:ps,language:Fo,messages:Vo},Symbol.toStringTag,{value:"Module"})),Ho="en",No={yes:"Yes",no:"No",cancel:"Cancel",back:"Go back","default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.loadgame":"Load game","main.savegame":"Save game","main.continue":"Continue","main.emptyslot":"Empty slot","main.continue-session":"Continue game {session}","main.autosave":"Autosave: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"New save","main.delete-session":"Delete this session?","main.delete-save":"Delete this saved game?","main.confirm-load":"Load this game?","main.confirm-save":"Overwrite this save?","main.settings":"Settings","main.about":"About","main.exit":"Exit","icon.menu":"Menu","icon.back":"Back","icon.debugger":"Debugger","game.end":"The end","game.save-and-quit":"Save game and quit","game.quit":"Quit game","game.click-to-continue":"Click to continue","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz.",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink file","debug.info.story-seed":"Story seed","debug.info.current-turn-index":"Current turn index","debug.info.path":"Path","debug.global-tags":"Global tags","debug.unknown-tag":"Unknown tag","debug.variables":"Variables","debug.variables.filter-by-name":"Filter by name","debug.variables.name":"Name","debug.variables.value":"Value","debug.variables.cancel":"Cancel","debug.variables.save":"Save","debug.visits":"Visits","debug.visits.path":"Path","debug.visits.count":"Count","debug.go-to-path":"Go to path","debug.functions":"Functions","debug.functions.arguments":"Arguments","debug.functions.arguments_placeholder":'JSON-formatted agruments, i.e. ["arg1", 5]',"debug.functions.run-function":"Run function","debug.functions.returned-value":"Returned value","debug.functions.output":"Output","about.components":"Components and libraries","about.iftf_support":"Made with the support of the {iftf}"},vs={language:Ho,messages:No},bs=Object.freeze(Object.defineProperty({__proto__:null,default:vs,language:Ho,messages:No},Symbol.toStringTag,{value:"Module"})),zo="ua",Uo={yes:"Так",no:"Ні",cancel:"Скасувати",back:"Назад","default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.loadgame":"Завантажити гру","main.savegame":"Зберегти гру","main.continue":"Продовжити","main.emptyslot":"Порожній слот","main.continue-session":"Продовжити гру {session}","main.autosave":"Автозбереження: {date}","main.checkpoint":"Контрольна точка","main.checkpoint-named":"Контрольна точка: {name}","main.new-save":"Нове збереження","main.delete-session":"Видалити сесію?","main.delete-save":"Видалити збережену гру?","main.confirm-load":"Завантажити цю гру?","main.confirm-save":"Перезаписати це збереження?","main.settings":"Налаштування","main.about":"Про гру","main.exit":"Вихід","icon.menu":"Меню","icon.back":"Назад","icon.debugger":"Налагодження","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","game.quit":"Вийти з гри","game.click-to-continue":"Натисни, щоб продовжити","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб.",debug:"Налагодження","debug.info":"Інформація","debug.info.ink-file":"Ink-скрипт","debug.info.story-seed":"RNG-сід історії","debug.info.current-turn-index":"Індекс поточного ходу","debug.info.path":"Поточний шлях","debug.global-tags":"Глобальні теги","debug.unknown-tag":"Невідомий тег","debug.variables":"Змінні","debug.variables.filter-by-name":"Фільтр за ім'ям","debug.variables.name":"Ім'я","debug.variables.value":"Значення","debug.variables.cancel":"Скасувати","debug.variables.save":"Зберегти","debug.visits":"Візити","debug.visits.path":"Шлях","debug.visits.count":"Переходи","debug.go-to-path":"Перейти до","debug.functions":"Функції","debug.functions.arguments":"Аргументи","debug.functions.arguments_placeholder":'Аргументи у JSON-форматі, наприклад: ["arg1", 5]',"debug.functions.run-function":"Виконати функцію","debug.functions.returned-value":"Повернене значення","debug.functions.output":"Вивід","about.components":"Компоненти та бібліотеки","about.iftf_support":"Зроблено за підтримки фонду {iftf}"},ys={language:zo,messages:Uo},ks=Object.freeze(Object.defineProperty({__proto__:null,default:ys,language:zo,messages:Uo},Symbol.toStringTag,{value:"Module"})),ws=Object.assign({"../resources/locales/de.json":ms,"../resources/locales/en.json":bs,"../resources/locales/ua.json":ks}),Ss=Object.values(ws);function Bo(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Bo(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function w(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Bo(e))&&(o&&(o+=" "),o+=t);return o}const xs="_application_wrapper_13ojs_1",Cs={application_wrapper:xs},Es=({children:e})=>s("div",{class:w(Cs.application_wrapper,"atrament-ui-app"),children:e}),$s="_error_modal_content_njm9y_1",Os="_error_message_njm9y_8",yn={error_modal_content:$s,error_message:Os},Ts="_container_modal_fhjmv_1",Ps={container_modal:Ts},Ut=({children:e})=>s("div",{class:w(Ps.container_modal,"atrament-container-modal"),children:e}),As="_backdrop_rne3i_1",Ls={backdrop:As},Bt=({onClick:e})=>s("div",{class:w(Ls.backdrop,"atrament-backdrop"),onClick:e}),Ms="_modal_7txxf_1",Is={modal:Ms},Wt=({children:e})=>s("div",{class:w(Is.modal,"atrament-modal"),children:e}),js="_close_eyo4x_1",Rs={close:js},ot=({onClick:e})=>s("div",{class:Rs.close,children:s("button",{onClick:e,title:"Close",children:"✕"})}),Ds="_block_5hv3c_1",Fs="_block_start_5hv3c_6",Vs="_block_end_5hv3c_10",ut={block:Ds,block_start:Fs,block_end:Vs},W=({children:e,align:t=null})=>{const n=w(ut.block,t==="start"&&ut.block_start,t==="end"&&ut.block_end,"atrament-block");return s("div",{class:n,children:e})},_t=()=>{},Wo=({close:e=_t,message:t})=>s(Ut,{children:[s(Bt,{onClick:_t}),s(Wt,{children:s("div",{class:yn.error_modal_content,children:[e!==_t?s(ot,{onClick:e}):"",s(W,{children:s("p",{class:yn.error_message,children:t})})]})})]}),Hs="_container_4l08p_1",Ns={container:Hs},Ve=({children:e,style:t={}})=>s("div",{style:t,class:w(Ns.container,"atrament-container"),children:e}),zs="_loading_obrk7_1",Us="_progressbar_obrk7_9",kn={loading:zs,progressbar:Us},Bs="_container_flex_at0vo_1",Ws={container_flex:Bs},Gt=({cssClass:e="",children:t})=>s("div",{class:w(Ws.container_flex,e,"atrament-flex-container"),children:t}),Gs="_sk_cube_grid_fv0g6_1",qs="_sk_cube1_fv0g6_17",Ks="_sk_cube2_fv0g6_18",Ys="_sk_cube3_fv0g6_19",Xs="_sk_cube4_fv0g6_20",Js="_sk_cube5_fv0g6_21",Zs="_sk_cube6_fv0g6_22",Qs="_sk_cube7_fv0g6_23",ea="_sk_cube8_fv0g6_24",ta="_sk_cube9_fv0g6_25",K={sk_cube_grid:Gs,sk_cube1:qs,sk_cube2:Ks,sk_cube3:Ys,sk_cube4:Xs,sk_cube5:Js,sk_cube6:Zs,sk_cube7:Qs,sk_cube8:ea,sk_cube9:ta},na=()=>s("div",{class:K.sk_cube_grid,children:[s("div",{class:K.sk_cube1}),s("div",{class:K.sk_cube2}),s("div",{class:K.sk_cube3}),s("div",{class:K.sk_cube4}),s("div",{class:K.sk_cube5}),s("div",{class:K.sk_cube6}),s("div",{class:K.sk_cube7}),s("div",{class:K.sk_cube8}),s("div",{class:K.sk_cube9})]}),oa="_progress_frame_15ixd_1",ra="_progress_bar_15ixd_8",sa="_progress_bar_solid_15ixd_15",aa="_standard_15ixd_19",ia="_accent_15ixd_23",ca="_borderless_15ixd_27",la="_progress_content_15ixd_31",le={progress_frame:oa,progress_bar:ra,progress_bar_solid:sa,standard:aa,accent:ia,borderless:ca,progress_content:la},qt=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let a=r?(r-n)*100/(o-n):0;a>100&&(a=100),a<0&&(a=0);const i=w(le.progress_frame,e.border===!1&&le.borderless,"atrament-tag-progressbar",e.class),c=w(le.progress_bar,e.style==="accent"?le.accent:le.standard,e.solid&&le.progress_bar_solid,"atrament-tag-progressbar-gauge");return s("div",{class:i,children:[s("div",{class:c,style:{width:`${a}%`}}),s("div",{class:w(le.progress_content,"atrament-tag-progressbar-content"),children:[t,e.display==="thin"?"":s($,{children:" "})]})]})},ua=({loadedPercent:e=0})=>s(Ve,{children:s(Gt,{children:s("div",{class:w(kn.loading,"atrament-loading"),children:[s(na,{}),s("div",{class:w(kn.progressbar,"atrament-loading-progressbar"),children:e>0?s(qt,{options:{display:"thin",solid:!0,value:e}}):""})]})})});var _a={};function Ue(e,t){for(var n in t)e[n]=t[n];return e}function da(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,a=e.match(r),i={};if(a&&a[1])for(var c=a[1].split("&"),_=0;_<c.length;_++){var u=c[_].split("=");i[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=Mt(e.replace(r,"")),t=Mt(t||"");for(var d=Math.max(e.length,t.length),l=0;l<d;l++)if(t[l]&&t[l].charAt(0)===":"){var f=t[l].replace(/(^:|[+*?]+$)/g,""),h=(t[l].match(/[+*?]+$/)||_a)[0]||"",g=~h.indexOf("+"),p=~h.indexOf("*"),b=e[l]||"";if(!b&&!p&&(h.indexOf("?")<0||g)){o=!1;break}if(i[f]=decodeURIComponent(b),g||p){i[f]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){o=!1;break}return(n.default===!0||o!==!1)&&i}function fa(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function ha(e,t){return e.index=t,e.rank=(function(n){return n.props.default?0:Mt(n.props.path).map(ga).join("")})(e),e.props}function Mt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function ga(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var pa={},fe=[],wn=[],z=null,Go={url:Kt()},ma=Ze(Go);function Kt(){var e;return""+((e=z&&z.location?z.location:z&&z.getCurrentLocation?z.getCurrentLocation():typeof location<"u"?location:pa).pathname||"")+(e.search||"")}function re(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),(function(n){for(var o=fe.length;o--;)if(fe[o].canRoute(n))return!0;return!1})(e)&&(function(n,o){o===void 0&&(o="push"),z&&z[o]?z[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)})(e,t?"replace":"push"),qo(e)}function qo(e){for(var t=!1,n=0;n<fe.length;n++)fe[n].routeTo(e)&&(t=!0);return t}function va(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return re(t)}}function ba(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function ya(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(va(t))return ba(e)}while(t=t.parentNode)}}var Sn=!1;function Ko(e){e.history&&(z=e.history),this.state={url:e.url||Kt()}}Ue(Ko.prototype=new X,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=we(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Sn||(Sn=!0,z||addEventListener("popstate",function(){qo(Kt())}),addEventListener("click",ya)),fe.push(this),z&&(this.u=z.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),fe.splice(fe.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(ha).sort(fa);for(var n=0;n<e.length;n++){var o=e[n],r=da(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,a=t.url,i=this.c,c=this.g(we(e.children),a);if(c&&(o=Sr(c[0],Ue(Ue({url:a,matches:n=c[1]},n),{key:void 0,ref:void 0}))),a!==(i&&i.url)){Ue(Go,i=this.c={url:a,previous:i&&i.url,current:o,path:o?o.props.path:null,matches:n}),i.router=this,i.active=o?[o]:[];for(var _=wn.length;_--;)wn[_]({});typeof r=="function"&&r(i)}return ee(ma.Provider,{value:i},o)}});function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xe.apply(null,arguments)}var me;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(me||(me={}));var xn=function(e){return e};function ka(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,a=o.map(function(v){var S=xn(Xe({pathname:"/",search:"",hash:"",state:null,key:$n()},typeof v=="string"?On(v):v));return S}),i=Cn(r??a.length-1,0,a.length-1),c=me.Pop,_=a[i],u=En(),d=En();function l(v){return typeof v=="string"?v:wa(v)}function f(v,S){return S===void 0&&(S=null),xn(Xe({pathname:_.pathname,search:"",hash:""},typeof v=="string"?On(v):v,{state:S,key:$n()}))}function h(v,S,T){return!d.length||(d.call({action:v,location:S,retry:T}),!1)}function g(v,S){c=v,_=S,u.call({action:c,location:_})}function p(v,S){var T=me.Push,P=f(v,S);function R(){p(v,S)}h(T,P,R)&&(i+=1,a.splice(i,a.length,P),g(T,P))}function b(v,S){var T=me.Replace,P=f(v,S);function R(){b(v,S)}h(T,P,R)&&(a[i]=P,g(T,P))}function m(v){var S=Cn(i+v,0,a.length-1),T=me.Pop,P=a[S];function R(){m(v)}h(T,P,R)&&(i=S,g(T,P))}var y={get index(){return i},get action(){return c},get location(){return _},createHref:l,push:p,replace:b,go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(S){return u.push(S)},block:function(S){return d.push(S)}};return y}function Cn(e,t,n){return Math.min(Math.max(e,t),n)}function En(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function $n(){return Math.random().toString(36).substr(2,8)}function wa(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,a=e.hash,i=a===void 0?"":a;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function On(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Sa(e,t={}){let[,n]=E({}),[o]=E(e.get());return A(()=>{o!==e.get()&&n({})},[]),A(()=>{let r,a,i,c=()=>{r||(r=1,a=setTimeout(()=>{r=void 0,n({})}))};return t.keys?i=mr(e,t.keys,c):i=e.listen(c),()=>{i(),clearTimeout(a)}},[e,""+t.keys]),e.get()}const C=()=>{const e=ie(zt),t=k(f=>{try{return f()}catch(h){return e.ink.story().onError&&e.ink.story().onError(h.toString()),null}},[e]),n=k(f=>{if(!f)return null;const h=`${f}`;return h.startsWith("http://")||h.startsWith("https://")?h:e.game.getAssetPath(h)},[e]),o=k((f,h)=>{e.settings.set(f,h),e.settings.save()},[e]),r=k((...f)=>e.state.setSubkey(...f),[e]),a=k((f,h=[])=>{let g={};try{g=e.ink.evaluateFunction(f,h,!0)}catch(p){e.ink.story().onError&&e.ink.story().onError(p.toString()),g.error=p.toString()}return g},[e]),i=k((...f)=>t(()=>e.ink.setVariable(...f)),[e,t]),c=k((...f)=>t(()=>e.ink.getVariable(...f)),[e,t]),_=k((...f)=>t(()=>e.game.makeChoice(...f)),[e,t]),u=k((...f)=>t(()=>e.game.continueStory(...f)),[e,t]),d=k(()=>{e.state.setSubkey("game","background",null),e.state.setSubkey("game","background_page",null)},[e]),l=k(f=>{e.state.setKey(Ae,f)},[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:_,continueStory:u,getAssetPath:n,updateSettings:o,setStateSubkey:r,evaluateInkFunction:a,setInkVariable:i,getInkVariable:c,resetBackground:d,throwAtramentError:l}},L=(e=void 0)=>{const t=ie(zt);return Sa(t.store,{keys:e})},rt=()=>{const{evaluateInkFunction:e,setStateSubkey:t}=C(),n=L([F]),o=k((c,_,u)=>{t(F,"current",c);let d=`${_}`;const l=_.split(`
`),h=l.shift().match(/\[title\](.+?)\[\/title\]/i);h&&(t(F,"title",h[1]),d=l.join(`
`)),t(F,"content",d),u&&t(F,"display",u)},[t]),r=k(()=>{const c=n[F].current;if(c){const _=e(c);o(c,_.output,null)}},[n,o,e]),a=k(()=>{t(F,"current",null),t(F,"content",""),t(F,"title",null),t(F,"display",null)},[t]),i=k((c,_)=>{const u=e(c);u.output?o(c,u.output,_==="modal"?"modal":"overlay"):r()},[e,r,o]);return{refreshOverlay:r,closeOverlay:a,setOverlayContent:o,execContentFunction:i,overlay:{current:n[F].current,content:n[F].content.split(`
`),title:n[F].title,display:n[F].display}}},xa="_menu_toggle_1d5hk_1",Ca="_menu_content_1d5hk_15",Tn={menu_toggle:xa,menu_content:Ca};function st(e){A(()=>(document.addEventListener("keydown",e,!1),()=>document.removeEventListener("keydown",e,!1)),[e])}function se(e=!1){const[t,n]=E(e),o=k(()=>n(i=>!i),[]),r=k(()=>n(!0),[]),a=k(()=>n(!1),[]);return[t,o,n,r,a]}const Ea="_atrament_version_21x2r_1",$a="_atrament_about_21x2r_14",Oa="_atrament_appversion_21x2r_20",dt={atrament_version:Ea,atrament_about:$a,atrament_appversion:Oa},Ta=({onClick:e})=>s("div",{class:dt.atrament_version,onClick:e,children:[s("div",{class:dt.atrament_about,children:"?"}),s("div",{class:dt.atrament_appversion,children:["Atrament ",wo]})]}),Pa=()=>s("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:[s("title",{children:s(O,{id:"icon.menu"})}),s("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})]}),Aa=()=>s("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),La=()=>s("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),Ma=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",role:"img",children:[s("title",{children:s(O,{id:"icon.back"})}),s("path",{d:"M0 0h24v24H0z",fill:"none"}),s("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),Ia=()=>s("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100%",height:"100%",viewBox:"0 0 122.88 101.878","enable-background":"new 0 0 122.88 101.878",role:"img",children:[s("title",{children:s(O,{id:"icon.debugger"})}),s("g",{children:s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M64.406,12.143c-2.672-1.042-5.431-1.586-8.276-1.586 c-4.279,0-7.798,1.369-10.557,4.084L21.765,38.427l2.477,2.499l-9.037,9.101L0,34.799l9.036-9.037l2.802,2.737L35.515,4.844 C38.773,1.608,42.271,0,46.007,0C52.285,0,58.411,4.041,64.406,12.143L64.406,12.143z M100.535,5.408 c2.588,0,5.072,0.441,7.384,1.25l-5.874,6.358c-13.345,14.437,1.715,22.79,14.986,12.879l5.119-3.822 c0.475,1.813,0.729,3.717,0.729,5.679c0,12.341-10.003,22.345-22.345,22.345c-4.026,0-7.804-1.065-11.066-2.929L78.616,58.689 c10.214,9.778,20.431,19.554,30.646,29.33l-13.858,13.858C85.74,91.8,76.08,81.718,66.422,71.635L47.394,91.833 c-1.445,2.471-4.126,4.132-7.194,4.132c-4.599,0-8.329-3.729-8.329-8.329c0-1.988,0.699-3.815,1.862-5.247l-0.012-0.012 l0.073-0.063c0.601-0.723,1.322-1.342,2.132-1.828L57.327,62.14L30.941,34.504L41.89,23.556 c10.157,9.756,18.402,17.582,28.572,27.324l11.864-10.172c-2.604-3.654-4.136-8.125-4.136-12.955 C78.19,15.411,88.193,5.408,100.535,5.408L100.535,5.408z M28.63,10.362L17.747,21.245l-2.086-2.085L26.544,8.276L28.63,10.362 L28.63,10.362z",style:"fill:var(--accent-fg-color)"})})]}),ja="_debug_toggle_1xfgt_1",Ra="_debug_container_1xfgt_15",Da="_container_1xfgt_30",Fa="_input_div_1xfgt_46",Va="_button_1xfgt_50",Ha="_input_1xfgt_46",Na="_errormsg_1xfgt_74",za="_unknown_tag_1xfgt_82",M={debug_toggle:ja,debug_container:Ra,container:Da,input_div:Fa,button:Va,input:Ha,errormsg:Na,unknown_tag:za},Ua="_collapse_19tvh_1",Ba="_collapse_title_19tvh_6",Wa="_collapse_children_19tvh_12",ft={collapse:Ua,collapse_title:Ba,collapse_children:Wa},Ce=({title:e,children:t,open:n=!1})=>s("details",{class:ft.collapse,open:n,children:[s("summary",{class:ft.collapse_title,children:e}),s("div",{class:ft.collapse_children,children:t})]}),Ga="_table_1rcps_1",qa="_table_fixed_1rcps_13",Ka="_cell_full_1rcps_23",Ya="_cell_padding_1rcps_31",Xa="_thead_border_1rcps_39",Ja="_tbody_border_1rcps_47",Za="_caption_1rcps_63",Qa="_page_1rcps_89",ei="_page_active_1rcps_97",q={table:Ga,table_fixed:qa,cell_full:Ka,cell_padding:Ya,thead_border:Xa,tbody_border:Ja,caption:Za,page:Qa,page_active:ei},Ee=({columns:e=[],data:t=[],pageSize:n=0,border:o=!0,padding:r=!0,columnWidth:a=[],fixed:i=!1,className:c=""})=>{const[_,u]=E(0);A(()=>{u(0)},[t]);let d=1,l=0,f=t.length;n&&(d=Math.ceil(t.length/n),l=_*n,f=l+n);const h=p=>{u(+p.target.value)},g=t.slice(l,f);return s("table",{class:w(q.table,i&&q.table_fixed,c),children:[n>0&&s("caption",{class:q.caption,children:[...Array(d).keys()].map(p=>s("button",{onClick:h,value:p,class:p===_?q.page_active:q.page,children:p+1},p))}),e.length>0&&s("thead",{children:s("tr",{class:o?q.thead_border:"",children:e.map((p,b)=>{const m=p.style||{};return a[b]&&(m.width=a[b]),s("th",{class:r?q.cell_padding:q.cell_full,style:m,children:p.name},b)})})}),g.length>0&&s("tbody",{children:g.map((p,b)=>s("tr",{class:o?q.tbody_border:"",children:p.map((m,y)=>{const v={};return a[y]&&(v.width=a[y]),s("td",{class:r?q.cell_padding:q.cell_full,style:v,children:m},y)})},b))})]})},ti=()=>{const{atrament:e}=C(),t=V(),o=e.ink.story().state,r=e.state.get().game,a=[[t.translate("debug.info.ink-file"),`${r.$path}/${r.$file}`],[t.translate("debug.info.story-seed"),o.storySeed],[t.translate("debug.info.current-turn-index"),o.currentTurnIndex],[t.translate("debug.info.path"),r[Oo]]];return s(Ce,{title:t.translate("debug.info"),open:!0,children:s(Ee,{data:a,fixed:!0})})},ni=({closeFn:e})=>{const{atrament:t}=C(),[n,o]=E(""),[r,a]=E(""),i=_=>{o(_.target.value),a("")},c=()=>{if(n){try{t.ink.goTo(n),t.game.continueStory(),e()}catch(_){a(_.toString())}o("")}};return s($,{children:[s("div",{class:M.container,children:[s("div",{children:[s(O,{id:"debug.go-to-path"}),":"]}),s("div",{class:M.input_div,children:s("input",{class:M.input,type:"text",value:n,onInput:i})}),s("div",{children:[s("button",{class:M.button,onClick:c,children:">>>"})," ",s("br",{})]})]}),s("div",{class:M.container,children:s("span",{class:M.errormsg,children:r})})]})},oi=()=>{const{atrament:e}=C(),t=V(),n=e.ink.getGlobalTags(),o=Object.keys(n).map(r=>Vr.includes(r)?[r,n[r]]:[s("span",{class:M.unknown_tag,title:t.translate("debug.unknown-tag"),children:r},r),n[r]]);return s(Ce,{title:t.translate("debug.global-tags"),open:!0,children:s(Ee,{data:o,fixed:!0})})},ri="_button_pofct_1",si="_button_close_pofct_33",ai="_input_pofct_65",ii="_toggle_pofct_91",ci="_listview_pofct_103",ae={button:ri,button_close:si,input:ai,toggle:ii,listview:ci},li="_checkbox_wrapper_1bc4s_1",ui="_checkbox_1bc4s_1",Pn={checkbox_wrapper:li,checkbox:ui},at=({name:e,enabled:t,onChange:n})=>s("div",{class:Pn.checkbox_wrapper,children:s("input",{type:"checkbox",class:Pn.checkbox,checked:t,onChange:n,name:e,id:e})}),_i=({value:e,setNewValue:t})=>{const n=o=>t(+o.target.value);return s("input",{class:ae.input,type:"number",value:e,onInput:n})},di=({value:e,setNewValue:t})=>{const n=o=>t(o.target.value);return s("input",{class:ae.input,type:"text",value:e,onInput:n})},fi=({name:e,value:t,setNewValue:n})=>{const o=r=>n(r.target.checked);return s("div",{class:ae.toggle,children:s(at,{enabled:t,onChange:o,name:e})})},hi=({name:e,value:t})=>{if(e===t._originNames[0]&&t.size===0){const o=[...t.origins[0]._itemNameToValues.keys()];return s("span",{class:ae.listview,children:JSON.stringify(o).replace(/,/g,", ")})}const n=[];return t.forEach((o,r)=>n.push([JSON.parse(r),o])),s("ul",{class:ae.listview,children:n.map(([o,r])=>s("li",{children:[s("abbr",{title:o.originName,children:o.itemName}),": ",r]},o))})},gi=({name:e,value:t})=>{const{getInkVariable:n,setInkVariable:o}=C(),r=V(),[a,i]=E(!1),[c,_]=E(!1),[u,d]=E(!1);A(()=>{const g=n(e);_(g),d(g)},[e,n,_,d]);const l=g=>{g.preventDefault(),i(!0)},f=()=>i(!1),h=()=>{u!==c&&(o(e,u),_(u)),i(!1)};return a?s($,{children:[s("button",{class:ae.button_close,onClick:f,title:r.translate("debug.variables.cancel"),children:"X"}),typeof t=="number"&&s(_i,{value:u,setNewValue:d}),typeof t=="string"&&s(di,{value:u,setNewValue:d}),typeof t=="boolean"&&s(fi,{name:e,value:u,setNewValue:d}),s("button",{class:ae.button,onClick:h,title:r.translate("debug.variables.save"),children:">"})]}):s($,{children:typeof u=="object"?s(hi,{name:e,value:u}):s("button",{class:ae.button,onClick:l,children:JSON.stringify(u)})})};function pi(e){const t=e.ink.getVariables();return Object.entries(t).sort((o,r)=>o[0]>r[0]?0:-1)}const mi=({variables:e})=>{const t=V(),n=e.map((o,r)=>[o[0],s(gi,{name:o[0],value:o[1]},r)]);return s(Ee,{columns:[{name:t.translate("debug.variables.name"),style:{width:"50%","text-align":"left"}},{name:t.translate("debug.variables.value"),style:{"text-align":"left"}}],data:n,pageSize:10,fixed:!0})},vi=()=>{const[e,t]=E(""),{atrament:n}=C(),o=V(),r=pi(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(Ce,{title:o.translate("debug.variables"),children:[s("div",{class:M.input_div,children:s("input",{class:M.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(mi,{variables:r})]})};function bi(e){const t=e.ink.story().state._visitCounts,n=[];for(let o of t)n.push(o);return n.sort((o,r)=>o[0]>r[0]?0:-1)}const yi=()=>{const[e,t]=E(""),{atrament:n}=C(),o=V(),r=bi(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(Ce,{title:o.translate("debug.visits"),children:[s("div",{class:M.input_div,children:s("input",{class:M.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(Ee,{columns:[{name:o.translate("debug.visits.path"),style:{width:"75%","text-align":"left"}},{name:o.translate("debug.visits.count"),style:{"text-align":"left"}}],data:r,pageSize:10,fixed:!0})]})},ki=()=>{const{atrament:e}=C(),t=V(),[n,o]=E(""),[r,a]=E(null),[i,c]=E(""),[_,u]=E(null),d=g=>{let p=[];try{p=JSON.parse(g)}catch{}return p},l=g=>{o(g.target.value),c(""),u(null)},f=g=>{a(g.target.value),c(""),u(null)},h=()=>{if(n)try{const g=e.ink.evaluateFunction(n,d(r),!0);u(g),c("")}catch(g){c(g.toString())}};return s(Ce,{title:t.translate("debug.functions"),children:[s("div",{class:M.container,children:[s("div",{children:[s(O,{id:"debug.functions.run-function"}),":"]}),s("div",{class:M.input_div,children:s("input",{class:M.input,type:"text",value:n,onInput:l})})]}),s("div",{class:M.container,children:[s("div",{children:[s(O,{id:"debug.functions.arguments"}),":"]}),s("div",{class:M.input_div,children:s("input",{class:M.input,type:"text",value:r,onInput:f,placeholder:t.translate("debug.functions.arguments_placeholder"),title:t.translate("debug.functions.arguments_placeholder")})}),s("div",{children:[s("button",{class:M.button,onClick:h,children:">>>"})," ",s("br",{})]})]}),s("div",{class:M.container,children:s("pre",{children:n&&`${n}(${r?d(r).map(JSON.stringify).join(", "):""})`})}),i&&s("div",{class:M.container,children:s("span",{class:M.errormsg,children:i})}),s("div",{class:M.container,children:_&&s(Ee,{data:[[t.translate("debug.functions.returned-value"),JSON.stringify(_.returned)],[t.translate("debug.functions.output"),s("pre",{children:_.output},"output")]],fixed:!0})})]})},wi=()=>{const[e,t]=se(!1),[n,o]=E(!1),r=V(),a=k(i=>{i.code==="Backquote"&&(n?(t(),o(!1)):(o(!0),setTimeout(()=>o(!1),1e3)))},[t,n,o]);return st(a),e?s("div",{class:M.debug_container,children:[s(ot,{onClick:t}),s(ti,{}),s(oi,{}),s(vi,{}),s(yi,{}),s(ki,{}),s(ni,{closeFn:t})]}):s("button",{class:M.debug_toggle,onClick:t,title:r.translate("debug"),children:s(Ia,{})})},Si=()=>{const{metadata:e}=L(["metadata"]);return e.debug?s(wi,{}):s($,{})},xi="_header_1gyyv_1",Ci="_infobox_1gyyv_19",An={header:xi,infobox:Ci},Ei=""+new URL("atrament-logo-D7LOrOOl.png",import.meta.url).href,$i=""+new URL("iftf-logo-BWs-h1t3.png",import.meta.url).href,Yo=[["Atrament Core","https://github.com/technix/atrament-core"],["Atrament Web","https://github.com/technix/atrament-web"],["Atrament Web UI","https://github.com/technix/atrament-web-ui"],["InkJS","https://github.com/y-lohse/inkjs"],["Preact","https://preactjs.com/"],["Howler","https://howlerjs.com/"],["Nanostores","https://github.com/nanostores/nanostores"],["LocalForage","https://github.com/localForage/localForage"],["fflate","https://github.com/101arrowz/fflate"]],Oi=Yo.length-1,Ln=({href:e,children:t})=>s("a",{href:e,target:"_blank",rel:"noreferrer",children:t}),Ti='<a href="https://iftechfoundation.org/" target="_blank" rel="noreferrer">Interactive Fiction Technology Foundation</a>',Pi=({onClick:e})=>s(W,{children:s("div",{onClick:n=>n.target.tagName.toLowerCase()==="a"?"":e(n),children:[s("div",{class:An.header,children:[s("img",{src:Ei}),s("h1",{children:["Atrament ",s("small",{children:wo})]})]}),s("p",{children:s(Ln,{href:"https://atrament.ink/",children:"https://atrament.ink/"})}),s("p",{children:[s(O,{id:"about.components"}),": ",Yo.map((n,o)=>s("span",{children:[s(Ln,{href:n[1],children:n[0]}),o===Oi?".":","," "]},n[1]))]}),s("div",{class:An.infobox,children:[s("img",{src:$i}),s("p",{children:s(O,{id:"about.iftf_support",html:!0,iftf:Ti})})]})]})}),Ai="_settings_container_1lyb2_1",Li={settings_container:Ai},Mi=()=>{const{updateSettings:e}=C(),t=L(["settings"]),n=o=>e("fullscreen",o.target.checked);return s("div",{class:w("atrament-settings-fullscreen"),children:[s(at,{enabled:t.settings.fullscreen,onChange:n,name:"settings-fullscreen"})," ",s("label",{for:"settings-fullscreen",children:s(O,{id:"settings.fullscreen"})})]})},Ii="_settings_sound_container_1abud_1",ji="_settings_sound_input_container_1abud_6",Ri="_settings_sound_volume_1abud_10",Di="_settings_sound_icon_1abud_17",ge={settings_sound_container:Ii,settings_sound_input_container:ji,settings_sound_volume:Ri,settings_sound_icon:Di},Fi=()=>{const{updateSettings:e}=C(),t=L(["settings"]),n=i=>e("mute",!i.target.checked),o=i=>e("volume",i.target.value),{mute:r,volume:a}=t.settings;return s($,{children:[s("div",{class:w(ge.settings_sound,"atrament-settings-sound"),children:[s(at,{enabled:!r,onChange:n,name:"settings-sound"})," ",s("label",{for:"settings-sound",children:s(O,{id:"settings.sound"})})]}),s("div",{class:ge.settings_sound_container,children:[s("div",{class:ge.settings_sound_icon,children:s(La,{})}),s("div",{class:ge.settings_sound_input_container,children:s("input",{class:ge.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:a,onChange:o})}),s("div",{class:ge.settings_sound_icon,children:s(Aa,{})})]})]})},Vi="_settings_fontsize_container_1ho7s_1",Hi="_settings_font_a_1ho7s_6",Ni="_settings_fontsize_input_container_1ho7s_12",zi="_settings_fontsize_input_1ho7s_12",Ui="_settings_font_sample_1ho7s_22",ue={settings_fontsize_container:Vi,settings_font_a:Hi,settings_fontsize_input_container:Ni,settings_fontsize_input:zi,settings_font_sample:Ui},Xo=[];for(let e=At;e<=Lt;e+=nt)Xo.push(e);const Bi=()=>{const{updateSettings:e}=C(),t=L(["settings"]),{font:n,fontSize:o}=t.settings,r=a=>e("fontSize",a.target.value);return s("div",{class:w(ue.settings_text,"atrament-settings-text"),children:[s("div",{class:ue.settings_fontsize_container,children:[s("div",{class:ue.settings_font_a,style:{"font-size":`${At}%`},children:"A"}),s("div",{class:ue.settings_fontsize_input_container,children:[s("input",{class:ue.settings_fontsize_input,type:"range",min:At,max:Lt,step:nt,value:o||tt,onInput:r,list:"fontSizes"}),s("datalist",{id:"fontSizes",children:Xo.map(a=>s("option",{value:a},a))})]}),s("div",{class:ue.settings_font_a,style:{"font-size":`${Lt}%`},children:"A"})]}),s("div",{class:ue.settings_font_sample,style:{"font-size":`${o}%`,"font-family":he[n]},children:s(O,{id:"font.sampleText"})})]})},Wi="_settings_font_container_yph84_1",Gi={settings_font_container:Wi},qi=()=>{const{updateSettings:e}=C(),t=L(["settings"]),n=r=>e("font",r.target.value),o=t.settings.font;return s("div",{class:w(Gi.settings_font_container,"atrament-settings-font"),children:s("select",{onChange:n,style:{"font-family":he[o]},children:Object.entries(he).map(([r,a])=>s("option",{value:r,style:{"font-family":a},selected:o===r,children:r},r))})})},Ki="_settings_theme_container_1gr28_1",Yi="_settings_theme_button_1gr28_8",Jo={settings_theme_container:Ki,settings_theme_button:Yi},Xi=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["fg-color"],"background-color":t["bg-color"]};return s("button",{class:Jo.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:s(O,{id:`themes.${e}`,defaultMessage:e})})},Ji=()=>{const{updateSettings:e}=C(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return s("div",{class:w(Jo.settings_theme_container,"atrament-settings-theme"),children:Object.entries(be).map(([n,o])=>s(Xi,{themeId:n,themeConfig:o,onClick:t},n))})},Zi=()=>{const{updateSettings:e}=C(),t=L(["settings"]),n=o=>e("animation",o.target.checked);return s("div",{class:w("atrament-settings-animation"),children:[s(at,{enabled:t.settings.animation,onChange:n,name:"settings-animation"})," ",s("label",{for:"settings-animation",children:s(O,{id:"settings.animations"})})]})},Yt=()=>{const e=V();return s("div",{class:Li.settings_container,children:[s(Mi,{}),s(Zi,{}),s(Fi,{}),s(Ce,{title:e.translate("settings.appearance"),children:[s(qi,{}),s(Bi,{}),s(Ji,{})]})]})},Qi="_button_accent_ja9vp_1",ec={button_accent:Qi},Xt=({children:e,onClick:t})=>s("button",{onClick:t,class:ec.button_accent,children:e}),tc={break:"_break_jkn3k_1"},$e=()=>s("div",{class:tc.break}),nc=()=>{const{atrament:e}=C(),t=e.interfaces.platform.exitApp;return s($,{children:[s(Yt,{}),t?s($,{children:[s($e,{}),s(Xt,{onClick:t,children:s(O,{id:"main.exit"})})]}):""]})},oc="_menu_button_hdcg9_1",rc={menu_button:oc},U=({children:e,key:t,onClick:n,attributes:o={}})=>s("button",{onClick:n,class:rc.menu_button,...o,children:e},t),sc="_header_929fb_1",ac="_header_align_929fb_8",Mn={header:sc,header_align:ac},it=({children:e})=>s("div",{class:w(Mn.header,"atrament-header"),children:s("div",{class:Mn.header_align,children:e})}),ic="_container_1qixe_1",cc="_prompt_1qixe_7",lc="_menu_item_1qixe_15",uc="_small_1qixe_48",_c="_is_deletable_1qixe_53",dc="_delete_button_1qixe_57",fc="_delete_item_1qixe_78",B={container:ic,prompt:cc,menu_item:lc,small:uc,is_deletable:_c,delete_button:dc,delete_item:fc},In=({prompt:e,onAccept:t,onReject:n,attributes:o})=>s("div",{class:B.container,children:[s("div",{class:B.prompt,children:e}),s("button",{onClick:t,class:w(B.menu_item,B.delete_item,B.small),...o,children:s(O,{id:"yes"})}),s("button",{onClick:n,class:w(B.menu_item,B.small),...o,children:s(O,{id:"no"})})]}),Jt=({children:e,key:t,onSelect:n,isDisabled:o=!1,isDeletable:r=!1,onDelete:a=()=>{},deletePrompt:i="",hasConfirmation:c=!1,confirmPrompt:_="",attributes:u={}})=>{const[d,,,l,f]=se(!1),[h,,,g,p]=se(!1),b=y=>{a(y),f()},m=y=>{n(y),p()};return h?s(In,{prompt:_,onAccept:m,onReject:p,attributes:u}):d?s(In,{prompt:i,onAccept:b,onReject:f,attributes:u}):s("div",{class:B.container,children:[s("button",{onClick:c?g:n,disabled:o,class:w(B.menu_item,r&&B.is_deletable),...u,children:e},t),r&&!o&&s("button",{onClick:l,class:w(B.menu_item,B.delete_button),...u,children:"✕"},t)]})},jn=e=>new Date(e).toLocaleString(Co),Zo=({loadGame:e,hasConfirmation:t=!1})=>{const[n,o]=E([]),r=V(),{atrament:a}=C(),{metadata:i}=L(["metadata"]),c=k(async()=>{const d=await a.game.listSaves(),l=[],f=d.filter(g=>g.type===a.game.SAVE_AUTOSAVE).map(g=>({...g,slot:r.translate("main.autosave",{date:jn(g.date)})}));if(f.length&&l.push(f[0]),i.load_from_checkpoints){const g=d.filter(p=>p.type===a.game.SAVE_CHECKPOINT).map(p=>({...p,slot:typeof p.name=="boolean"?r.translate("main.checkpoint"):r.translate("main.checkpoint-named",{name:p.name})}));g.length&&l.push(...g)}const h=d.filter(g=>g.type===a.game.SAVE_GAME).map(g=>({...g,slot:jn(g.date)}));l.push(...h),o(l)},[a,i,r]),_=k(async d=>{const l=d.target.getAttribute("data-save");await e(l)},[e]),u=k(async d=>{const l=d.target.getAttribute("data-save");await a.game.removeSave(l),await c()},[a,c]);return A(()=>{(async()=>c())()},[c]),s($,{children:n.map(d=>s(Jt,{onSelect:_,onDelete:u,isDisabled:!d.type,isDeletable:d.type,deletePrompt:r.translate("main.delete-save"),hasConfirmation:t,confirmPrompt:r.translate("main.confirm-load"),attributes:{"data-save":d.id},children:d.slot},d.name))})},hc=e=>new Date(e).toLocaleString(Co),gc=({saveGame:e})=>{const[t,n]=E([]),o=V(),{atrament:r}=C(),{metadata:a}=L(["metadata"]),i=a.saves?+a.saves:0,c=k(async()=>{const l=(await r.game.listSaves()).filter(f=>f.type===r.game.SAVE_GAME).map(f=>({...f,slot:hc(f.date)}));l.length<i&&l.push({name:l.length+1,slot:o.translate("main.new-save")}),n(l)},[r,o,i]),_=k(async d=>{const l=d.target.getAttribute("data-savename");await e(l),await c()},[e,c]),u=k(async d=>{const l=d.target.getAttribute("data-saveid");await r.game.removeSave(l),await c()},[r,c]);return A(()=>{(async()=>c())()},[c]),s($,{children:t.map(d=>s(Jt,{onSelect:_,onDelete:u,isDisabled:!1,isDeletable:d.type,deletePrompt:o.translate("main.delete-save"),hasConfirmation:d.type,confirmPrompt:o.translate("main.confirm-save"),attributes:{"data-saveid":d.id,"data-savename":d.name},children:d.slot},d.name))})},pc=({saveGame:e,toggleSaveMenu:t})=>s($,{children:[s(it,{children:s("h2",{children:s(O,{id:"main.savegame"})})}),s(gc,{saveGame:e}),s($e,{}),s(U,{onClick:t,children:s(O,{id:"cancel"})},"go-back")]}),mc=({loadGame:e,toggleLoadMenu:t})=>s($,{children:[s(it,{children:s("h2",{children:s(O,{id:"main.loadgame"})})}),s(Zo,{loadGame:e,hasConfirmation:!0}),s($e,{}),s(U,{onClick:t,children:s(O,{id:"cancel"})},"go-back")]}),vc=({toggleSettingsMenu:e})=>s($,{children:[s(Yt,{}),s($e,{}),s(U,{onClick:e,children:s(O,{id:"back"})},"go-back")]}),bc=()=>s(Xt,{onClick:()=>re("/"),children:s(O,{id:"game.quit"})}),yc=({toggleMenu:e})=>{const{atrament:t}=C(),n=L(["metadata"]),{saves:o,load_from_checkpoints:r}=n.metadata,[a,i]=se(!1),[c,_]=se(!1),[u,d]=se(!1),l=k(async h=>{await t.game.restart(h),_(),e()},[t,e,_]),f=k(async h=>{await t.game.saveGame(h)},[t]);return a?s(pc,{saveGame:f,toggleSaveMenu:i}):c?s(mc,{loadGame:l,toggleLoadMenu:_}):u?s(vc,{toggleSettingsMenu:d}):s($,{children:[o?s(U,{onClick:i,children:s(O,{id:"main.savegame"})},"save-game"):null,o||r?s(U,{onClick:_,children:s(O,{id:"main.loadgame"})},"load-game"):null,o||r?s(U,{onClick:d,children:s(O,{id:"main.settings"})},"settings"):s(Yt,{}),s($e,{}),s(bc,{})]})},kc=({isHomeScreen:e,toggleMenu:t})=>e?s(nc,{}):s(yc,{toggleMenu:t}),Zt=({isHomeScreen:e=!1})=>{const[t,n]=se(!1),[o,r,a]=se(!1),i=k(()=>{n(),a(!1)},[n,a]),c=k(_=>{_.key==="Escape"&&(i(),a(!1))},[i,a]);return st(c),t?s(Ut,{children:[s(Bt,{onClick:i}),s(Wt,{children:s("div",{class:Tn.menu_content,children:[s(ot,{onClick:i}),o?s(Pi,{onClick:r}):s($,{children:[s(kc,{isHomeScreen:e,toggleMenu:i}),s(Ta,{onClick:r})]})]})})]}):s($,{children:[s("button",{class:Tn.menu_toggle,onClick:i,children:s(Pa,{})}),s(Si,{})]})},wc=({newGame:e,loadGame:t,resumeGame:n,canResume:o})=>{const[r,a]=E([]),i=V(),{atrament:c}=C(),{metadata:_}=L(["metadata"]),u=k(async()=>{const f=await c.game.getSessions();let h=!0;a([...Array(+_.sessions).keys()].map(g=>{const p=g+1,b=`session${p}`,m=!!f[`session${p}`],y=m||h;return!m&&h&&(h=!1),{id:p,name:b,hasSaves:m,canStart:y}}))},[c,_,a]),d=k(async f=>{const h=f.target.getAttribute("data-session"),g=r.filter(p=>p.name===h)[0];g&&(c.game.setSession(h),g.hasSaves?await o()?await n():await t():await e())},[c,r,e,o,n,t]),l=k(async f=>{const h=f.target.getAttribute("data-session");await c.game.removeSession(h),await u()},[c,u]);return A(()=>{(async()=>u())()},[u]),s($,{children:r.map(f=>s(Jt,{onSelect:d,onDelete:l,isDisabled:!f.canStart,isDeletable:f.hasSaves,deletePrompt:i.translate("main.delete-session"),attributes:{"data-session":f.name},children:f.hasSaves?s(O,{id:"main.continue-session",session:f.id}):f.canStart?s(O,{id:"main.newgame"}):s(O,{id:"main.emptyslot"})},f.name))})},Qt=()=>{const{resetBackground:e,gameStart:t,gameResume:n,continueStory:o}=C(),{metadata:r}=L(["metadata"]),a=k(async()=>{e(),await t(),o(),re("/game")},[e,t,o]),i=k(async()=>{e(),await n(),r.continue_maximally!==!1&&o(),re("/game")},[e,n,o,r]),c=k(async _=>{e(),await t(_),r.continue_maximally!==!1&&o(),re("/game")},[e,t,o,r]);return{newGame:a,resumeGame:i,loadGame:c}},Qo=({children:e})=>{const{loadGame:t}=Qt();return s(W,{align:"end",children:[s(it,{children:s("h2",{children:s(O,{id:"main.loadgame"})})}),s(Zo,{loadGame:t}),s($e,{}),e]})},Sc="_imagebox_1x268_1",xc="_image_1x268_1",Cc="_illustration_1x268_10",ht={imagebox:Sc,image:xc,illustration:Cc},en=({src:e,options:t={}})=>s("div",{class:w(ht.imagebox,"atrament-image-container",t.class),style:{"margin-left":t.leftmargin||"none","margin-right":t.rightmargin||"none"},children:s("img",{src:e,style:{width:t.width||"auto"},class:w(ht.image,!t.fullsize&&ht.illustration,"atrament-image")})}),er=()=>{const{getAssetPath:e}=C(),t=V(),n=L(["metadata"]),{title:o,author:r,cover:a,title_screen_layout:i}=n.metadata,[c,_]=a?`${a}`.split(" "):[],u={cover:c?s(en,{src:e(c),options:_?{width:_}:{}}):"",title:s("h1",{children:o||t.translate("default.title")}),author:s("p",{children:r||t.translate("default.author")})},l=`${i||"cover, title, author"}`.split(/\s*,\s*/);return s(it,{children:l.map(f=>u[f])})},tr=()=>s(U,{onClick:()=>re("/about"),children:s(O,{id:"main.about"})},"about"),Ec=({canBeResumed:e,canBeLoaded:t,openLoadGameMenu:n,about:o})=>{const{newGame:r,resumeGame:a}=Qt();return s($,{children:[s(er,{}),s(W,{align:"end",children:[e?s(U,{onClick:a,children:s(O,{id:"main.continue"})},"continuegame"):"",s(U,{onClick:r,children:s(O,{id:"main.newgame"})},"startgame"),t?s(U,{onClick:n,children:s(O,{id:"main.loadgame"})},"loadgame"):"",o?s(tr,{}):""]})]})},$c=()=>{const[e,t]=E(!1),{atrament:n,canResume:o}=C(),{newGame:r,resumeGame:a}=Qt(),{metadata:i}=L(["metadata"]);return s($,{children:e?s(Qo,{children:s(U,{onClick:()=>{n.game.setSession(),t(!1)},children:s(O,{id:"cancel"})},"go-back")}):s($,{children:[s(er,{}),s(W,{align:"end",children:[s(wc,{newGame:r,resumeGame:a,canResume:o,loadGame:()=>t(!0)}),i.about?s(tr,{}):""]})]})})},Oc=()=>{const[e,t]=E(!1),[n,o]=E(!1),[r,a]=E(!1),{atrament:i,canResume:c}=C(),{metadata:_}=L(["metadata"]),u=()=>t(!0),d=()=>t(!1);return A(()=>{(async()=>{const f=await c();o(!!f);const g=(await i.game.listSaves()).filter(p=>_.load_from_checkpoints&&p.type===i.game.SAVE_CHECKPOINT?!0:p.type===i.game.SAVE_GAME);a(g.length>0)})()}),s($,{children:e?s(Qo,{children:s(U,{onClick:d,children:s(O,{id:"main.menu"})},"go-back")}):s(Ec,{canBeResumed:n,canBeLoaded:r,openLoadGameMenu:u,about:_.about})})},nr=(e,t)=>{e?(document.body.style.backgroundImage=`url(${t(e)})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"):document.body.style.backgroundImage="none"},Tc=()=>{const{canResume:e,getAssetPath:t,resetBackground:n}=C(),o=L(["metadata"]),{background:r,sessions:a}=o.metadata;return A(()=>{n(),nr(r,t)},[n,e,r,t]),s(Ve,{children:s(Gt,{cssClass:"font-face-game",children:[s(Zt,{isHomeScreen:!0}),a?s($c,{}):s(Oc,{})]})})},Pc="_toolbar_1gykh_1",Ac={toolbar:Pc},Lc="_bannerblock_1ry2a_1",Mc="_accent_1ry2a_11",Ic="_allcaps_1ry2a_17",gt={bannerblock:Lc,accent:Mc,allcaps:Ic},jc=({children:e,options:t})=>{const n=w(gt.bannerblock,t.style==="accent"&&gt.accent,t.allcaps&&gt.allcaps,"atrament-tag-banner",t.class);return s("div",{class:n,children:e})},Rc={tag:"banner",component:jc},Dc=Object.freeze(Object.defineProperty({__proto__:null,default:Rc},Symbol.toStringTag,{value:"Module"})),Fc={tag:"block",component:({options:e,children:t})=>{const n={display:"inline-block",width:e.width||"100%","text-align":e.align||"inherit","vertical-align":e.valign||"top"};return s("div",{style:n,class:w("atrament-tag-block",e.class),children:t})}},Vc=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"})),Hc="_inline_button_ws4x6_1",Nc="_bordered_button_ws4x6_19",Rn={inline_button:Hc,bordered_button:Nc},zc=({children:e,options:t})=>{const n=ie(Fe),{execContentFunction:o}=rt();t.DEFAULT&&(t.onclick=t.DEFAULT);const r=k(i=>{i.stopPropagation(),o(t.onclick,t.display)},[o,t]);let a=w(t.bordered===!1?Rn.inline_button:Rn.bordered_button,"atrament-tag-button",t.class);return s("button",{class:a,onClick:r,disabled:!n||t.disabled,children:e})},Uc={tag:"button",component:zc},Bc=Object.freeze(Object.defineProperty({__proto__:null,default:Uc},Symbol.toStringTag,{value:"Module"})),Wc={tag:"css",component:({options:e,children:t})=>s("span",{class:e.class,style:e.style,children:t})},Gc=Object.freeze(Object.defineProperty({__proto__:null,default:Wc},Symbol.toStringTag,{value:"Module"})),qc={tag:"font",component:({options:e,children:t})=>{const n=e.family||e.DEFAULT;return s("span",{class:e.class,style:{"font-family":n},children:t})}},Kc=Object.freeze(Object.defineProperty({__proto__:null,default:qc},Symbol.toStringTag,{value:"Module"})),Yc={tag:"highlight",component:({options:e,children:t})=>{const n={"background-color":e.bgcolor||"var(--accent-bg-color)",color:e.color||"var(--accent-fg-color)",padding:e.bgcolor?"0.1em":"inherit","box-decoration-break":"clone"};return s("span",{style:n,class:w("atrament-tag-highlight",e.class),children:t})}},Xc=Object.freeze(Object.defineProperty({__proto__:null,default:Yc},Symbol.toStringTag,{value:"Module"})),Jc="_infoblock_1a1qp_1",Zc="_font_ui_1a1qp_9",Qc="_side_highlight_1a1qp_13",el="_side_accent_1a1qp_17",Be={infoblock:Jc,font_ui:Zc,side_highlight:Qc,side_accent:el},tl=({children:e,options:t})=>{const n=w(Be.infoblock,t.font==="system"&&Be.font_ui,t.side==="accent"&&Be.side_accent,t.side==="highlight"&&Be.side_highlight,"atrament-tag-info",t.class);return s("div",{class:n,children:e})},nl={tag:"info",component:tl},ol=Object.freeze(Object.defineProperty({__proto__:null,default:nl},Symbol.toStringTag,{value:"Module"})),rl="_inline_image_1jlev_1",sl={inline_image:rl},al=({options:e,children:t})=>{const{getAssetPath:n}=C(),o=w(sl.inline_image,"atrament-tag-img",e.class);return s("img",{class:o,src:n(t)})},il={tag:"img",tagOptions:{raw:!0},component:al},cl=Object.freeze(Object.defineProperty({__proto__:null,default:il},Symbol.toStringTag,{value:"Module"})),ll="_input_1c260_1",ul={input:ll},_l=({options:e})=>{const t=ie(Fe),[n,o]=E(null),{getInkVariable:r,setInkVariable:a}=C();A(()=>o(r(e.var)),[r,e.var]);const i=u=>{let d=u.srcElement.value||n;e.type==="number"&&(d=+d),a(e.var,d),o(d)},c=e.type==="number"?"number":"text",_=w(ul.input,"atrament-tag-input",e.class);return s("input",{disabled:!t,class:_,value:n,placeholder:e.placeholder,type:c,onInput:i})},dl={tag:"input",tagOptions:{single:!0},component:_l},fl=Object.freeze(Object.defineProperty({__proto__:null,default:dl},Symbol.toStringTag,{value:"Module"})),hl=/([\w:]+)(?:=(?:"([^"]*)"|(\S+)))?/g;function Ie(e){const t={};if(!e)return t;if(e.startsWith("="))return t.DEFAULT=e.slice(1).trim(),t;let n;for(;n=hl.exec(e);){const o=n[2]??n[3]??"true";try{t[n[1]]=JSON.parse(o)}catch{t[n[1]]=o}}return t}const gl="_imagebox_phoq5_1",pl="_background_phoq5_11",ml="_layer_wrapper_phoq5_23",pt={imagebox:gl,background:pl,layer_wrapper:ml},vl=({key:e,scale:t,item:n})=>s("img",{class:"atrament-layer",src:n.src,onClick:n.onclick,style:{position:"absolute",left:(n.attrs?.x||0)*t,top:(n.attrs?.y||0)*t,width:n.width?n.width*t:"auto",height:n.height?n.height*t:"auto",cursor:n.onclick?"pointer":"auto"}},e),bl=({key:e,scale:t,item:n})=>s("div",{class:"atrament-layer-area",onClick:n.onclick,style:{position:"absolute",left:(n.attrs.x||0)*t,top:(n.attrs.y||0)*t,width:(n.attrs.width||n.attrs.x1-n.attrs.x)*t,height:(n.attrs.height||n.attrs.y1-n.attrs.y)*t,cursor:n.onclick?"pointer":"auto"}},e),yl=({layers:e=[],areas:t=[],options:n={}})=>{const o=et(null),[r,a]=E(null),i=[...e.sort(((d,l)=>d.index-l.index))],c=i.shift(),_=[...t.sort(((d,l)=>d.index-l.index))],u=k(()=>{const d=o.current;if(!d)return;const l=d.clientWidth,f=d.clientHeight,h=Math.min(l/c.width,f/c.height),g=c.width*h,p=c.height*h,b=(l-g)/2,m=(f-p)/2;a({scale:h,renderWidth:g,renderHeight:p,offsetX:b,offsetY:m})},[c]);return A(()=>(u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)),[u]),s("div",{class:w(pt.imagebox,"atrament-layer-container",n.class),style:{"margin-left":n.leftmargin||"none","margin-right":n.rightmargin||"none"},ref:o,children:[s("img",{src:c.src,class:w(pt.background,"atrament-layer-backround"),style:{width:n.width||"auto"}}),r&&s("div",{class:pt.layer_wrapper,style:{left:r.offsetX,top:r.offsetY,width:r.renderWidth,height:r.renderHeight},children:[i.map((d,l)=>s(vl,{item:d,scale:r.scale},l)),_.map((d,l)=>s(bl,{item:d,scale:r.scale},l))]})]})};function kl(e){const t=[];for(let n of e)t.push(new Promise(o=>{const r=new Image;r.onload=o,r.onerror=o,r.src=n.src,o({...n,width:r.naturalWidth,height:r.naturalHeight})}));return Promise.allSettled(t).then(n=>n.map(o=>o.status==="fulfilled"?o.value:{}))}const wl=({options:e,children:t})=>{const[n,o]=E(null),r=ie(Fe),{makeChoice:a,continueStory:i,throwAtramentError:c,getAssetPath:_}=C(),{execContentFunction:u}=rt(),d=L(["scenes"]),l=k(v=>{const S=d.scenes.length-1,P=d.scenes[S].choices.findIndex(R=>R.choice===v);if(P<0){c(`[picture to=${v}] leads to nonexistent choice!`);return}a(P),i()},[c,i,a,d.scenes]),f=k(v=>u(v.onclick,v.display),[u]),h=v=>{let S=null;return r&&(v.onclick?S=()=>f(v):v.to&&(S=()=>l(v.to))),S},p=t.match(/\[picture.*?\].+?\[\/picture\]/ig)?.map((v,S)=>{const[,T,P]=v.match(/\[picture(.*?)\](.+?)\[\/picture\]/i);return{attrs:Ie(T),src:_(P),index:S}}),m=t.match(/\[area.+?\]/ig)?.map((v,S)=>{const[,T]=v.match(/\[area(.*?)\]/i),P=Ie(T);return{attrs:P,index:S,onclick:h(P)}}),y=n?.map(v=>(v.onclick=h(v.attrs),v));return A(()=>{(async S=>{const T=await kl(S);o(T)})(p)},[]),s($,{children:n&&s(yl,{layers:y,areas:m,options:e})})},Sl={tag:"layers",tagOptions:{raw:!0},component:wl},xl=Object.freeze(Object.defineProperty({__proto__:null,default:Sl},Symbol.toStringTag,{value:"Module"})),Cl="_inline_link_13qeg_1",El="_disabled_13qeg_10",Dn={inline_link:Cl,disabled:El},$l=({children:e,options:t})=>{const n=ie(Fe),{makeChoice:o,continueStory:r,throwAtramentError:a}=C(),{execContentFunction:i}=rt(),c=L(["scenes"]),_=t.to||t.DEFAULT,u=k(()=>{const h=c.scenes.length-1,p=c.scenes[h].choices.findIndex(b=>b.choice===_);if(p<0){a(`[link=${_}] leads to nonexistent choice!`);return}o(p),r()},[a,r,o,_,c.scenes]),d=k(()=>i(t.onclick,t.display),[i,t]),l=w(Dn.inline_link,!n&&Dn.disabled,"atrament-tag-link",t.class),f=n?t.onclick?d:u:()=>{};return s("a",{href:"#",class:l,onClick:f,children:e})},Ol={tag:"link",component:$l},Tl=Object.freeze(Object.defineProperty({__proto__:null,default:Ol},Symbol.toStringTag,{value:"Module"})),Pl=({options:e,children:t})=>{const{getAssetPath:n}=C(),o={fullsize:!0};return["leftmargin","rightmargin","width"].forEach(r=>{e[r]&&(o[r]=e[r])}),s(en,{src:n(t),options:o})},Al={tag:"picture",tagOptions:{raw:!0},component:Pl},Ll=Object.freeze(Object.defineProperty({__proto__:null,default:Al},Symbol.toStringTag,{value:"Module"})),Ml={tag:"progress",component:qt},Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"})),jl="_separator_sgffv_1",Rl={separator:jl},Dl={tag:"---",tagOptions:{single:!0},component:({options:e})=>s("hr",{class:w(Rl.separator,"atrament-tag-separator",e.class),style:{width:e.width||"60%"}})},Fl=Object.freeze(Object.defineProperty({__proto__:null,default:Dl},Symbol.toStringTag,{value:"Module"})),Vl="_hidden_1ydvn_1",Hl="_revealed_1ydvn_12",Fn={hidden:Vl,revealed:Hl},Nl=[Fn.hidden,Fn.revealed],zl=({options:e,children:t})=>{const[n,o]=E(0);return s("span",{class:w(Nl[n],"atrament-tag-spoiler",e.class),onClick:()=>o(1-n),children:s("span",{children:t})})},Ul={tag:"spoiler",component:zl},Bl=Object.freeze(Object.defineProperty({__proto__:null,default:Ul},Symbol.toStringTag,{value:"Module"})),Wl=(e,t)=>e.split(/\[ \]/).map(n=>({style:{textAlign:"left"},name:t(n)})),Gl=(e,t)=>e.match(/\[row\](.+?)\[\/row\]/i)[1].split(/\[ \]/).map(o=>t(o)),ql={tag:"table",tagOptions:{raw:!0},component:({options:e,children:t,markupRenderer:n})=>{const o=t.match(/\[header\](.+?)\[\/header\]/i),r=t.match(/\[row\].+?\[\/row\]/ig),a=o?Wl(o[1],n):[],i=r?r.map(_=>Gl(_,n)):[],c=e.columns?e.columns.split(/\s+/g):[];return s(Ee,{className:w("atrament-tag-table",e.class),columns:a,data:i,border:e.border,padding:e.padding,columnWidth:c,fixed:e.fixed})}},Kl=Object.freeze(Object.defineProperty({__proto__:null,default:ql},Symbol.toStringTag,{value:"Module"}));function Yl(e,t){for(var n in t)e[n]=t[n];return e}function Vn(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function Hn(e,t){this.props=e,this.context=t}(Hn.prototype=new X).isPureReactComponent=!0,Hn.prototype.shouldComponentUpdate=function(e,t){return Vn(this.props,e)||Vn(this.state,t)};var Nn=x.__b;x.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Nn&&Nn(e)};var Xl=x.__e;x.__e=function(e,t,n,o){if(e.then){for(var r,a=t;a=a.__;)if((r=a.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}Xl(e,t,n,o)};var zn=x.unmount;function or(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=Yl({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return or(o,t,n)})),e}function rr(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return rr(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function mt(){this.__u=0,this.o=null,this.__b=null}function sr(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function We(){this.i=null,this.l=null}x.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),zn&&zn(e)},(mt.prototype=new X).__c=function(e,t){var n=t.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=sr(o.__v),a=!1,i=function(){a||(a=!0,n.__R=null,r?r(c):c())};n.__R=i;var c=function(){if(!--o.__u){if(o.state.__a){var _=o.state.__a;o.__v.__k[0]=rr(_,_.__c.__P,_.__c.__O)}var u;for(o.setState({__a:o.__b=null});u=o.o.pop();)u.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(i,i)},mt.prototype.componentWillUnmount=function(){this.o=[]},mt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=or(this.__b,n,o.__O=o.__P)}this.__b=null}var r=t.__a&&ee($,null,e.fallback);return r&&(r.__u&=-33),[ee($,null,t.__a?null:e.children),r]};var Un=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function Jl(e){return this.getChildContext=function(){return e.context},e.children}function Zl(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){$t(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var o=t.__v;o!==null&&!o.__m&&o.__!==null;)o=o.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:o.__m},contains:function(){return!0},insertBefore:function(r,a){this.childNodes.push(r),t.h.insertBefore(r,a)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.h.removeChild(r)}}}$t(ee(Jl,{context:t.context},e.__v),t.v)}function Ql(e,t){var n=ee(Zl,{__v:e,h:t});return n.containerInfo=t,n}(We.prototype=new X).__a=function(e){var t=this,n=sr(t.__v),o=t.l.get(e);return o[0]++,function(r){var a=function(){t.props.revealOrder?(o.push(r),Un(t,e,o)):r()};n?n(a):a()}},We.prototype.render=function(e){this.i=null,this.l=new Map;var t=we(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},We.prototype.componentDidUpdate=We.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Un(e,n,t)})};var eu=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,tu=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nu=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ou=/[A-Z0-9]/g,ru=typeof document<"u",su=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};X.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(X.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Bn=x.event;function au(){}function iu(){return this.cancelBubble}function cu(){return this.defaultPrevented}x.event=function(e){return Bn&&(e=Bn(e)),e.persist=au,e.isPropagationStopped=iu,e.isDefaultPrevented=cu,e.nativeEvent=e};var lu={enumerable:!1,configurable:!0,get:function(){return this.class}},Wn=x.vnode;x.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,o=t.type,r={},a=o.indexOf("-")===-1;for(var i in n){var c=n[i];if(!(i==="value"&&"defaultValue"in n&&c==null||ru&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var _=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&c===!0?c="":_==="translate"&&c==="no"?c=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?i="ondblclick":_!=="onchange"||o!=="input"&&o!=="textarea"||su(n.type)?_==="onfocus"?i="onfocusin":_==="onblur"?i="onfocusout":nu.test(i)&&(i=_):_=i="oninput":a&&tu.test(i)?i=i.replace(ou,"-$&").toLowerCase():c===null&&(c=void 0),_==="oninput"&&r[i=_]&&(i="oninputCapture"),r[i]=c}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=we(n.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=we(n.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",lu)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),t.props=r})(e),e.$$typeof=eu,Wn&&Wn(e)};var Gn=x.__r;x.__r=function(e){Gn&&Gn(e),e.__c};var qn=x.diffed;x.diffed=function(e){qn&&qn(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};const uu=Object.assign({}),It={};Object.entries(uu).forEach(([e,t])=>{const n=e.replace("../resources/templates/","");It[n]=t});var _u=Object.prototype.toString,Oe=Array.isArray||function(t){return _u.call(t)==="[object Array]"};function tn(e){return typeof e=="function"}function du(e){return Oe(e)?"array":typeof e}function vt(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Kn(e,t){return e!=null&&typeof e=="object"&&t in e}function fu(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var hu=RegExp.prototype.test;function gu(e,t){return hu.call(e,t)}var pu=/\S/;function mu(e){return!gu(pu,e)}var vu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function bu(e){return String(e).replace(/[&<>"'`=\/]/g,function(n){return vu[n]})}var yu=/\s*/,ku=/\s+/,Yn=/\s*=/,wu=/\s*\}/,Su=/#|\^|\/|>|\{|&|=|!/;function xu(e,t){if(!e)return[];var n=!1,o=[],r=[],a=[],i=!1,c=!1,_="",u=0;function d(){if(i&&!c)for(;a.length;)delete r[a.pop()];else a=[];i=!1,c=!1}var l,f,h;function g(D){if(typeof D=="string"&&(D=D.split(ku,2)),!Oe(D)||D.length!==2)throw new Error("Invalid tags: "+D);l=new RegExp(vt(D[0])+"\\s*"),f=new RegExp("\\s*"+vt(D[1])),h=new RegExp("\\s*"+vt("}"+D[1]))}g(t||G.tags);for(var p=new He(e),b,m,y,v,S,T;!p.eos();){if(b=p.pos,y=p.scanUntil(l),y)for(var P=0,R=y.length;P<R;++P)v=y.charAt(P),mu(v)?(a.push(r.length),_+=v):(c=!0,n=!0,_+=" "),r.push(["text",v,b,b+1]),b+=1,v===`
`&&(d(),_="",u=0,n=!1);if(!p.scan(l))break;if(i=!0,m=p.scan(Su)||"name",p.scan(yu),m==="="?(y=p.scanUntil(Yn),p.scan(Yn),p.scanUntil(f)):m==="{"?(y=p.scanUntil(h),p.scan(wu),p.scanUntil(f),m="&"):y=p.scanUntil(f),!p.scan(f))throw new Error("Unclosed tag at "+p.pos);if(m==">"?S=[m,y,b,p.pos,_,u,n]:S=[m,y,b,p.pos],u++,r.push(S),m==="#"||m==="^")o.push(S);else if(m==="/"){if(T=o.pop(),!T)throw new Error('Unopened section "'+y+'" at '+b);if(T[1]!==y)throw new Error('Unclosed section "'+T[1]+'" at '+b)}else m==="name"||m==="{"||m==="&"?c=!0:m==="="&&g(y)}if(d(),T=o.pop(),T)throw new Error('Unclosed section "'+T[1]+'" at '+p.pos);return Eu(Cu(r))}function Cu(e){for(var t=[],n,o,r=0,a=e.length;r<a;++r)n=e[r],n&&(n[0]==="text"&&o&&o[0]==="text"?(o[1]+=n[1],o[3]=n[3]):(t.push(n),o=n));return t}function Eu(e){for(var t=[],n=t,o=[],r,a,i=0,c=e.length;i<c;++i)switch(r=e[i],r[0]){case"#":case"^":n.push(r),o.push(r),n=r[4]=[];break;case"/":a=o.pop(),a[5]=r[2],n=o.length>0?o[o.length-1][4]:t;break;default:n.push(r)}return t}function He(e){this.string=e,this.tail=e,this.pos=0}He.prototype.eos=function(){return this.tail===""};He.prototype.scan=function(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var o=n[0];return this.tail=this.tail.substring(o.length),this.pos+=o.length,o};He.prototype.scanUntil=function(t){var n=this.tail.search(t),o;switch(n){case-1:o=this.tail,this.tail="";break;case 0:o="";break;default:o=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=o.length,o};function xe(e,t){this.view=e,this.cache={".":this.view},this.parent=t}xe.prototype.push=function(t){return new xe(t,this)};xe.prototype.lookup=function(t){var n=this.cache,o;if(n.hasOwnProperty(t))o=n[t];else{for(var r=this,a,i,c,_=!1;r;){if(t.indexOf(".")>0)for(a=r.view,i=t.split("."),c=0;a!=null&&c<i.length;)c===i.length-1&&(_=Kn(a,i[c])||fu(a,i[c])),a=a[i[c++]];else a=r.view[t],_=Kn(r.view,t);if(_){o=a;break}r=r.parent}n[t]=o}return tn(o)&&(o=o.call(this.view)),o};function H(){this.templateCache={_cache:{},set:function(t,n){this._cache[t]=n},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}H.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};H.prototype.parse=function(t,n){var o=this.templateCache,r=t+":"+(n||G.tags).join(":"),a=typeof o<"u",i=a?o.get(r):void 0;return i==null&&(i=xu(t,n),a&&o.set(r,i)),i};H.prototype.render=function(t,n,o,r){var a=this.getConfigTags(r),i=this.parse(t,a),c=n instanceof xe?n:new xe(n,void 0);return this.renderTokens(i,c,o,t,r)};H.prototype.renderTokens=function(t,n,o,r,a){for(var i="",c,_,u,d=0,l=t.length;d<l;++d)u=void 0,c=t[d],_=c[0],_==="#"?u=this.renderSection(c,n,o,r,a):_==="^"?u=this.renderInverted(c,n,o,r,a):_===">"?u=this.renderPartial(c,n,o,a):_==="&"?u=this.unescapedValue(c,n):_==="name"?u=this.escapedValue(c,n,a):_==="text"&&(u=this.rawValue(c)),u!==void 0&&(i+=u);return i};H.prototype.renderSection=function(t,n,o,r,a){var i=this,c="",_=n.lookup(t[1]);function u(f){return i.render(f,n,o,a)}if(_){if(Oe(_))for(var d=0,l=_.length;d<l;++d)c+=this.renderTokens(t[4],n.push(_[d]),o,r,a);else if(typeof _=="object"||typeof _=="string"||typeof _=="number")c+=this.renderTokens(t[4],n.push(_),o,r,a);else if(tn(_)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");_=_.call(n.view,r.slice(t[3],t[5]),u),_!=null&&(c+=_)}else c+=this.renderTokens(t[4],n,o,r,a);return c}};H.prototype.renderInverted=function(t,n,o,r,a){var i=n.lookup(t[1]);if(!i||Oe(i)&&i.length===0)return this.renderTokens(t[4],n,o,r,a)};H.prototype.indentPartial=function(t,n,o){for(var r=n.replace(/[^ \t]/g,""),a=t.split(`
`),i=0;i<a.length;i++)a[i].length&&(i>0||!o)&&(a[i]=r+a[i]);return a.join(`
`)};H.prototype.renderPartial=function(t,n,o,r){if(o){var a=this.getConfigTags(r),i=tn(o)?o(t[1]):o[t[1]];if(i!=null){var c=t[6],_=t[5],u=t[4],d=i;_==0&&u&&(d=this.indentPartial(i,u,c));var l=this.parse(d,a);return this.renderTokens(l,n,o,d,r)}}};H.prototype.unescapedValue=function(t,n){var o=n.lookup(t[1]);if(o!=null)return o};H.prototype.escapedValue=function(t,n,o){var r=this.getConfigEscape(o)||G.escape,a=n.lookup(t[1]);if(a!=null)return typeof a=="number"&&r===G.escape?String(a):r(a)};H.prototype.rawValue=function(t){return t[1]};H.prototype.getConfigTags=function(t){return Oe(t)?t:t&&typeof t=="object"?t.tags:void 0};H.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!Oe(t))return t.escape};var G={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){je.templateCache=e},get templateCache(){return je.templateCache}},je=new H;G.clearCache=function(){return je.clearCache()};G.parse=function(t,n){return je.parse(t,n)};G.render=function(t,n,o,r){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+du(t)+'" was given as the first argument for mustache#render(template, view, partials)');return je.render(t,n,o,r)};G.escape=bu;G.Scanner=He;G.Context=xe;G.Writer=H;const $u=({options:e,children:t})=>{const{throwAtramentError:n,getAssetPath:o}=C(),r=et(null),[a,i]=E(null);A(()=>{if(!r.current)return;const u=r.current.querySelector('[data-mount="content"]');i(u)},[]);let c={};if(Object.entries(e).forEach(([u,d])=>{const l=u.match(/var:(.+)/);l&&(c[l[1]]=`${d}`.startsWith("GAME_ASSET:")?o(d.replace("GAME_ASSET:","")):d)}),!It[e.src]){n(`Template not found: ${e.src}`);return}let _;try{_=G.render(It[e.src],c)}catch(u){n(`Template: ${e.src}. ${u}`),console.error(u);return}return s($,{children:[e.wrapper==="span"?s("span",{ref:r,class:e.class,dangerouslySetInnerHTML:{__html:_}}):s("div",{ref:r,class:e.class,dangerouslySetInnerHTML:{__html:_}}),a&&Ql(t,a)]})},Ou={tag:"template",component:$u},Tu=Object.freeze(Object.defineProperty({__proto__:null,default:Ou},Symbol.toStringTag,{value:"Module"})),Pu={tag:"url",component:({options:e,children:t})=>{const n=e.href||e.DEFAULT;return s("a",{href:n,class:w("atrament-tag-url",e.class),target:"_blank",rel:"noreferrer",children:t})}},Au=Object.freeze(Object.defineProperty({__proto__:null,default:Pu},Symbol.toStringTag,{value:"Module"})),Lu=({options:e,children:t})=>{const{getAssetPath:n}=C(),o=L(["settings"]),r=et(null),{volume:a,mute:i}=o.settings;return A(()=>{r.current.volume=a/100},[r,a]),A(()=>{r.current.muted=i},[r,i]),s("video",{class:w("atrament-tag-video",e.class),ref:r,style:{"pointer-events":"none"},width:"100%",autoplay:!0,disablePictureInPicture:!0,loop:!0,...e,children:s("source",{src:n(t)})})},Mu={tag:"video",tagOptions:{raw:!0},component:Lu},Iu=Object.freeze(Object.defineProperty({__proto__:null,default:Mu},Symbol.toStringTag,{value:"Module"})),ju=Object.assign({"./banner/index.jsx":Dc,"./block/index.jsx":Vc,"./button/index.jsx":Bc,"./css/index.jsx":Gc,"./font/index.jsx":Kc,"./highlight/index.jsx":Xc,"./info/index.jsx":ol,"./inline-image/index.jsx":cl,"./input/index.jsx":fl,"./layers/index.jsx":xl,"./link/index.jsx":Tl,"./picture/index.jsx":Ll,"./progress/index.jsx":Il,"./separator/index.jsx":Fl,"./spoiler/index.jsx":Bl,"./table/index.jsx":Kl,"./template/index.jsx":Tu,"./url/index.jsx":Au,"./video/index.jsx":Iu}),Ke=Object.values(ju).reduce((e,{default:t})=>(e[t.tag]=t,e),{}),Ru=e=>/<\/?[a-z][\s\S]*>/i.test(e),Du=({index:e,item:t})=>s("span",{dangerouslySetInnerHTML:{__html:t}},e),Q=/\[(\/?)([-\w]+)([^\]]*)\]/g;function Fu(e){const t={children:[]},n=[t];if(!e)return t;let o=0;for(Q.lastIndex=0;;){const r=Q.exec(e),a=n[n.length-1];if(!r)break;const[,i,c,_]=r,u=r.index;u>o&&a.children.push({type:"text",value:e.slice(o,u)});const d=Ke[c],l=d?.tagOptions?.raw,f=d?.tagOptions?.single;if(!d&&!i){const h=new RegExp(`\\[\\/${c}\\]`,"gi");h.lastIndex=Q.lastIndex;const g=h.exec(e),p=g?g.index+g[0].length:e.length;a.children.push({type:"text",value:e.slice(u,p)}),o=p,Q.lastIndex=p;continue}if(i)a.name===c&&n.pop();else{const h={type:"tag",name:c,options:Ie(_.trim()),children:[],raw:l,key:Math.random()};if(a.children.push(h),f){o=Q.lastIndex;continue}if(l){const g=new RegExp(`\\[\\/${c}\\]`,"gi");g.lastIndex=Q.lastIndex;const p=g.exec(e),b=p?p.index:e.length;h.children.push({type:"text",value:e.slice(Q.lastIndex,b)}),o=p?p.index+p[0].length:e.length,Q.lastIndex=o;continue}n.push(h)}o=Q.lastIndex}return o<e.length&&n[n.length-1].children.push({type:"text",value:e.slice(o)}),t}function jt(e){if(e.type==="text")return Ru(e.value)?Du({index:Math.random(),item:e.value}):e.value;if(Ke[e.name]?.replacer)return(Ke[e.name]?.replacer??((o,r)=>s($,{children:r})))(e.options,e.raw?e.children[0]?.value:e.children.map(jt),o=>o);const t=Ke[e.name]?.component??$;return s(t,{options:e.options,markupRenderer:ar,children:e.raw?e.children[0]?.value:e.children.map(jt)},e.key)}function ar(e){const t=Fu(e);return jt(t)}const Ne=({children:e,isActive:t=!0})=>{const n=Ht(()=>ar(e),[e]);return s(Fe.Provider,{value:t,children:n})};function Vu(){const e=V(),t=L([ve]);return t[ve]!==$o?t[ve]:e.translate("default.title")}const Hu=()=>{const e=Vu();return s("div",{class:w(Ac.toolbar,"atrament-toolbar"),children:s(Ne,{children:e})})},Nu="_container_text_1o127_1",zu={container_text:Nu},ct=({children:e})=>s("div",{class:w(zu.container_text,"atrament-text-container"),children:e}),Uu="_container_scenes_13lih_1",Bu={container_scenes:Uu},Wu=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",Gu=({children:e,align:t})=>s("div",{class:w(Bu.container_scenes,"atrament-container-scene"),style:{"justify-content":Wu(t)},children:e}),qu="_container_choices_41rpm_1",Ku={container_choices:qu},Yu=({children:e,key:t,isReady:n})=>s("div",{class:w(Ku.container_choices,"atrament-container-choices",n&&"animation_appear"),children:s("div",{style:{opacity:n?1:0},children:s(W,{children:e})})},t),Xu="_scene_1or5e_1",Ju={scene:Xu},ir=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function Zu(e,t){this.scrollLeft=e,this.scrollTop=t}const cr=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,lr=(e,t,n)=>cr(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),Xn=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},Qu=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},nn=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function e_(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const t_=e=>.5*(1-Math.cos(Math.PI*e));function on(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),on=t,t()}const n_=500,ur=e=>{const n=(on()-e.timeStamp)/(e.duration||n_);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||t_)(n),r=e.startX+(e.targetX-e.startX)*o,a=e.startY+(e.targetY-e.startY)*o;e.method(r,a),e.rafId=window.requestAnimationFrame(()=>{ur(e)})},Je=e=>isFinite(e)?Number(e):0,o_=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},r_=(e,t,n)=>{var o,r;if(!o_(e))return;const a=e.scrollLeft,i=e.scrollTop,c=Je((o=t.left)!==null&&o!==void 0?o:a),_=Je((r=t.top)!==null&&r!==void 0?r:i);if(c===a&&_===i)return;const u=Xn(HTMLElement.prototype,"scroll",Zu),d=Xn(Object.getPrototypeOf(e),"scroll",u).bind(e);if(t.behavior!=="smooth"){d(c,_);return}const l=()=>{window.removeEventListener("wheel",g),window.removeEventListener("touchmove",g)},f=()=>{l();const p=e.nodeType===9;e.dispatchEvent(e_(p))},h=Object.assign(Object.assign({},n),{timeStamp:on(),startX:a,startY:i,targetX:c,targetY:_,rafId:0,method:d,callback:f}),g=()=>{window.cancelAnimationFrame(h.rafId),l()};window.addEventListener("wheel",g,{passive:!0,once:!0}),window.addEventListener("touchmove",g,{passive:!0,once:!0}),ur(h)},s_=e=>e.window===e,a_=e=>(t,n,o)=>{const[r,a]=s_(t)?[nn(t.document.documentElement),"Window"]:[t,"Element"],i=n??{};if(!Qu(i))throw new TypeError(cr(e,a));if(!ir(i.behavior))throw new TypeError(lr(e,a,i.behavior));e==="scrollBy"&&(i.left=Je(i.left)+r.scrollLeft,i.top=Je(i.top)+r.scrollTop),r_(r,i,o)},i_=a_("scroll"),c_=i_,_r=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},dr=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},l_=e=>(dr(_r(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,u_=(e,t,n)=>{const[o,r,a]=dr(t,n,e.block||"start",e.inline||"nearest");return[r,a].map((i,c)=>{switch(i){case"center":return 1;case"nearest":return 0;default:{const _=o>>c&1;return i==="start"==!_?2:3}}})},Jn=(e,t,n,o,r,a,i)=>e!==0?e:r<t&&a>n||r>t&&a<n?null:r<=t&&i<=o||a>=n&&i>=o?2:a>n&&i<o||r<t&&i>o?3:null,Zn=e=>e!=="visible"&&e!=="clip",__=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},d_=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?Zn(t.overflowY)||Zn(t.overflowX)||e===nn(e):!1,Qn=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return __(e)}return n},bt=(e,t,n)=>e<t?t:e>n?n:e,f_=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],h_=(e,t,n)=>{const{top:o,right:r,bottom:a,left:i}=t,c=f_(e.ownerDocument);if(!c)return[o,r,a,i];const _=u=>{const d=n.getPropertyValue(`${c}-${u}`);return parseInt(d,10)||0};return[o-_("top"),r+_("right"),a+_("bottom"),i-_("left")]},Ge=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},g_=(e,t)=>{var n,o,r;const a=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[i,c,_,u]=e===nn(e)?[0,0,(o=a?.width)!==null&&o!==void 0?o:e.clientWidth,(r=a?.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],d=i+e.clientLeft,l=c+e.clientTop,f=d+_,h=l+u;return[l,f,h,d]},p_=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const a=window.getComputedStyle(e),i=a.direction!=="rtl",c=_r(a.writingMode||a.getPropertyValue("-webkit-writing-mode")||a.getPropertyValue("-ms-writing-mode")),[_,u]=u_(t,c,i);let[d,l,f,h]=h_(e,e.getBoundingClientRect(),a);for(let g=Qn(e);g!==null;g=Qn(g)){if(o!==g.ownerDocument){if(o=g.ownerDocument,r=o.defaultView,!r)break;const{left:N,top:Z}=g.getBoundingClientRect();d+=Z,l+=N,f+=Z,h+=N}const p=r.getComputedStyle(g);if(p.position==="fixed")break;if(!d_(g,p))continue;const b=g.getBoundingClientRect(),[m,y,v,S]=g_(g,b),T=Jn(_,S,y,g.clientWidth,h,l,l-h),P=Jn(u,m,v,g.clientHeight,d,f,f-d),R=T===null?0:Ge(T,h,l)-Ge(T,S,y),D=P===null?0:Ge(P,d,f)-Ge(P,m,v),J=l_(p)?bt(R,-g.scrollWidth+g.clientWidth-g.scrollLeft,-g.scrollLeft):bt(R,-g.scrollLeft,g.scrollWidth-g.clientWidth-g.scrollLeft),ce=bt(D,-g.scrollTop,g.scrollHeight-g.clientHeight-g.scrollTop);n.push([g,{left:g.scrollLeft+J,top:g.scrollTop+ce,behavior:t.behavior}]),d=Math.max(d-ce,m),l=Math.min(l-J,y),f=Math.min(f-ce,v),h=Math.max(h-J,S)}return n},m_=(e,t,n)=>{const o=t||{};if(!ir(o.behavior))throw new TypeError(lr("scrollIntoView","Element",o.behavior));p_(e,o).forEach(([a,i])=>{c_(a,i,n)})},v_="_paragraph_p4rto_1",b_="_inactive_p4rto_19",eo={paragraph:v_,inactive:b_},rn=({children:e,active:t=!0,class_override:n=""})=>s("div",{class:w(eo.paragraph,!t&&eo.inactive,"atrament-paragraph",n),children:e}),y_=({content:e,isCurrent:t})=>e.text===`
`?s($,{}):s(rn,{active:t,class_override:e.tags.CLASS,children:s(Ne,{isActive:t,children:e.text})});function fr(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{const a=new Image;a.onload=r,a.onerror=r,a.src=e(o)}));return Promise.allSettled(n)}const k_="_loader_tepn4_1",w_={loader:k_},hr=({delay:e=Hr})=>{const[t,n]=E(!1);return A(()=>{const o=setTimeout(()=>n(!0),e);return()=>clearTimeout(o)},[e]),s("div",{class:w_.loader,style:{opacity:t?1:0}})},S_=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:r}=C(),[a,i]=E(!1),c=et(null),_=k(u=>{o(!0),setTimeout(()=>{m_(c.current,{behavior:u,block:"start"},{duration:Br})},Ur)},[o]);return A(()=>{a&&t&&_(n?"instant":"smooth")},[a,t,n,_]),A(()=>{(async()=>(await fr(r,e.images),i(!0)))()},[e,i,r]),s("div",{class:w(Ju.scene,"atrament-scene",t&&a&&"animation_appear"),ref:c,children:a?e.content.map((u,d)=>s($,{children:[u.images.map((l,f)=>s(en,{src:r(l)},`${f}-${l}`)),s(y_,{isCurrent:t,content:u})]},`paragraph-${e.uuid}-${d}`)):s(hr,{})})},x_="_choice_button_g3zjd_1",C_="_choice_active_g3zjd_25",E_="_choice_inactive_g3zjd_49",$_="_buttons_separate_g3zjd_71",O_="_buttons_grouped_g3zjd_78",T_="_buttons_grouped_row_g3zjd_101",P_="_left_aligned_g3zjd_123",A_="_right_aligned_g3zjd_127",te={choice_button:x_,choice_active:C_,choice_inactive:E_,buttons_separate:$_,buttons_grouped:O_,buttons_grouped_row:T_,left_aligned:P_,right_aligned:A_},L_=({choice:e,chosen:t,index:n,handleClick:o,choiceAppearance:r})=>{const a=t!==null,i=t===e.id,c=()=>{a||o(e.id)},_=a?i?te.choice_active:te.choice_inactive:"",u=r.grouped?r.row?te.buttons_grouped_row:te.buttons_grouped:te.buttons_separate,d=r.left?te.left_aligned:r.right?te.right_aligned:"",l=w(te.choice_button,u,d,_,"atrament-choice",e.tags.CLASS);return s("button",{class:l,onClick:c,disabled:e.disabled,children:[r.numbered?s($,{children:[n+1,". "]}):"",s(Ne,{children:e.choice})]})},M_=({options:e,choices:t,selectChoice:n})=>{const{throwAtramentError:o}=C(),r=Ie(`${e} `),a=(r.delay||0)*1e3,i=a/100,[c,_]=E(a),u=k(()=>{let d;if(r.choice?d=t.filter(l=>l.choice===r.choice):d=[t[Math.floor(Math.random()*t.length)]],!Array.isArray(d)||!d[0]){o(`Choice not found: ${JSON.stringify(r.choice)}`);return}n(d[0].id)},[t,n,r,o]);return A(()=>{const d=setInterval(()=>{_(l=>(l-i<=0&&(clearInterval(d),u()),l-i))},i);return()=>clearInterval(d)},[]),s(qt,{options:{display:"thin",border:!1,min:0,max:a,value:c}})},I_="_choice_prompt_1t7pu_1",j_="_choice_row_1t7pu_13",R_="_choice_row_ungrouped_1t7pu_19",yt={choice_prompt:I_,choice_row:j_,choice_row_ungrouped:R_},D_=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=C(),{metadata:a}=L(["metadata"]),[i,c]=E(null),_=t.choices?.filter(b=>!b.tags?.HIDDEN),u=Array.isArray(_)?_.length:-1,d=u>1?zr:Nr,l=k(b=>{c(b),setTimeout(()=>{c(null),n(!1),o(b),r()},d)},[o,r,n,d]),f=k(b=>{if(i!==null)return;const m=+b.key;b.target.tagName.toLowerCase()!=="input"&&u>0&&m>0&&m<=u&&!_[m-1].disabled&&l(_[m-1].id)},[u,l,_,i]);st(f);const h=t.tags?.CHOICES||a.choices,g={grouped:!!h?.includes("grouped"),left:!!h?.includes("left"),right:!!h?.includes("right"),numbered:!!h?.includes("numbered"),row:!!h?.includes("row")},p=w(g.row&&yt.choice_row,g.row&&!g.grouped&&yt.choice_row_ungrouped,"atrament-choices");return s($,{children:[t.tags?.PROMPT&&s("div",{class:w(yt.choice_prompt,"atrament-prompt"),children:t.tags.PROMPT}),t.tags?.AUTO_CHOICE&&s(M_,{options:t.tags.AUTO_CHOICE,choices:t.choices,selectChoice:l}),s("div",{class:p,children:_.map((b,m)=>s(L_,{index:m,choice:b,chosen:i,handleClick:l,choiceAppearance:g},`${e}-${m}`))})]})},F_="_container_1pyc1_10",V_="_circle_1pyc1_18",H_="_circle_empty_1pyc1_53",kt={container:F_,circle:V_,circle_empty:H_},to=()=>document.getElementsByClassName("atrament-container-scene")[0],no=()=>document.getElementsByClassName("atrament-container-choices")[0],oo=({setReady:e,withChoice:t=!1,delay:n=0,animation:o=0,clickable:r=0})=>{const{makeChoice:a,continueStory:i}=C(),[c,_]=E(!1),u=V(),d=k(()=>{setTimeout(()=>{e(!1),t&&a(0),i()},0)},[a,i,e,t]),l=k(g=>{(g.key===" "||g.key==="Enter")&&d()},[d]),f=k(()=>(document.addEventListener("keydown",l,!1),to().addEventListener("click",d,!1),no().addEventListener("click",d,!1),0),[d,l]),h=k(()=>(document.removeEventListener("keydown",l,!1),to().removeEventListener("click",d,!1),no().removeEventListener("click",d,!1),0),[d,l]);return A(()=>{const g=setTimeout(f,r*1e3),p=setTimeout(()=>_(!0),o*1e3),b=n?setTimeout(d,n*1e3):void 0;return()=>{clearTimeout(p),clearTimeout(g),clearTimeout(b),h()}},[f,h,d,_,r,n,o]),s("div",{class:kt.container,children:c?s("div",{class:w(kt.circle,n&&kt.circle_empty),title:u.translate("game.click-to-continue")}):""})};function N_(e){const t={delay:0,animation:0,clickable:0};if(e.startsWith("(")){const n=Ie(e.replace(/[()]/g,""));Object.entries(n).forEach(([o,r])=>t[o]=r),t.continue&&(t.delay=t.continue)}else e?t.delay=e:t.animation=3;return t}const z_=()=>{const{atrament:e}=C();return s(Xt,{onClick:async()=>{await e.game.removeSave(),re("/")},children:s(O,{id:"game.end"})})},U_=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t?.choices?t.choices.length:-1;if(r===1){const a=t.choices[0].choice.match(/^(|>>>(\d*|\(.+?\)))$/);if(a){const i=N_(a[2]);return s(oo,{setReady:n,withChoice:!0,delay:i.delay,animation:i.animation,clickable:i.clickable})}}else if(r===0)return t.canContinue?s(oo,{setReady:n,animation:3}):s(z_,{});return o||!t?s($,{}):s(D_,{currentScene:t,setReady:n},e)},B_=()=>{const e=L(["scenes","metadata"]),[t,n]=E(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext||!!e.scenes[o]?.tags.HYPERTEXT,a=`choices-${e.scenes[o]?.uuid}`;return s(ct,{children:[s(Gu,{align:e.metadata.scenes_align,children:e.scenes.map((i,c)=>s(S_,{scene:i,isCurrent:c===o,isSingle:o===0,readyHandler:n},i.uuid))}),s(Yu,{isReady:t,children:s(U_,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},a)},a)]})},W_="_overlay_container_sa56c_1",G_="_overlay_header_sa56c_11",q_="_overlay_title_sa56c_25",K_="_overlay_content_sa56c_34",Y_="_button_back_sa56c_49",de={overlay_container:W_,overlay_header:G_,overlay_title:q_,overlay_content:K_,button_back:Y_};function X_({children:e,title:t,closeOverlay:n}){return s("div",{class:de.overlay_container,children:[s("div",{class:de.overlay_header,children:[s("button",{class:de.button_back,onClick:n,children:s(Ma,{})}),t&&s("div",{class:de.overlay_title,children:t})]}),s("div",{class:w(de.overlay_content,"atrament-overlay"),children:s(ct,{children:s(W,{children:e})})})]})}function J_({children:e,title:t,closeOverlay:n}){return s(Ut,{children:[s(Bt,{onClick:n}),s(Wt,{children:s(ct,{children:[s(W,{children:s("div",{class:de.overlay_header,children:[s("div",{class:de.overlay_title,children:t}),s(ot,{onClick:n})]})}),s(W,{children:e})]})})]})}function Z_(){const{getAssetPath:e}=C(),{overlay:t,closeOverlay:n}=rt(),[o,r]=E(!1),a=async()=>{await fr(e,Ro(t.content)),r(!0)};return A(()=>{t.current&&a()}),[o,t,n]}const Q_=(e,t)=>s(rn,{children:s(Ne,{children:e})},t),ed=()=>{const[e,t,n]=Z_();if(!t.current)return s($,{});const o=e?t.content.map(Q_):s(hr,{}),r=t.display==="modal"?J_:X_;return s(r,{title:t.title,closeOverlay:n,children:o})};function td(){const{atrament:e}=C(),t=L([Ae]),n=k(()=>e.state.setKey(Ae,null),[e]);return[t[Ae],n]}const gr=()=>{const[e,t]=td(),n=k(o=>{o.key==="Escape"&&t()},[t]);if(st(n),e)return s(Wo,{close:t,message:e})},nd=()=>{const{getAssetPath:e}=C(),t=L(["game"]);let n;t.game.background&&(n={"background-image":`url(${e(t.game.background)})`,"background-size":"cover","background-position":"center"});const o=t.game.background_page;return A(()=>{nr(o,e)},[o,e]),s(Ve,{style:n,children:[s(Zt,{}),s(gr,{}),s(Hu,{}),s(ed,{}),s(B_,{})]})};function od(){const{evaluateInkFunction:e}=C(),{metadata:t}=L(["metadata"]),[n,o]=E(" ");return A(()=>{const r=e(t.about);o(r.output||" ")},[t.about,o,e]),n.split(`
`)}const rd=()=>re("/"),sd=()=>{const e=od();return s(Ve,{children:[s(Zt,{isHomeScreen:!0}),s(gr,{}),s(ct,{children:[s(Gt,{children:[s(W,{children:" "}),s(W,{children:e.map(t=>s(rn,{children:s(Ne,{children:t})},t))})]}),s(W,{children:s(U,{onClick:rd,children:s(O,{id:"main.menu"})},"mainmenu")})]})]})};function ad(){const{atrament:e}=C(),t=k(n=>{n.url==="/"&&n.previous&&e.game.clear()},[e.game]);return s(Ko,{history:ka(),onChange:t,children:[s(Tc,{path:"/"}),s(nd,{path:"/game"}),s(sd,{path:"/about"})]})}let wt;function pr(){window.innerHeight!==wt&&(wt=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${wt-1}px`))}window.addEventListener("resize",pr);function id(){const[e,t]=E(null),[n,o]=E(null),[r,a]=E(0);return A(pr,[]),A(()=>{(async()=>{const{default:c}=await pe(async()=>{const{default:u}=await import("./atrament-7Pq6nBRK.js").then(d=>d.i);return{default:u}},[],import.meta.url),{Story:_}=await pe(async()=>{const{Story:u}=await import("./inkjs-BOXbcKQS.js");return{Story:u}},[],import.meta.url);c.interfaces.loader.onProgress(({percent:u})=>a(u));try{await gs(c,_),t(c)}catch(u){console.error(u),o(u.message)}})()},[]),s(jr,{language:Dr,locales:Ss,children:s(zt.Provider,{value:e,children:s(Es,{children:e?s(ad,{}):n?s(Ve,{children:s(Wo,{message:n})}):s(ua,{loadedPercent:r})})})})}async function ro(){const t=window.screenX<-1e4||window.screenX>window.screen.availWidth+1e4,n=window.screenY<-1e4||window.screenY>window.screen.availHeight+1e4;(t||n)&&(console.warn("fixing unmaximize bug",window.screenX,window.screenY),await window.Neutralino.window.center())}window.Neutralino&&(addEventListener("resize",ro),addEventListener("DOMContentLoaded",ro));$t(s(id,{}),document.getElementById("app"));export{pe as _};
