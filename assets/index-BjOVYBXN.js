const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Bwe_Wxdd.js","./atrament-xkDB97FC.js","./index-Bez2wlPl.js","./index-C-kmLYZ6.js","./index-DmtAIBck.js"])))=>i.map(i=>d[i]);
import{l as Lo}from"./atrament-xkDB97FC.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var Te,O,wn,oe,Ft,Sn,xn,Cn,vt,at,it,$n,$e={},En=[],Po=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ae=Array.isArray;function W(e,t){for(var n in t)e[n]=t[n];return e}function bt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ee(e,t,n){var o,r,a,i={};for(a in t)a=="key"?o=t[a]:a=="ref"?r=t[a]:i[a]=t[a];if(arguments.length>2&&(i.children=arguments.length>3?Te.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)i[a]===void 0&&(i[a]=e.defaultProps[a]);return xe(e,i,o,r,null)}function xe(e,t,n,o,r){var a={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++wn,__i:-1,__u:0};return r==null&&O.vnode!=null&&O.vnode(a),a}function E(e){return e.children}function Ce(e,t){this.props=e,this.context=t}function me(e,t){if(t==null)return e.__?me(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?me(e):null}function On(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return On(e)}}function ct(e){(!e.__d&&(e.__d=!0)&&oe.push(e)&&!De.__r++||Ft!=O.debounceRendering)&&((Ft=O.debounceRendering)||Sn)(De)}function De(){for(var e,t,n,o,r,a,i,l=1;oe.length;)oe.length>l&&oe.sort(xn),e=oe.shift(),l=oe.length,e.__d&&(n=void 0,r=(o=(t=e).__v).__e,a=[],i=[],t.__P&&((n=W({},o)).__v=o.__v+1,O.vnode&&O.vnode(n),yt(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,a,r??me(o),!!(32&o.__u),i),n.__v=o.__v,n.__.__k[n.__i]=n,Ln(a,n,i),n.__e!=r&&On(n)));De.__r=0}function Tn(e,t,n,o,r,a,i,l,d,_,u){var c,g,h,f,m,b,p,y=o&&o.__k||En,k=t.length;for(d=jo(n,t,y,d,k),c=0;c<k;c++)(h=n.__k[c])!=null&&(g=h.__i==-1?$e:y[h.__i]||$e,h.__i=c,b=yt(e,h,g,r,a,i,l,d,_,u),f=h.__e,h.ref&&g.ref!=h.ref&&(g.ref&&kt(g.ref,null,h),u.push(h.ref,h.__c||f,h)),m==null&&f!=null&&(m=f),(p=!!(4&h.__u))||g.__k===h.__k?d=An(h,d,e,p):typeof h.type=="function"&&b!==void 0?d=b:f&&(d=f.nextSibling),h.__u&=-7);return n.__e=m,d}function jo(e,t,n,o,r){var a,i,l,d,_,u=n.length,c=u,g=0;for(e.__k=new Array(r),a=0;a<r;a++)(i=t[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(d=a+g,(i=e.__k[a]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?xe(null,i,null,null,null):Ae(i)?xe(E,{children:i},null,null,null):i.constructor==null&&i.__b>0?xe(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,l=null,(_=i.__i=Mo(i,n,d,c))!=-1&&(c--,(l=n[_])&&(l.__u|=2)),l==null||l.__v==null?(_==-1&&(r>u?g--:r<u&&g++),typeof i.type!="function"&&(i.__u|=4)):_!=d&&(_==d-1?g--:_==d+1?g++:(_>d?g--:g++,i.__u|=4))):e.__k[a]=null;if(c)for(a=0;a<u;a++)(l=n[a])!=null&&(2&l.__u)==0&&(l.__e==o&&(o=me(l)),jn(l,l));return o}function An(e,t,n,o){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=An(r[a],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=me(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function lt(e,t){return t=t||[],e==null||typeof e=="boolean"||(Ae(e)?e.some(function(n){lt(n,t)}):t.push(e)),t}function Mo(e,t,n,o){var r,a,i,l=e.key,d=e.type,_=t[n],u=_!=null&&(2&_.__u)==0;if(_===null&&e.key==null||u&&l==_.key&&d==_.type)return n;if(o>(u?1:0)){for(r=n-1,a=n+1;r>=0||a<t.length;)if((_=t[i=r>=0?r--:a++])!=null&&(2&_.__u)==0&&l==_.key&&d==_.type)return i}return-1}function Dt(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Po.test(t)?n:n+"px"}function je(e,t,n,o,r){var a,i;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Dt(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||Dt(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(Cn,"$1")),i=t.toLowerCase(),t=i in e||t=="onFocusOut"||t=="onFocusIn"?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=vt,e.addEventListener(t,a?it:at,a)):e.removeEventListener(t,a?it:at,a);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Ht(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=vt++;else if(t.t<n.u)return;return n(O.event?O.event(t):t)}}}function yt(e,t,n,o,r,a,i,l,d,_){var u,c,g,h,f,m,b,p,y,k,C,I,j,N,ie,K,ee,D=t.type;if(t.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),a=[l=t.__e=n.__e]),(u=O.__b)&&u(t);e:if(typeof D=="function")try{if(p=t.props,y="prototype"in D&&D.prototype.render,k=(u=D.contextType)&&o[u.__c],C=u?k?k.props.value:u.__:o,n.__c?b=(c=t.__c=n.__c).__=c.__E:(y?t.__c=c=new D(p,C):(t.__c=c=new Ce(p,C),c.constructor=D,c.render=Vo),k&&k.sub(c),c.props=p,c.state||(c.state={}),c.context=C,c.__n=o,g=c.__d=!0,c.__h=[],c._sb=[]),y&&c.__s==null&&(c.__s=c.state),y&&D.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=W({},c.__s)),W(c.__s,D.getDerivedStateFromProps(p,c.__s))),h=c.props,f=c.state,c.__v=t,g)y&&D.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),y&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(y&&D.getDerivedStateFromProps==null&&p!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(p,C),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(p,c.__s,C)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(c.props=p,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Y){Y&&(Y.__=t)}),I=0;I<c._sb.length;I++)c.__h.push(c._sb[I]);c._sb=[],c.__h.length&&i.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(p,c.__s,C),y&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,f,m)})}if(c.context=C,c.props=p,c.__P=e,c.__e=!1,j=O.__r,N=0,y){for(c.state=c.__s,c.__d=!1,j&&j(t),u=c.render(c.props,c.state,c.context),ie=0;ie<c._sb.length;ie++)c.__h.push(c._sb[ie]);c._sb=[]}else do c.__d=!1,j&&j(t),u=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++N<25);c.state=c.__s,c.getChildContext!=null&&(o=W(W({},o),c.getChildContext())),y&&!g&&c.getSnapshotBeforeUpdate!=null&&(m=c.getSnapshotBeforeUpdate(h,f)),K=u,u!=null&&u.type===E&&u.key==null&&(K=Pn(u.props.children)),l=Tn(e,Ae(K)?K:[K],t,n,o,r,a,i,l,d,_),c.base=t.__e,t.__u&=-161,c.__h.length&&i.push(c),b&&(c.__E=c.__=null)}catch(Y){if(t.__v=null,d||a!=null)if(Y.then){for(t.__u|=d?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,t.__e=l}else{for(ee=a.length;ee--;)bt(a[ee]);ut(t)}else t.__e=n.__e,t.__k=n.__k,Y.then||ut(t);O.__e(Y,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=Io(n.__e,t,n,o,r,a,i,d,_);return(u=O.diffed)&&u(t),128&t.__u?void 0:l}function ut(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(ut)}function Ln(e,t,n){for(var o=0;o<n.length;o++)kt(n[o],n[++o],n[++o]);O.__c&&O.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){O.__e(a,r.__v)}})}function Pn(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Ae(e)?e.map(Pn):W({},e)}function Io(e,t,n,o,r,a,i,l,d){var _,u,c,g,h,f,m,b=n.props,p=t.props,y=t.type;if(y=="svg"?r="http://www.w3.org/2000/svg":y=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(_=0;_<a.length;_++)if((h=a[_])&&"setAttribute"in h==!!y&&(y?h.localName==y:h.nodeType==3)){e=h,a[_]=null;break}}if(e==null){if(y==null)return document.createTextNode(p);e=document.createElementNS(r,y,p.is&&p),l&&(O.__m&&O.__m(t,a),l=!1),a=null}if(y==null)b===p||l&&e.data==p||(e.data=p);else{if(a=a&&Te.call(e.childNodes),b=n.props||$e,!l&&a!=null)for(b={},_=0;_<e.attributes.length;_++)b[(h=e.attributes[_]).name]=h.value;for(_ in b)if(h=b[_],_!="children"){if(_=="dangerouslySetInnerHTML")c=h;else if(!(_ in p)){if(_=="value"&&"defaultValue"in p||_=="checked"&&"defaultChecked"in p)continue;je(e,_,null,h,r)}}for(_ in p)h=p[_],_=="children"?g=h:_=="dangerouslySetInnerHTML"?u=h:_=="value"?f=h:_=="checked"?m=h:l&&typeof h!="function"||b[_]===h||je(e,_,h,b[_],r);if(u)l||c&&(u.__html==c.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(c&&(e.innerHTML=""),Tn(t.type=="template"?e.content:e,Ae(g)?g:[g],t,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,i,a?a[0]:n.__k&&me(n,0),l,d),a!=null)for(_=a.length;_--;)bt(a[_]);l||(_="value",y=="progress"&&f==null?e.removeAttribute("value"):f!=null&&(f!==e[_]||y=="progress"&&!f||y=="option"&&f!=b[_])&&je(e,_,f,b[_],r),_="checked",m!=null&&m!=e[_]&&je(e,_,m,b[_],r))}return e}function kt(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){O.__e(r,n)}}function jn(e,t,n){var o,r;if(O.unmount&&O.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||kt(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){O.__e(a,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&jn(o[r],t,n||typeof e.type!="function");n||bt(e.__e),e.__c=e.__=e.__e=void 0}function Vo(e,t,n){return this.constructor(e,n)}function Fo(e,t,n){var o,r,a,i;t==document&&(t=document.documentElement),O.__&&O.__(e,t),r=(o=!1)?null:t.__k,a=[],i=[],yt(t,e=t.__k=Ee(E,null,[e]),r||$e,$e,t.namespaceURI,r?null:t.firstChild?Te.call(t.childNodes):null,a,r?r.__e:t.firstChild,o,i),Ln(a,e,i)}function Do(e,t,n){var o,r,a,i,l=W({},e.props);for(a in e.type&&e.type.defaultProps&&(i=e.type.defaultProps),t)a=="key"?o=t[a]:a=="ref"?r=t[a]:l[a]=t[a]===void 0&&i!=null?i[a]:t[a];return arguments.length>2&&(l.children=arguments.length>3?Te.call(arguments,2):n),xe(e.type,l,o||e.key,r||e.ref,null)}function Ne(e){function t(n){var o,r;return this.getChildContext||(o=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&o.forEach(function(i){i.__e=!0,ct(i)})},this.sub=function(a){o.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){o&&o.delete(a),i&&i.call(a)}}),n.children}return t.__c="__cC"+$n++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}Te=En.slice,O={__e:function(e,t,n,o){for(var r,a,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(l){e=l}throw e}},wn=0,Ce.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=W({},this.state),typeof e=="function"&&(e=e(W({},n),this.props)),e&&W(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ct(this))},Ce.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ct(this))},Ce.prototype.render=E,oe=[],Sn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xn=function(e,t){return e.__v.__b-t.__v.__b},De.__r=0,Cn=/(PointerCapture)$|Capture$/i,vt=0,at=Ht(!1),it=Ht(!0),$n=0;var Ho=0;function s(e,t,n,o,r,a){t||(t={});var i,l,d=t;if("ref"in d)for(l in d={},t)l=="ref"?i=t[l]:d[l]=t[l];var _={type:e,props:d,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ho,__i:-1,__u:0,__source:r,__self:a};if(typeof e=="function"&&(i=e.defaultProps))for(l in i)d[l]===void 0&&(d[l]=i[l]);return O.vnode&&O.vnode(_),_}const Ro="modulepreload",zo=function(e,t){return new URL(e,t).href},Rt={},le=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let _=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const i=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");r=_(n.map(u=>{if(u=zo(u,o),u in Rt)return;Rt[u]=!0;const c=u.endsWith(".css"),g=c?'[rel="stylesheet"]':"";if(!!o)for(let m=i.length-1;m>=0;m--){const b=i[m];if(b.href===u&&(!c||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${g}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Ro,c||(f.as="script"),f.crossOrigin="",f.href=u,d&&f.setAttribute("nonce",d),document.head.appendChild(f),c)return new Promise((m,b)=>{f.addEventListener("load",m),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return r.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var pe,A,Je,zt,Oe=0,Mn=[],M=O,Nt=M.__b,Bt=M.__r,Gt=M.diffed,Ut=M.__c,Wt=M.unmount,Kt=M.__;function Be(e,t){M.__h&&M.__h(A,e,Oe||t),Oe=0;var n=A.__H||(A.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function $(e){return Oe=1,No(Vn,e)}function No(e,t,n){var o=Be(pe++,2);if(o.t=e,!o.__c&&(o.__=[Vn(void 0,t),function(l){var d=o.__N?o.__N[0]:o.__[0],_=o.t(d,l);d!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=A,!A.__f)){var r=function(l,d,_){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(g){return!!g.__c});if(u.every(function(g){return!g.__N}))return!a||a.call(this,l,d,_);var c=o.__c.props!==l;return u.forEach(function(g){if(g.__N){var h=g.__[0];g.__=g.__N,g.__N=void 0,h!==g.__[0]&&(c=!0)}}),a&&a.call(this,l,d,_)||c};A.__f=!0;var a=A.shouldComponentUpdate,i=A.componentWillUpdate;A.componentWillUpdate=function(l,d,_){if(this.__e){var u=a;a=void 0,r(l,d,_),a=u}i&&i.call(this,l,d,_)},A.shouldComponentUpdate=r}return o.__N||o.__}function P(e,t){var n=Be(pe++,3);!M.__s&&In(n.__H,t)&&(n.__=e,n.u=t,A.__H.__h.push(n))}function Bo(e){return Oe=5,wt(function(){return{current:e}},[])}function wt(e,t){var n=Be(pe++,7);return In(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function v(e,t){return Oe=8,wt(function(){return e},t)}function ae(e){var t=A.context[e.__c],n=Be(pe++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(A)),t.props.value):e.__}function Go(){for(var e;e=Mn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Fe),e.__H.__h.forEach(_t),e.__H.__h=[]}catch(t){e.__H.__h=[],M.__e(t,e.__v)}}M.__b=function(e){A=null,Nt&&Nt(e)},M.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Kt&&Kt(e,t)},M.__r=function(e){Bt&&Bt(e),pe=0;var t=(A=e.__c).__H;t&&(Je===A?(t.__h=[],A.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Fe),t.__h.forEach(_t),t.__h=[],pe=0)),Je=A},M.diffed=function(e){Gt&&Gt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Mn.push(t)!==1&&zt===M.requestAnimationFrame||((zt=M.requestAnimationFrame)||Uo)(Go)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Je=A=null},M.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Fe),n.__h=n.__h.filter(function(o){return!o.__||_t(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],M.__e(o,n.__v)}}),Ut&&Ut(e,t)},M.unmount=function(e){Wt&&Wt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Fe(o)}catch(r){t=r}}),n.__H=void 0,t&&M.__e(t,n.__v))};var Yt=typeof requestAnimationFrame=="function";function Uo(e){var t,n=function(){clearTimeout(o),Yt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);Yt&&(t=requestAnimationFrame(n))}function Fe(e){var t=A,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),A=t}function _t(e){var t=A;e.__c=e.__(),A=t}function In(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Vn(e,t){return typeof t=="function"?t(e):t}var q,dt=function(e,t){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},dt(e,t)},qt=(function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return(function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}dt(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)})(t,e),t.is=function(n){return n instanceof t},t})(Error),Wo=(function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e})();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(q||(q={}));var Ko=["{","}",","],Yo=(function(){function e(t){this.input=new Wo(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile((function(o){return!(function(r){return Ko.includes(r)})(o)})).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:q.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:q.Text,value:this.readWhile((function(t){return t!=="{"&&t!=="}"}))}},e.prototype.readVariableType=function(){var t=this.readWhile((function(n){return n!==","})).trim();return t==="plural"?q.Plural:t==="select"?q.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e})();function qo(e,t,n){for(var o=new Yo(t),r=[],a=function(i){var l=i.options,d=i.type,_=i.value;if(d!==q.Variable)if(l)if(d!==q.Select)try{r.concat(l[new Intl.PluralRules(e).select(n[_])].map(a))}catch{r.concat(l.other.map(a))}else r.concat((l[n[_]]||l.other).map(a));else r.push(_);else r.push(n[_])};!o.input.done;)a(o.next());return r}var Fn=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,a){return new Intl.DateTimeFormat(n.language,a).format(r)},this.formatNumber=function(r,a){return new Intl.NumberFormat(n.language,a).format(r)},this.translate=function(r,a){a===void 0&&(a={});var i=n.getMessageById(r,a.defaultMessage);if(typeof i=="string")try{return qo(n.language,i,a).join("")}catch{n.onError(new qt(r,n.language))}return i+""},this.getMessageById=function(r,a){if(!n.memo[r]){var i=n.messages[r];i===void 0&&(i=r.split(".").reduce((function(l,d){return l?l[d]:void 0}),n.messages)),typeof i!="string"&&(n.onError(new qt(r,n.language)),i=a||r),n.memo[r]=i}return n.memo[r]};var o=t.find((function(r){return r.language===e}));this.language=e,this.messages=o?o.messages:{}};function Xo(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var St=Ne({language:"",locales:[],setLanguage:function(){},translator:new Fn}),Jo=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,a=$(n);P((function(){a[1](n)}),[n]);var i=new Fn(a[0],o);return r&&(i.onError=r),Ee(St.Provider,{value:{language:a[0],locales:o,setLanguage:a[1],translator:i}},t)};function F(e){var t=ae(St);return t.translator}var S=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,a=Xo(e,["children","html","id","tagName"]),i=ae(St).translator.translate(n,a);return t?Ee(r,{dangerouslySetInnerHTML:{__html:i}}):Ee(E,null,i)};const xt=Ne(null),Ge=Ne(!0),X=window.$atramentConfig,Dn="2.3.0",Hn=X.game?.zip?X.game?.zip:X.game?.path,Rn=X.game.script,Qo=["Atrament://",window.location.host,window.location.pathname,Hn,"/",Rn].join(""),Zo=X.language||"en",zn=X.locale||"en-US",Nn=X.theme,Bn=X.font,Ue=100,We=10,ft=Ue-We*3,gt=Ue+We*5,es=50,ue="ERROR",V="OVERLAY",fe="TOOLBAR",Gn="__DEFAULT__",Un="$story_path",ts=["title","author","theme","font","observe","persist","sessions","autosave","saves","load_from_checkpoints","continue_maximally","single_scene","scenes_align","choices","hypertext","toolbar","about","cover","background","debug","allow_external_function_fallbacks"],Se='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',ns={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, system-ui, ${Se}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, sans-serif, ${Se}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", serif, ${Se}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", monospaced, ${Se}`};function os(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}function ss(e){const t=e.state.get().metadata.theme||Nn;e.settings.get("theme")||e.settings.set("theme",t)}function rs(e){const t=e.state.get().metadata.font||Bn;e.settings.get("font")||e.settings.set("font",t)}const Wn="dark",Kn={"bg-color":"#4c3b4d","fg-color":"#FCFCFC","shade-color":"rgba(255, 255, 255, 0.1)","font-color":"#EEEEEE","accent-bg-color":"#EEEEEE","accent-fg-color":"#F7567C","border-radius":"0.5rem","border-radius-inline":"0.25rem"},as={name:Wn,theme:Kn},is=Object.freeze(Object.defineProperty({__proto__:null,default:as,name:Wn,theme:Kn},Symbol.toStringTag,{value:"Module"})),Yn="light",qn={"bg-color":"#FCFCFC","fg-color":"#5D576B","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#FCFCFC","accent-fg-color":"#F7567C","border-radius":"0.5rem","border-radius-inline":"0.25rem"},cs={name:Yn,theme:qn},ls=Object.freeze(Object.defineProperty({__proto__:null,default:cs,name:Yn,theme:qn},Symbol.toStringTag,{value:"Module"})),Xn="sepia",Jn={"bg-color":"#ffeedb","fg-color":"#4c3b4d","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#ffeedb","accent-fg-color":"#a53850","border-radius":"0.5rem","border-radius-inline":"0.25rem"},us={name:Xn,theme:Jn},_s=Object.freeze(Object.defineProperty({__proto__:null,default:us,name:Xn,theme:Jn},Symbol.toStringTag,{value:"Module"})),ge={},he={},ds=Object.assign({"../resources/themes/dark.json":is,"../resources/themes/light.json":ls,"../resources/themes/sepia.json":_s});Object.values(ds).map(({default:e})=>{e&&(he[e.name]=e.theme)});["light","sepia","dark"].forEach(e=>{he[e]&&(ge[e]=he[e],delete he[e])});Object.keys(he).sort().forEach(e=>ge[e]=he[e]);function fs(e){!e||!ge[e]||Object.entries(ge[e]||ge[Nn]).forEach(([t,n])=>{document.documentElement.style.setProperty(`--${t}`,n)})}let ve={...ns};(async()=>{{const e={},t=Object.assign({"../resources/fonts/fira-sans/index.js":()=>le(()=>import("./index-Bwe_Wxdd.js"),__vite__mapDeps([0,1]),import.meta.url),"../resources/fonts/lora/index.js":()=>le(()=>import("./index-Bez2wlPl.js"),__vite__mapDeps([2,1]),import.meta.url),"../resources/fonts/merriweather/index.js":()=>le(()=>import("./index-C-kmLYZ6.js"),__vite__mapDeps([3,1]),import.meta.url),"../resources/fonts/opendyslexic/index.js":()=>le(()=>import("./index-DmtAIBck.js"),__vite__mapDeps([4,1]),import.meta.url)});await Promise.all(Object.values(t).map(n=>n().then(o=>{const r=o.default;r.name&&(e[r.name]=`${r.name}, ${r.fallback||"serif"}, ${Se}`)}))),Object.keys(e).sort().forEach(n=>ve[n]=e[n])}})();function gs(e){document.documentElement.style.setProperty("--font-game",ve[e]||ve[Bn])}function hs(e){e.settings.defineHandler("theme",(t,n)=>{fs(n)}),e.settings.defineHandler("font",(t,n)=>{gs(n)}),e.settings.defineHandler("fontSize",(t,n)=>{document.documentElement.style.setProperty("--game-font-size",`${n}%`)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{e.interfaces.platform.setFullscreen(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function ms(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got ${typeof e}`);if(e.length===0)return[];const t=JSON.parse(JSON.stringify(e));for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}function ht(e,t={}){let n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\].*?\\[\\/${e}\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\](.*?)\\[\\/${e}\\]`,"i");return t.single&&(n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\]`,"i")),{matcher:n,parser:o}}const ps=[ht("img"),ht("picture")];function Qn(e){if(!e)return[];const t={};return e.forEach(n=>{ps.forEach(o=>{n?.match(o.matcher)?.forEach(r=>{const a=r.match(o.parser);t[a[2]]=!0})})}),Object.keys(t)}function vs(e){const t=e.tags?.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game","background",t));const n=e.tags?.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game","background_page",n))}function bs(e){e.tags?.SHUFFLE_CHOICES&&(e.choices=ms(e.choices))}function ys(e){const t=Qn(e.content?.map(n=>n.text));e.images.push(...t)}function ks(e){[vs,bs,ys].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function ws(e){Object.values(Object.assign({})).map(({default:n})=>e.ink.story().BindExternalFunction(n.name,n.external.bind(e),n.lookaheadSafe||!1))}function Ss(e,t){const n=()=>{let r;try{r=e.ink.evaluateFunction(t,[],!0),e.state.setKey(fe,r.output)}catch(a){e.ink.story().onError(a.toString())}},o=()=>setTimeout(n,0);e.on("game/start",o),e.on("game/continueStory",o),e.on("ink/evaluateFunction",r=>{r.function!==t&&o()})}function xs(e){e.ink.onError(n=>e.state.setKey(ue,n)),e.state.setKey(V,{current:null,content:"",title:null,display:null});const t=e.state.get().metadata;t.toolbar?Ss(e,t.toolbar):t.title?e.state.setKey(fe,t.title):e.state.setKey(fe,Gn)}async function Cs(e,t){e.on("*",(o,r)=>console.log(`%c Atrament > ${o} `,"color: #111111; background-color: #7FDBFF;",r)),hs(e),await e.init(t,{applicationID:Qo,settings:{fullscreen:!1,animation:!0,mute:!1,volume:es,fontSize:Ue}}),e.on("game/start",()=>xs(e)),await e.game.init(Hn,Rn),await e.game.initInkStory(),ss(e),rs(e),ks(e),ws(e),os(e);const n=e.state.get().metadata;n.title&&e.interfaces.platform.setTitle(n.title),n.allow_external_function_fallbacks&&(e.ink.story().allowExternalFunctionFallbacks=!0),n.debug&&e.on("game/continueStory",()=>{const o=e.ink.story().state.previousPathString;e.state.setSubkey("game",Un,o)})}const Zn="en",eo={yes:"Yes",no:"No",cancel:"Cancel",back:"Go back","default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.loadgame":"Load game","main.savegame":"Save game","main.continue":"Continue","main.emptyslot":"Empty slot","main.continue-session":"Continue game {session}","main.autosave":"Autosave: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"New save","main.delete-session":"Delete this session?","main.delete-save":"Delete this saved game?","main.confirm-load":"Load this game?","main.confirm-save":"Overwrite this save?","main.settings":"Settings","main.about":"About","main.exit":"Exit","icon.menu":"Menu","icon.back":"Back","icon.debugger":"Debugger","game.end":"The end","game.save-and-quit":"Save game and quit","game.quit":"Quit game","game.click-to-continue":"Click to continue","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz.",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink file","debug.info.story-seed":"Story seed","debug.info.current-turn-index":"Current turn index","debug.info.path":"Path","debug.global-tags":"Global tags","debug.unknown-tag":"Unknown tag","debug.variables":"Variables","debug.variables.filter-by-name":"Filter by name","debug.variables.name":"Name","debug.variables.value":"Value","debug.variables.cancel":"Cancel","debug.variables.save":"Save","debug.visits":"Visits","debug.visits.path":"Path","debug.visits.count":"Count","debug.go-to-path":"Go to path","debug.functions":"Functions","debug.functions.arguments":"Arguments","debug.functions.arguments_placeholder":'JSON-formatted agruments, i.e. ["arg1", 5]',"debug.functions.run-function":"Run function","debug.functions.returned-value":"Returned value","debug.functions.output":"Output","about.components":"Components and libraries","about.iftf_support":"Made with the support of the {iftf}"},$s={language:Zn,messages:eo},Es=Object.freeze(Object.defineProperty({__proto__:null,default:$s,language:Zn,messages:eo},Symbol.toStringTag,{value:"Module"})),to="ua",no={yes:"Так",no:"Ні",cancel:"Скасувати",back:"Назад","default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.loadgame":"Завантажити гру","main.savegame":"Зберегти гру","main.continue":"Продовжити","main.emptyslot":"Порожній слот","main.continue-session":"Продовжити гру {session}","main.autosave":"Автозбереження: {date}","main.checkpoint":"Контрольна точка","main.checkpoint-named":"Контрольна точка: {name}","main.new-save":"Нове збереження","main.delete-session":"Видалити сесію?","main.delete-save":"Видалити збережену гру?","main.confirm-load":"Завантажити цю гру?","main.confirm-save":"Перезаписати це збереження?","main.settings":"Налаштування","main.about":"Про гру","main.exit":"Вихід","icon.menu":"Меню","icon.back":"Назад","icon.debugger":"Налагодження","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","game.quit":"Вийти з гри","game.click-to-continue":"Натисни, щоб продовжити","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб.",debug:"Налагодження","debug.info":"Інформація","debug.info.ink-file":"Ink-скрипт","debug.info.story-seed":"RNG-сід історії","debug.info.current-turn-index":"Індекс поточного ходу","debug.info.path":"Поточний шлях","debug.global-tags":"Глобальні теги","debug.unknown-tag":"Невідомий тег","debug.variables":"Змінні","debug.variables.filter-by-name":"Фільтр за ім'ям","debug.variables.name":"Ім'я","debug.variables.value":"Значення","debug.variables.cancel":"Скасувати","debug.variables.save":"Зберегти","debug.visits":"Візити","debug.visits.path":"Шлях","debug.visits.count":"Переходи","debug.go-to-path":"Перейти до","debug.functions":"Функції","debug.functions.arguments":"Аргументи","debug.functions.arguments_placeholder":'Аргументи у JSON-форматі, наприклад: ["arg1", 5]',"debug.functions.run-function":"Виконати функцію","debug.functions.returned-value":"Повернене значення","debug.functions.output":"Вивід","about.components":"Компоненти та бібліотеки","about.iftf_support":"Зроблено за підтримки фонду {iftf}"},Os={language:to,messages:no},Ts=Object.freeze(Object.defineProperty({__proto__:null,default:Os,language:to,messages:no},Symbol.toStringTag,{value:"Module"})),As=Object.assign({"../resources/locales/en.json":Es,"../resources/locales/ua.json":Ts}),Ls=Object.values(As);function oo(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=oo(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function x(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=oo(e))&&(o&&(o+=" "),o+=t);return o}const Ps="_application_wrapper_6fi81_1",js={application_wrapper:Ps};let Qe;function so(){window.innerHeight!==Qe&&(Qe=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${Qe-1}px`))}window.addEventListener("resize",so);const Ms=({children:e})=>(P(so,[]),s("div",{class:x(js.application_wrapper,"atrament-ui-app"),children:e})),Is="_error_modal_content_njm9y_1",Vs="_error_message_njm9y_8",Xt={error_modal_content:Is,error_message:Vs},Fs="_container_modal_fhjmv_1",Ds={container_modal:Fs},Ct=({children:e})=>s("div",{class:x(Ds.container_modal,"atrament-container-modal"),children:e}),Hs="_backdrop_rne3i_1",Rs={backdrop:Hs},$t=({onClick:e})=>s("div",{class:x(Rs.backdrop,"atrament-backdrop"),onClick:e}),zs="_modal_7txxf_1",Ns={modal:zs},Et=({children:e})=>s("div",{class:x(Ns.modal,"atrament-modal"),children:e}),Bs="_close_eyo4x_1",Gs={close:Bs},Ke=({onClick:e})=>s("div",{class:Gs.close,children:s("button",{onClick:e,title:"Close",children:"✕"})}),Us="_block_5hv3c_1",Ws="_block_start_5hv3c_6",Ks="_block_end_5hv3c_10",Ze={block:Us,block_start:Ws,block_end:Ks},G=({children:e,align:t=null})=>{const n=x(Ze.block,t==="start"&&Ze.block_start,t==="end"&&Ze.block_end,"atrament-block");return s("div",{class:n,children:e})},et=()=>{},ro=({close:e=et,message:t})=>s(Ct,{children:[s($t,{onClick:et}),s(Et,{children:s("div",{class:Xt.error_modal_content,children:[e!==et?s(Ke,{onClick:e}):"",s(G,{children:s("p",{class:Xt.error_message,children:t})})]})})]}),Ys="_container_4l08p_1",qs={container:Ys},Le=({children:e,style:t={}})=>s("div",{style:t,class:x(qs.container,"atrament-container"),children:e}),Xs="_loading_ffxmc_1",Js={loading:Xs},Qs="_container_flex_at0vo_1",Zs={container_flex:Qs},Ot=({children:e})=>s("div",{class:x(Zs.container_flex,"atrament-flex-container"),children:e}),er="_sk_cube_grid_fv0g6_1",tr="_sk_cube1_fv0g6_17",nr="_sk_cube2_fv0g6_18",or="_sk_cube3_fv0g6_19",sr="_sk_cube4_fv0g6_20",rr="_sk_cube5_fv0g6_21",ar="_sk_cube6_fv0g6_22",ir="_sk_cube7_fv0g6_23",cr="_sk_cube8_fv0g6_24",lr="_sk_cube9_fv0g6_25",U={sk_cube_grid:er,sk_cube1:tr,sk_cube2:nr,sk_cube3:or,sk_cube4:sr,sk_cube5:rr,sk_cube6:ar,sk_cube7:ir,sk_cube8:cr,sk_cube9:lr},ur=()=>s("div",{class:U.sk_cube_grid,children:[s("div",{class:U.sk_cube1}),s("div",{class:U.sk_cube2}),s("div",{class:U.sk_cube3}),s("div",{class:U.sk_cube4}),s("div",{class:U.sk_cube5}),s("div",{class:U.sk_cube6}),s("div",{class:U.sk_cube7}),s("div",{class:U.sk_cube8}),s("div",{class:U.sk_cube9})]}),_r=()=>s(Le,{children:s(Ot,{children:s("div",{class:x(Js.loading,"atrament-loading"),children:s(ur,{})})})});var dr={};function Me(e,t){for(var n in t)e[n]=t[n];return e}function fr(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,a=e.match(r),i={};if(a&&a[1])for(var l=a[1].split("&"),d=0;d<l.length;d++){var _=l[d].split("=");i[decodeURIComponent(_[0])]=decodeURIComponent(_.slice(1).join("="))}e=mt(e.replace(r,"")),t=mt(t||"");for(var u=Math.max(e.length,t.length),c=0;c<u;c++)if(t[c]&&t[c].charAt(0)===":"){var g=t[c].replace(/(^:|[+*?]+$)/g,""),h=(t[c].match(/[+*?]+$/)||dr)[0]||"",f=~h.indexOf("+"),m=~h.indexOf("*"),b=e[c]||"";if(!b&&!m&&(h.indexOf("?")<0||f)){o=!1;break}if(i[g]=decodeURIComponent(b),f||m){i[g]=e.slice(c).map(decodeURIComponent).join("/");break}}else if(t[c]!==e[c]){o=!1;break}return(n.default===!0||o!==!1)&&i}function gr(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function hr(e,t){return e.index=t,e.rank=(function(n){return n.props.default?0:mt(n.props.path).map(mr).join("")})(e),e.props}function mt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function mr(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var pr={},re=[],Jt=[],H=null,ao={url:Tt()},vr=Ne(ao);function Tt(){var e;return""+((e=H&&H.location?H.location:H&&H.getCurrentLocation?H.getCurrentLocation():typeof location<"u"?location:pr).pathname||"")+(e.search||"")}function J(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),(function(n){for(var o=re.length;o--;)if(re[o].canRoute(n))return!0;return!1})(e)&&(function(n,o){o===void 0&&(o="push"),H&&H[o]?H[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)})(e,t?"replace":"push"),io(e)}function io(e){for(var t=!1,n=0;n<re.length;n++)re[n].routeTo(e)&&(t=!0);return t}function br(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return J(t)}}function yr(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function kr(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(br(t))return yr(e)}while(t=t.parentNode)}}var Qt=!1;function co(e){e.history&&(H=e.history),this.state={url:e.url||Tt()}}Me(co.prototype=new Ce,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=lt(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Qt||(Qt=!0,H||addEventListener("popstate",function(){io(Tt())}),addEventListener("click",kr)),re.push(this),H&&(this.u=H.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),re.splice(re.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(hr).sort(gr);for(var n=0;n<e.length;n++){var o=e[n],r=fr(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,a=t.url,i=this.c,l=this.g(lt(e.children),a);if(l&&(o=Do(l[0],Me(Me({url:a,matches:n=l[1]},n),{key:void 0,ref:void 0}))),a!==(i&&i.url)){Me(ao,i=this.c={url:a,previous:i&&i.url,current:o,path:o?o.props.path:null,matches:n}),i.router=this,i.active=o?[o]:[];for(var d=Jt.length;d--;)Jt[d]({});typeof r=="function"&&r(i)}return Ee(vr.Provider,{value:i},o)}});function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},He.apply(null,arguments)}var _e;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_e||(_e={}));var Zt=function(e){return e};function wr(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,a=o.map(function(k){var C=Zt(He({pathname:"/",search:"",hash:"",state:null,key:nn()},typeof k=="string"?on(k):k));return C}),i=en(r??a.length-1,0,a.length-1),l=_e.Pop,d=a[i],_=tn(),u=tn();function c(k){return typeof k=="string"?k:Sr(k)}function g(k,C){return C===void 0&&(C=null),Zt(He({pathname:d.pathname,search:"",hash:""},typeof k=="string"?on(k):k,{state:C,key:nn()}))}function h(k,C,I){return!u.length||(u.call({action:k,location:C,retry:I}),!1)}function f(k,C){l=k,d=C,_.call({action:l,location:d})}function m(k,C){var I=_e.Push,j=g(k,C);function N(){m(k,C)}h(I,j,N)&&(i+=1,a.splice(i,a.length,j),f(I,j))}function b(k,C){var I=_e.Replace,j=g(k,C);function N(){b(k,C)}h(I,j,N)&&(a[i]=j,f(I,j))}function p(k){var C=en(i+k,0,a.length-1),I=_e.Pop,j=a[C];function N(){p(k)}h(I,j,N)&&(i=C,f(I,j))}var y={get index(){return i},get action(){return l},get location(){return d},createHref:c,push:m,replace:b,go:p,back:function(){p(-1)},forward:function(){p(1)},listen:function(C){return _.push(C)},block:function(C){return u.push(C)}};return y}function en(e,t,n){return Math.min(Math.max(e,t),n)}function tn(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function nn(){return Math.random().toString(36).substr(2,8)}function Sr(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,a=e.hash,i=a===void 0?"":a;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function on(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function xr(e,t={}){let[,n]=$({}),[o]=$(e.get());return P(()=>{o!==e.get()&&n({})},[]),P(()=>{let r,a,i,l=()=>{r||(r=1,a=setTimeout(()=>{r=void 0,n({})}))};return t.keys?i=Lo(e,t.keys,l):i=e.listen(l),()=>{i(),clearTimeout(a)}},[e,""+t.keys]),e.get()}const w=()=>{const e=ae(xt),t=v(c=>{try{return c()}catch(g){return e.ink.story().onError&&e.ink.story().onError(g.toString()),null}},[e]),n=v(c=>c?c.startsWith("http://")||c.startsWith("https://")?c:e.game.getAssetPath(c):null,[e]),o=v((c,g)=>{e.settings.set(c,g),e.settings.save()},[e]),r=v((...c)=>e.state.setSubkey(...c),[e]),a=v((c,g=[])=>{let h={};try{h=e.ink.evaluateFunction(c,g,!0)}catch(f){e.ink.story().onError&&e.ink.story().onError(f.toString()),h.error=f.toString()}return h},[e]),i=v((...c)=>t(()=>e.ink.setVariable(...c)),[e,t]),l=v((...c)=>t(()=>e.ink.getVariable(...c)),[e,t]),d=v((...c)=>t(()=>e.game.makeChoice(...c)),[e,t]),_=v((...c)=>t(()=>e.game.continueStory(...c)),[e,t]),u=v(()=>{e.state.setSubkey("game","background",null),e.state.setSubkey("game","background_page",null)},[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:d,continueStory:_,getAssetPath:n,updateSettings:o,setStateSubkey:r,evaluateInkFunction:a,setInkVariable:i,getInkVariable:l,resetBackground:u}},L=(e=void 0)=>{const t=ae(xt);return xr(t.store,{keys:e})},lo=()=>{const{evaluateInkFunction:e,setStateSubkey:t}=w(),n=L([V]),o=v((i,l,d)=>{t(V,"current",i);let _=l;const u=l.split(`
`),g=u.shift().match(/\[title\](.+?)\[\/title\]/i);g&&(t(V,"title",g[1]),_=u.join(`
`)),t(V,"content",_),d&&t(V,"display",d)},[t]),r=v(()=>{const i=n[V].current;if(i){const l=e(i);o(i,l.output,null)}},[n,o,e]),a=v(()=>{t(V,"current",null),t(V,"content",""),t(V,"title",null),t(V,"display",null)},[t]);return{refreshOverlay:r,closeOverlay:a,setOverlayContent:o,overlay:{current:n[V].current,content:n[V].content.split(`
`),title:n[V].title,display:n[V].display}}},Cr="_menu_toggle_j3iyw_1",$r="_menu_content_j3iyw_15",Er="_atrament_version_j3iyw_19",Or="_atrament_about_j3iyw_33",Tr="_atrament_appversion_j3iyw_39",ke={menu_toggle:Cr,menu_content:$r,atrament_version:Er,atrament_about:Or,atrament_appversion:Tr};function Ye(e){P(()=>(document.addEventListener("keydown",e,!1),()=>document.removeEventListener("keydown",e,!1)),[e])}function Q(e=!1){const[t,n]=$(e),o=v(()=>n(i=>!i),[]),r=v(()=>n(!0),[]),a=v(()=>n(!1),[]);return[t,o,n,r,a]}const Ar=()=>s("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:[s("title",{children:s(S,{id:"icon.menu"})}),s("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})]}),Lr=()=>s("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),Pr=()=>s("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),jr=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",role:"img",children:[s("title",{children:s(S,{id:"icon.back"})}),s("path",{d:"M0 0h24v24H0z",fill:"none"}),s("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),Mr=()=>s("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100%",height:"100%",viewBox:"0 0 122.88 101.878","enable-background":"new 0 0 122.88 101.878",role:"img",children:[s("title",{children:s(S,{id:"icon.debugger"})}),s("g",{children:s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M64.406,12.143c-2.672-1.042-5.431-1.586-8.276-1.586 c-4.279,0-7.798,1.369-10.557,4.084L21.765,38.427l2.477,2.499l-9.037,9.101L0,34.799l9.036-9.037l2.802,2.737L35.515,4.844 C38.773,1.608,42.271,0,46.007,0C52.285,0,58.411,4.041,64.406,12.143L64.406,12.143z M100.535,5.408 c2.588,0,5.072,0.441,7.384,1.25l-5.874,6.358c-13.345,14.437,1.715,22.79,14.986,12.879l5.119-3.822 c0.475,1.813,0.729,3.717,0.729,5.679c0,12.341-10.003,22.345-22.345,22.345c-4.026,0-7.804-1.065-11.066-2.929L78.616,58.689 c10.214,9.778,20.431,19.554,30.646,29.33l-13.858,13.858C85.74,91.8,76.08,81.718,66.422,71.635L47.394,91.833 c-1.445,2.471-4.126,4.132-7.194,4.132c-4.599,0-8.329-3.729-8.329-8.329c0-1.988,0.699-3.815,1.862-5.247l-0.012-0.012 l0.073-0.063c0.601-0.723,1.322-1.342,2.132-1.828L57.327,62.14L30.941,34.504L41.89,23.556 c10.157,9.756,18.402,17.582,28.572,27.324l11.864-10.172c-2.604-3.654-4.136-8.125-4.136-12.955 C78.19,15.411,88.193,5.408,100.535,5.408L100.535,5.408z M28.63,10.362L17.747,21.245l-2.086-2.085L26.544,8.276L28.63,10.362 L28.63,10.362z",style:"fill:var(--accent-fg-color)"})})]}),Ir="_debug_toggle_1xfgt_1",Vr="_debug_container_1xfgt_15",Fr="_container_1xfgt_30",Dr="_input_div_1xfgt_46",Hr="_button_1xfgt_50",Rr="_input_1xfgt_46",zr="_errormsg_1xfgt_74",Nr="_unknown_tag_1xfgt_82",T={debug_toggle:Ir,debug_container:Vr,container:Fr,input_div:Dr,button:Hr,input:Rr,errormsg:zr,unknown_tag:Nr},Br="_collapse_19tvh_1",Gr="_collapse_title_19tvh_6",Ur="_collapse_children_19tvh_12",tt={collapse:Br,collapse_title:Gr,collapse_children:Ur},be=({title:e,children:t,open:n=!1})=>s("details",{class:tt.collapse,open:n,children:[s("summary",{class:tt.collapse_title,children:e}),s("div",{class:tt.collapse_children,children:t})]}),Wr="_table_1rcps_1",Kr="_table_fixed_1rcps_13",Yr="_cell_full_1rcps_23",qr="_cell_padding_1rcps_31",Xr="_thead_border_1rcps_39",Jr="_tbody_border_1rcps_47",Qr="_caption_1rcps_63",Zr="_page_1rcps_89",ea="_page_active_1rcps_97",B={table:Wr,table_fixed:Kr,cell_full:Yr,cell_padding:qr,thead_border:Xr,tbody_border:Jr,caption:Qr,page:Zr,page_active:ea},ye=({columns:e=[],data:t=[],pageSize:n=0,border:o=!0,padding:r=!0,columnWidth:a=[],fixed:i=!1})=>{const[l,d]=$(0);P(()=>{d(0)},[t]);let _=1,u=0,c=t.length;n&&(_=Math.ceil(t.length/n),u=l*n,c=u+n);const g=f=>{d(+f.target.value)},h=t.slice(u,c);return s("table",{class:x(B.table,i&&B.table_fixed),children:[n>0&&s("caption",{class:B.caption,children:[...Array(_).keys()].map(f=>s("button",{onClick:g,value:f,class:f===l?B.page_active:B.page,children:f+1},f))}),e.length>0&&s("thead",{children:s("tr",{class:o?B.thead_border:"",children:e.map((f,m)=>{const b=f.style||{};return a[m]&&(b.width=a[m]),s("th",{class:r?B.cell_padding:B.cell_full,style:b,children:f.name},m)})})}),h.length>0&&s("tbody",{children:h.map((f,m)=>s("tr",{class:o?B.tbody_border:"",children:f.map((b,p)=>{const y={};return a[p]&&(y.width=a[p]),s("td",{class:r?B.cell_padding:B.cell_full,style:y,children:b},p)})},m))})]})},ta=()=>{const{atrament:e}=w(),t=F(),o=e.ink.story().state,r=e.state.get().game,a=[[t.translate("debug.info.ink-file"),`${r.$path}/${r.$file}`],[t.translate("debug.info.story-seed"),o.storySeed],[t.translate("debug.info.current-turn-index"),o.currentTurnIndex],[t.translate("debug.info.path"),r[Un]]];return s(be,{title:t.translate("debug.info"),open:!0,children:s(ye,{data:a,fixed:!0})})},na=({closeFn:e})=>{const{atrament:t}=w(),[n,o]=$(""),[r,a]=$(""),i=d=>{o(d.target.value),a("")},l=()=>{if(n){try{t.ink.goTo(n),t.game.continueStory(),e()}catch(d){a(d.toString())}o("")}};return s(E,{children:[s("div",{class:T.container,children:[s("div",{children:[s(S,{id:"debug.go-to-path"}),":"]}),s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",value:n,onInput:i})}),s("div",{children:[s("button",{class:T.button,onClick:l,children:">>>"})," ",s("br",{})]})]}),s("div",{class:T.container,children:s("span",{class:T.errormsg,children:r})})]})},oa=()=>{const{atrament:e}=w(),t=F(),n=e.ink.getGlobalTags(),o=Object.keys(n).map(r=>ts.includes(r)?[r,n[r]]:[s("span",{class:T.unknown_tag,title:t.translate("debug.unknown-tag"),children:r},r),n[r]]);return s(be,{title:t.translate("debug.global-tags"),open:!0,children:s(ye,{data:o,fixed:!0})})},sa="_button_pofct_1",ra="_button_close_pofct_33",aa="_input_pofct_65",ia="_toggle_pofct_91",ca="_listview_pofct_103",Z={button:sa,button_close:ra,input:aa,toggle:ia,listview:ca},la="_checkbox_wrapper_1bc4s_1",ua="_checkbox_1bc4s_1",sn={checkbox_wrapper:la,checkbox:ua},qe=({name:e,enabled:t,onChange:n})=>s("div",{class:sn.checkbox_wrapper,children:s("input",{type:"checkbox",class:sn.checkbox,checked:t,onChange:n,name:e,id:e})}),_a=({value:e,setNewValue:t})=>{const n=o=>t(+o.target.value);return s("input",{class:Z.input,type:"number",value:e,onInput:n})},da=({value:e,setNewValue:t})=>{const n=o=>t(o.target.value);return s("input",{class:Z.input,type:"text",value:e,onInput:n})},fa=({name:e,value:t,setNewValue:n})=>{const o=r=>n(r.target.checked);return s("div",{class:Z.toggle,children:s(qe,{enabled:t,onChange:o,name:e})})},ga=({name:e,value:t})=>{if(e===t._originNames[0]&&t.size===0){const o=[...t.origins[0]._itemNameToValues.keys()];return s("span",{class:Z.listview,children:JSON.stringify(o).replace(/,/g,", ")})}const n=[];return t.forEach((o,r)=>n.push([JSON.parse(r),o])),s("ul",{class:Z.listview,children:n.map(([o,r])=>s("li",{children:[s("abbr",{title:o.originName,children:o.itemName}),": ",r]},o))})},ha=({name:e,value:t})=>{const{getInkVariable:n,setInkVariable:o}=w(),r=F(),[a,i]=$(!1),[l,d]=$(!1),[_,u]=$(!1);P(()=>{const f=n(e);d(f),u(f)},[e,n,d,u]);const c=f=>{f.preventDefault(),i(!0)},g=()=>i(!1),h=()=>{_!==l&&(o(e,_),d(_)),i(!1)};return a?s(E,{children:[s("button",{class:Z.button_close,onClick:g,title:r.translate("debug.variables.cancel"),children:"X"}),typeof t=="number"&&s(_a,{value:_,setNewValue:u}),typeof t=="string"&&s(da,{value:_,setNewValue:u}),typeof t=="boolean"&&s(fa,{name:e,value:_,setNewValue:u}),s("button",{class:Z.button,onClick:h,title:r.translate("debug.variables.save"),children:">"})]}):s(E,{children:typeof _=="object"?s(ga,{name:e,value:_}):s("button",{class:Z.button,onClick:c,children:JSON.stringify(_)})})};function ma(e){const t=e.ink.getVariables();return Object.entries(t).sort((o,r)=>o[0]>r[0]?0:-1)}const pa=({variables:e})=>{const t=F(),n=e.map((o,r)=>[o[0],s(ha,{name:o[0],value:o[1]},r)]);return s(ye,{columns:[{name:t.translate("debug.variables.name"),style:{width:"50%","text-align":"left"}},{name:t.translate("debug.variables.value"),style:{"text-align":"left"}}],data:n,pageSize:10,fixed:!0})},va=()=>{const[e,t]=$(""),{atrament:n}=w(),o=F(),r=ma(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(be,{title:o.translate("debug.variables"),children:[s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(pa,{variables:r})]})};function ba(e){const t=e.ink.story().state._visitCounts,n=[];for(let o of t)n.push(o);return n.sort((o,r)=>o[0]>r[0]?0:-1)}const ya=()=>{const[e,t]=$(""),{atrament:n}=w(),o=F(),r=ba(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(be,{title:o.translate("debug.visits"),children:[s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(ye,{columns:[{name:o.translate("debug.visits.path"),style:{width:"75%","text-align":"left"}},{name:o.translate("debug.visits.count"),style:{"text-align":"left"}}],data:r,pageSize:10,fixed:!0})]})},ka=()=>{const{atrament:e}=w(),t=F(),[n,o]=$(""),[r,a]=$(null),[i,l]=$(""),[d,_]=$(null),u=f=>{let m=[];try{m=JSON.parse(f)}catch{}return m},c=f=>{o(f.target.value),l(""),_(null)},g=f=>{a(f.target.value),l(""),_(null)},h=()=>{if(n)try{const f=e.ink.evaluateFunction(n,u(r),!0);_(f),l("")}catch(f){l(f.toString())}};return s(be,{title:t.translate("debug.functions"),children:[s("div",{class:T.container,children:[s("div",{children:[s(S,{id:"debug.functions.run-function"}),":"]}),s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",value:n,onInput:c})})]}),s("div",{class:T.container,children:[s("div",{children:[s(S,{id:"debug.functions.arguments"}),":"]}),s("div",{class:T.input_div,children:s("input",{class:T.input,type:"text",value:r,onInput:g,placeholder:t.translate("debug.functions.arguments_placeholder"),title:t.translate("debug.functions.arguments_placeholder")})}),s("div",{children:[s("button",{class:T.button,onClick:h,children:">>>"})," ",s("br",{})]})]}),s("div",{class:T.container,children:s("pre",{children:n&&`${n}(${r?u(r).map(JSON.stringify).join(", "):""})`})}),i&&s("div",{class:T.container,children:s("span",{class:T.errormsg,children:i})}),s("div",{class:T.container,children:d&&s(ye,{data:[[t.translate("debug.functions.returned-value"),JSON.stringify(d.returned)],[t.translate("debug.functions.output"),s("pre",{children:d.output},"output")]],fixed:!0})})]})},wa=()=>{const[e,t]=Q(!1),[n,o]=$(!1),r=F(),a=v(i=>{i.code==="Backquote"&&(n?(t(),o(!1)):(o(!0),setTimeout(()=>o(!1),1e3)))},[t,n,o]);return Ye(a),e?s("div",{class:T.debug_container,children:[s(Ke,{onClick:t}),s(ta,{}),s(oa,{}),s(va,{}),s(ya,{}),s(ka,{}),s(na,{closeFn:t})]}):s("button",{class:T.debug_toggle,onClick:t,title:r.translate("debug"),children:s(Mr,{})})},Sa=()=>{const{metadata:e}=L(["metadata"]);return e.debug?s(wa,{}):s(E,{})},xa="_header_1gyyv_1",Ca="_infobox_1gyyv_19",rn={header:xa,infobox:Ca},$a=""+new URL("atrament-logo-D7LOrOOl.png",import.meta.url).href,Ea=""+new URL("iftf-logo-BWs-h1t3.png",import.meta.url).href,uo=[["Atrament Core","https://github.com/technix/atrament-core"],["Atrament Web","https://github.com/technix/atrament-web"],["Atrament Web UI","https://github.com/technix/atrament-web-ui"],["InkJS","https://github.com/y-lohse/inkjs"],["Preact","https://preactjs.com/"],["Howler","https://howlerjs.com/"],["Nanostores","https://github.com/nanostores/nanostores"],["LocalForage","https://github.com/localForage/localForage"],["fflate","https://github.com/101arrowz/fflate"]],Oa=uo.length-1,an=({href:e,children:t})=>s("a",{href:e,target:"_blank",rel:"noreferrer",children:t}),Ta='<a href="https://iftechfoundation.org/" target="_blank" rel="noreferrer">Interactive Fiction Technology Foundation</a>',Aa=({onClick:e})=>s(G,{children:s("div",{onClick:n=>n.target.tagName.toLowerCase()==="a"?"":e(n),children:[s("div",{class:rn.header,children:[s("img",{src:$a}),s("h1",{children:["Atrament ",s("small",{children:Dn})]})]}),s("p",{children:s(an,{href:"https://atrament.ink/",children:"https://atrament.ink/"})}),s("p",{children:[s(S,{id:"about.components"}),": ",uo.map((n,o)=>s("span",{children:[s(an,{href:n[1],children:n[0]}),o===Oa?".":","," "]},n[1]))]}),s("div",{class:rn.infobox,children:[s("img",{src:Ea}),s("p",{children:s(S,{id:"about.iftf_support",html:!0,iftf:Ta})})]})]})}),La="_settings_container_1lyb2_1",Pa={settings_container:La},ja=()=>{const{updateSettings:e}=w(),t=L(["settings"]),n=o=>e("fullscreen",o.target.checked);return s("div",{class:x("atrament-settings-fullscreen"),children:[s(qe,{enabled:t.settings.fullscreen,onChange:n,name:"settings-fullscreen"})," ",s("label",{for:"settings-fullscreen",children:s(S,{id:"settings.fullscreen"})})]})},Ma="_settings_sound_container_1abud_1",Ia="_settings_sound_input_container_1abud_6",Va="_settings_sound_volume_1abud_10",Fa="_settings_sound_icon_1abud_17",ce={settings_sound_container:Ma,settings_sound_input_container:Ia,settings_sound_volume:Va,settings_sound_icon:Fa},Da=()=>{const{updateSettings:e}=w(),t=L(["settings"]),n=i=>e("mute",!i.target.checked),o=i=>e("volume",i.target.value),{mute:r,volume:a}=t.settings;return s(E,{children:[s("div",{class:x(ce.settings_sound,"atrament-settings-sound"),children:[s(qe,{enabled:!r,onChange:n,name:"settings-sound"})," ",s("label",{for:"settings-sound",children:s(S,{id:"settings.sound"})})]}),s("div",{class:ce.settings_sound_container,children:[s("div",{class:ce.settings_sound_icon,children:s(Pr,{})}),s("div",{class:ce.settings_sound_input_container,children:s("input",{class:ce.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:a,onChange:o})}),s("div",{class:ce.settings_sound_icon,children:s(Lr,{})})]})]})},Ha="_settings_fontsize_container_1ho7s_1",Ra="_settings_font_a_1ho7s_6",za="_settings_fontsize_input_container_1ho7s_12",Na="_settings_fontsize_input_1ho7s_12",Ba="_settings_font_sample_1ho7s_22",te={settings_fontsize_container:Ha,settings_font_a:Ra,settings_fontsize_input_container:za,settings_fontsize_input:Na,settings_font_sample:Ba},_o=[];for(let e=ft;e<=gt;e+=We)_o.push(e);const Ga=()=>{const{updateSettings:e}=w(),t=L(["settings"]),{font:n,fontSize:o}=t.settings,r=a=>e("fontSize",a.target.value);return s("div",{class:x(te.settings_text,"atrament-settings-text"),children:[s("div",{class:te.settings_fontsize_container,children:[s("div",{class:te.settings_font_a,style:{"font-size":`${ft}%`},children:"A"}),s("div",{class:te.settings_fontsize_input_container,children:[s("input",{class:te.settings_fontsize_input,type:"range",min:ft,max:gt,step:We,value:o||Ue,onInput:r,list:"fontSizes"}),s("datalist",{id:"fontSizes",children:_o.map(a=>s("option",{value:a},a))})]}),s("div",{class:te.settings_font_a,style:{"font-size":`${gt}%`},children:"A"})]}),s("div",{class:te.settings_font_sample,style:{"font-size":`${o}%`,"font-family":ve[n]},children:s(S,{id:"font.sampleText"})})]})},Ua="_settings_font_container_yph84_1",Wa={settings_font_container:Ua},Ka=()=>{const{updateSettings:e}=w(),t=L(["settings"]),n=r=>e("font",r.target.value),o=t.settings.font;return s("div",{class:x(Wa.settings_font_container,"atrament-settings-font"),children:s("select",{onChange:n,style:{"font-family":ve[o]},children:Object.entries(ve).map(([r,a])=>s("option",{value:r,style:{"font-family":a},selected:o===r,children:r},r))})})},Ya="_settings_theme_container_1gr28_1",qa="_settings_theme_button_1gr28_8",fo={settings_theme_container:Ya,settings_theme_button:qa},Xa=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["fg-color"],"background-color":t["bg-color"]};return s("button",{class:fo.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:s(S,{id:`themes.${e}`,defaultMessage:e})})},Ja=()=>{const{updateSettings:e}=w(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return s("div",{class:x(fo.settings_theme_container,"atrament-settings-theme"),children:Object.entries(ge).map(([n,o])=>s(Xa,{themeId:n,themeConfig:o,onClick:t},n))})},Qa=()=>{const{updateSettings:e}=w(),t=L(["settings"]),n=o=>e("animation",o.target.checked);return s("div",{class:x("atrament-settings-animation"),children:[s(qe,{enabled:t.settings.animation,onChange:n,name:"settings-animation"})," ",s("label",{for:"settings-animation",children:s(S,{id:"settings.animations"})})]})},pt=()=>{const e=F();return s("div",{class:Pa.settings_container,children:[s(ja,{}),s(Qa,{}),s(Da,{}),s(be,{title:e.translate("settings.appearance"),children:[s(Ka,{}),s(Ga,{}),s(Ja,{})]})]})},Za="_link_home_1sln5_1",ei={link_home:Za},At=({children:e,onClick:t})=>s("button",{onClick:t,class:ei.link_home,children:e},"mainmenu"),ti={break:"_break_jkn3k_1"},de=()=>s("div",{class:ti.break}),ni=()=>{const{atrament:e}=w(),t=e.interfaces.platform.exitApp;return s(E,{children:[s(pt,{}),t?s(E,{children:[s(de,{}),s(At,{onClick:t,children:s(S,{id:"main.exit"})})]}):""]})},oi="_link_menu_go234_1",si={link_menu:oi},R=({children:e,key:t,onClick:n,attributes:o={}})=>s("div",{children:s("button",{onClick:n,class:si.link_menu,...o,children:e},t)}),ri="_header_1v1u3_1",ai="_header_align_1v1u3_9",cn={header:ri,header_align:ai},Re=({children:e})=>s("div",{class:x(cn.header,"atrament-header"),children:s("div",{class:cn.header_align,children:e})}),ii="_container_kfk52_1",ci="_prompt_kfk52_7",li="_menu_item_kfk52_15",ui="_small_kfk52_49",_i="_is_deletable_kfk52_54",di="_delete_button_kfk52_58",fi="_delete_item_kfk52_79",z={container:ii,prompt:ci,menu_item:li,small:ui,is_deletable:_i,delete_button:di,delete_item:fi},ln=({prompt:e,onAccept:t,onReject:n,attributes:o})=>s("div",{class:z.container,children:[s("div",{class:z.prompt,children:e}),s("button",{onClick:t,class:x(z.menu_item,z.delete_item,z.small),...o,children:s(S,{id:"yes"})}),s("button",{onClick:n,class:x(z.menu_item,z.small),...o,children:s(S,{id:"no"})})]}),Lt=({children:e,key:t,onSelect:n,isDisabled:o=!1,isDeletable:r=!1,onDelete:a=()=>{},deletePrompt:i="",hasConfirmation:l=!1,confirmPrompt:d="",attributes:_={}})=>{const[u,,,c,g]=Q(!1),[h,,,f,m]=Q(!1),b=y=>{a(y),g()},p=y=>{n(y),m()};return h?s(ln,{prompt:d,onAccept:p,onReject:m,attributes:_}):u?s(ln,{prompt:i,onAccept:b,onReject:g,attributes:_}):s("div",{class:z.container,children:[s("button",{onClick:l?f:n,disabled:o,class:x(z.menu_item,r&&z.is_deletable),..._,children:e},t),r&&!o&&s("button",{onClick:c,class:x(z.menu_item,z.delete_button),..._,children:"✕"},t)]})},un=e=>new Date(e).toLocaleString(zn),go=({loadGame:e,hasConfirmation:t=!1})=>{const[n,o]=$([]),r=F(),{atrament:a}=w(),{metadata:i}=L(["metadata"]),l=v(async()=>{const u=await a.game.listSaves(),c=[],g=u.filter(f=>f.type===a.game.SAVE_AUTOSAVE).map(f=>({...f,slot:r.translate("main.autosave",{date:un(f.date)})}));if(g.length&&c.push(g[0]),i.load_from_checkpoints){const f=u.filter(m=>m.type===a.game.SAVE_CHECKPOINT).map(m=>({...m,slot:typeof m.name=="boolean"?r.translate("main.checkpoint"):r.translate("main.checkpoint-named",{name:m.name})}));f.length&&c.push(...f)}const h=u.filter(f=>f.type===a.game.SAVE_GAME).map(f=>({...f,slot:un(f.date)}));c.push(...h),o(c)},[a,i,r]),d=v(async u=>{const c=u.target.getAttribute("data-save");await e(c)},[e]),_=v(async u=>{const c=u.target.getAttribute("data-save");await a.game.removeSave(c),await l()},[a,l]);return P(()=>{(async()=>l())()},[l]),s(E,{children:n.map(u=>s(Lt,{onSelect:d,onDelete:_,isDisabled:!u.type,isDeletable:u.type,deletePrompt:r.translate("main.delete-save"),hasConfirmation:t,confirmPrompt:r.translate("main.confirm-load"),attributes:{"data-save":u.id},children:u.slot},u.name))})},gi=e=>new Date(e).toLocaleString(zn),hi=({saveGame:e})=>{const[t,n]=$([]),o=F(),{atrament:r}=w(),{metadata:a}=L(["metadata"]),i=a.saves?+a.saves:0,l=v(async()=>{const c=(await r.game.listSaves()).filter(g=>g.type===r.game.SAVE_GAME).map(g=>({...g,slot:gi(g.date)}));c.length<i&&c.push({name:c.length+1,slot:o.translate("main.new-save")}),n(c)},[r,o,i]),d=v(async u=>{const c=u.target.getAttribute("data-savename");await e(c),await l()},[e,l]),_=v(async u=>{const c=u.target.getAttribute("data-saveid");await r.game.removeSave(c),await l()},[r,l]);return P(()=>{(async()=>l())()},[l]),s(E,{children:t.map(u=>s(Lt,{onSelect:d,onDelete:_,isDisabled:!1,isDeletable:u.type,deletePrompt:o.translate("main.delete-save"),hasConfirmation:u.type,confirmPrompt:o.translate("main.confirm-save"),attributes:{"data-saveid":u.id,"data-savename":u.name},children:u.slot},u.name))})},mi=()=>s(At,{onClick:()=>J("/"),children:s(S,{id:"game.quit"})}),pi=({toggleMenu:e})=>{const{atrament:t}=w(),n=L(["metadata"]),{saves:o,load_from_checkpoints:r}=n.metadata,[a,i]=Q(!1),[l,d]=Q(!1),[_,u]=Q(!1),c=v(async h=>{await t.game.restart(h),d(),e()},[t,e,d]),g=v(async h=>{await t.game.saveGame(h)},[t]);return a?s(E,{children:[s(Re,{children:s("h2",{children:s(S,{id:"main.savegame"})})}),s(hi,{saveGame:g}),s(de,{}),s(R,{onClick:i,children:s(S,{id:"cancel"})},"go-back")]}):l?s(E,{children:[s(Re,{children:s("h2",{children:s(S,{id:"main.loadgame"})})}),s(go,{loadGame:c,hasConfirmation:!0}),s(de,{}),s(R,{onClick:d,children:s(S,{id:"cancel"})},"go-back")]}):_?s(E,{children:[s(pt,{}),s(de,{}),s(R,{onClick:u,children:s(S,{id:"back"})},"go-back")]}):s(E,{children:[o?s(R,{onClick:i,children:s(S,{id:"main.savegame"})},"save-game"):null,o||r?s(R,{onClick:d,children:s(S,{id:"main.loadgame"})},"load-game"):null,o||r?s(R,{onClick:u,children:s(S,{id:"main.settings"})},"settings"):s(pt,{}),s(de,{}),s(mi,{})]})},vi=({isHomeScreen:e,toggleMenu:t})=>e?s(ni,{}):s(pi,{toggleMenu:t}),Pt=({isHomeScreen:e=!1})=>{const[t,n]=Q(!1),[o,r,a]=Q(!1),i=v(()=>{n(),a(!1)},[n,a]),l=v(d=>{d.key==="Escape"&&(i(),a(!1))},[i,a]);return Ye(l),t?s(Ct,{children:[s($t,{onClick:i}),s(Et,{children:s("div",{class:ke.menu_content,children:[s(Ke,{onClick:i}),o?s(Aa,{onClick:r}):s(E,{children:[s(vi,{isHomeScreen:e,toggleMenu:i}),s("div",{class:ke.atrament_version,onClick:r,children:[s("div",{class:ke.atrament_about,children:"?"}),s("div",{class:ke.atrament_appversion,children:["Atrament ",Dn]})]})]})]})})]}):s(E,{children:[s("button",{class:ke.menu_toggle,onClick:i,children:s(Ar,{})}),s(Sa,{})]})},bi=({newGame:e,loadGame:t,resumeGame:n,canResume:o})=>{const[r,a]=$([]),i=F(),{atrament:l}=w(),{metadata:d}=L(["metadata"]),_=v(async()=>{const g=await l.game.getSessions();let h=!0;a([...Array(+d.sessions).keys()].map(f=>{const m=f+1,b=`session${m}`,p=!!g[`session${m}`],y=p||h;return!p&&h&&(h=!1),{id:m,name:b,hasSaves:p,canStart:y}}))},[l,d,a]),u=v(async g=>{const h=g.target.getAttribute("data-session"),f=r.filter(m=>m.name===h)[0];f&&(l.game.setSession(h),f.hasSaves?await o()?await n():await t():await e())},[l,r,e,o,n,t]),c=v(async g=>{const h=g.target.getAttribute("data-session");await l.game.removeSession(h),await _()},[l,_]);return P(()=>{(async()=>_())()},[_]),s(E,{children:r.map(g=>s(Lt,{onSelect:u,onDelete:c,isDisabled:!g.canStart,isDeletable:g.hasSaves,deletePrompt:i.translate("main.delete-session"),attributes:{"data-session":g.name},children:g.hasSaves?s(S,{id:"main.continue-session",session:g.id}):g.canStart?s(S,{id:"main.newgame"}):s(S,{id:"main.emptyslot"})},g.name))})},jt=()=>{const{resetBackground:e,gameStart:t,gameResume:n,continueStory:o}=w(),{metadata:r}=L(["metadata"]),a=v(async()=>{e(),await t(),o(),J("/game")},[e,t,o]),i=v(async()=>{e(),await n(),r.continue_maximally!==!1&&o(),J("/game")},[e,n,o,r]),l=v(async d=>{e(),await t(d),r.continue_maximally!==!1&&o(),J("/game")},[e,t,o,r]);return{newGame:a,resumeGame:i,loadGame:l}},ho=({children:e})=>{const{loadGame:t}=jt();return s(G,{align:"end",children:[s(Re,{children:s("h2",{children:s(S,{id:"main.loadgame"})})}),s(go,{loadGame:t}),s(de,{}),e]})},yi="_imagebox_1x268_1",ki="_image_1x268_1",wi="_illustration_1x268_10",nt={imagebox:yi,image:ki,illustration:wi},Mt=({src:e,options:t={}})=>s("div",{class:x(nt.imagebox,"atrament-image-container"),style:{"margin-left":t.leftmargin||"none","margin-right":t.rightmargin||"none"},children:s("img",{src:e,style:{width:t.width||"auto"},class:x(nt.image,!t.fullsize&&nt.illustration,"atrament-image")})}),mo=()=>{const{getAssetPath:e}=w(),t=F(),n=L(["metadata"]),{title:o,author:r,cover:a}=n.metadata;return s(Re,{children:[a?s(Mt,{src:e(a)}):"",s("h1",{children:o||t.translate("default.title")}),s("p",{children:r||t.translate("default.author")})]})},po=()=>s(R,{onClick:()=>J("/about"),children:s(S,{id:"main.about"})},"about"),Si=({canBeResumed:e,canBeLoaded:t,openLoadGameMenu:n,about:o})=>{const{newGame:r,resumeGame:a}=jt();return s(E,{children:[s(mo,{}),s(G,{align:"end",children:[e?s(R,{onClick:a,children:s(S,{id:"main.continue"})},"continuegame"):"",s(R,{onClick:r,children:s(S,{id:"main.newgame"})},"startgame"),t?s(R,{onClick:n,children:s(S,{id:"main.loadgame"})},"loadgame"):"",o?s(po,{}):""]})]})},xi=()=>{const[e,t]=$(!1),{atrament:n,canResume:o}=w(),{newGame:r,resumeGame:a}=jt(),{metadata:i}=L(["metadata"]);return s(E,{children:e?s(ho,{children:s(R,{onClick:()=>{n.game.setSession(),t(!1)},children:s(S,{id:"cancel"})},"go-back")}):s(E,{children:[s(mo,{}),s(G,{align:"end",children:[s(bi,{newGame:r,resumeGame:a,canResume:o,loadGame:()=>t(!0)}),i.about?s(po,{}):""]})]})})},Ci=()=>{const[e,t]=$(!1),[n,o]=$(!1),[r,a]=$(!1),{atrament:i,canResume:l}=w(),{metadata:d}=L(["metadata"]),_=()=>t(!0),u=()=>t(!1);return P(()=>{(async()=>{const g=await l();o(!!g);const f=(await i.game.listSaves()).filter(m=>d.load_from_checkpoints&&m.type===i.game.SAVE_CHECKPOINT?!0:m.type===i.game.SAVE_GAME);a(f.length>0)})()}),s(E,{children:e?s(ho,{children:s(R,{onClick:u,children:s(S,{id:"main.menu"})},"go-back")}):s(Si,{canBeResumed:n,canBeLoaded:r,openLoadGameMenu:_,about:d.about})})},vo=(e,t)=>{e?(document.body.style.backgroundImage=`url(${t(e)})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"):document.body.style.backgroundImage="none"},$i=()=>{const{canResume:e,getAssetPath:t,resetBackground:n}=w(),o=L(["metadata"]),{background:r,sessions:a}=o.metadata;return P(()=>{n(),vo(r,t)},[n,e,r,t]),s(Le,{children:s(Ot,{children:[s(Pt,{isHomeScreen:!0}),a?s(xi,{}):s(Ci,{})]})})},Ei="_toolbar_y184t_1",Oi={toolbar:Ei},Ti="_bannerblock_1ry2a_1",Ai="_accent_1ry2a_11",Li="_allcaps_1ry2a_17",ot={bannerblock:Ti,accent:Ai,allcaps:Li},Pi=({children:e,options:t})=>{const n=x(ot.bannerblock,t.style==="accent"&&ot.accent,t.allcaps&&ot.allcaps);return s("div",{class:n,children:e})},ji={tag:"banner",replacer:(e,t,n)=>s(Pi,{options:e,children:n(t)})},Mi=Object.freeze(Object.defineProperty({__proto__:null,default:ji},Symbol.toStringTag,{value:"Module"})),Ii={tag:"block",replacer:(e,t,n)=>{const o={display:"inline-block",width:e.width||"100%","text-align":e.align||"inherit","vertical-align":e.valign||"top"};return s("div",{style:o,children:n(t)})}},Vi=Object.freeze(Object.defineProperty({__proto__:null,default:Ii},Symbol.toStringTag,{value:"Module"})),Fi="_inline_button_ws4x6_1",Di="_bordered_button_ws4x6_19",_n={inline_button:Fi,bordered_button:Di},Hi=({children:e,options:t})=>{const n=ae(Ge),{evaluateInkFunction:o}=w(),{setOverlayContent:r,refreshOverlay:a}=lo(),i=v(d=>{d.stopPropagation();const _=t.onclick,u=o(_);u.output?r(_,u.output,t.display==="modal"?"modal":"overlay"):a()},[o,r,a,t]);let l=t.bordered===!1?_n.inline_button:_n.bordered_button;return s("button",{class:l,onClick:i,disabled:!n||t.disabled,children:e})},Ri={tag:"button",replacer:(e,t,n)=>(e.DEFAULT&&(e.onclick=e.DEFAULT),s(Hi,{options:e,children:n(t)}))},zi=Object.freeze(Object.defineProperty({__proto__:null,default:Ri},Symbol.toStringTag,{value:"Module"})),Ni={tag:"css",replacer:(e,t,n)=>s("span",{class:e.class,style:e.style,children:n(t)})},Bi=Object.freeze(Object.defineProperty({__proto__:null,default:Ni},Symbol.toStringTag,{value:"Module"})),Gi={tag:"font",replacer:(e,t,n)=>s("span",{style:{"font-family":e.DEFAULT},children:n(t)})},Ui=Object.freeze(Object.defineProperty({__proto__:null,default:Gi},Symbol.toStringTag,{value:"Module"})),Wi={tag:"highlight",replacer:(e,t,n)=>{const o={"background-color":e.bgcolor||"var(--accent-bg-color)",color:e.color||"var(--accent-fg-color)",padding:e.bgcolor?"0.1em":"inherit","box-decoration-break":"clone"};return s("span",{style:o,children:n(t)})}},Ki=Object.freeze(Object.defineProperty({__proto__:null,default:Wi},Symbol.toStringTag,{value:"Module"})),Yi="_infoblock_10o9f_1",qi="_font_ui_10o9f_9",Xi="_side_highlight_10o9f_13",Ji="_side_accent_10o9f_17",Ie={infoblock:Yi,font_ui:qi,side_highlight:Xi,side_accent:Ji},Qi=({children:e,options:t})=>{const n=x(Ie.infoblock,t.font==="system"&&Ie.font_ui,t.side==="accent"&&Ie.side_accent,t.side==="highlight"&&Ie.side_highlight);return s("div",{class:n,children:e})},Zi={tag:"info",replacer:(e,t,n)=>s(Qi,{options:e,children:n(t)})},ec=Object.freeze(Object.defineProperty({__proto__:null,default:Zi},Symbol.toStringTag,{value:"Module"})),tc="_inline_image_1jlev_1",nc={inline_image:tc},oc=({src:e})=>{const{getAssetPath:t}=w();return s("img",{class:nc.inline_image,src:t(e)})},sc={tag:"img",replacer:(e,t)=>s(oc,{src:t})},rc=Object.freeze(Object.defineProperty({__proto__:null,default:sc},Symbol.toStringTag,{value:"Module"})),ac="_input_1c260_1",ic={input:ac},cc=({options:e})=>{const t=ae(Ge),[n,o]=$(null),{getInkVariable:r,setInkVariable:a}=w();P(()=>o(r(e.var)),[r,e.var]);const i=d=>{let _=d.srcElement.value||n;e.type==="number"&&(_=+_),a(e.var,_),o(_)},l=e.type==="number"?"number":"text";return s("input",{disabled:!t,class:ic.input,value:n,placeholder:e.placeholder,type:l,onInput:i})},lc={tag:"input",tagOptions:{single:!0},replacer:e=>s(cc,{options:e})},uc=Object.freeze(Object.defineProperty({__proto__:null,default:lc},Symbol.toStringTag,{value:"Module"})),_c="_inline_link_sm09e_1",dc="_disabled_sm09e_5",dn={inline_link:_c,disabled:dc},fc=({children:e,choice:t})=>{const n=ae(Ge),{atrament:o,makeChoice:r,continueStory:a}=w(),i=L(["scenes"]),l=v(()=>{const d=i.scenes.length-1,u=i.scenes[d].choices.findIndex(c=>c.choice===t);if(u<0){o.state.setKey(ue,`[link=${t}] leads to nonexistent choice!`);return}r(u),a()},[o,a,r,t,i.scenes]);return s("a",{href:"#",class:x(dn.inline_link,!n&&dn.disabled),onClick:n?l:()=>{},children:e})},gc={tag:"link",replacer:(e,t,n)=>s(fc,{choice:e.DEFAULT,children:n(t)})},hc=Object.freeze(Object.defineProperty({__proto__:null,default:gc},Symbol.toStringTag,{value:"Module"})),mc=({options:e,src:t})=>{const{getAssetPath:n}=w(),o={fullsize:!0};return["leftmargin","rightmargin","width"].forEach(r=>{e[r]&&(o[r]=e[r])}),s(Mt,{src:n(t),options:o})},pc={tag:"picture",replacer:(e,t)=>s(mc,{options:e,src:t})},vc=Object.freeze(Object.defineProperty({__proto__:null,default:pc},Symbol.toStringTag,{value:"Module"})),bc="_progress_frame_17ofj_1",yc="_progress_bar_17ofj_7",kc="_standard_17ofj_14",wc="_accent_17ofj_18",Sc="_progress_content_17ofj_22",we={progress_frame:bc,progress_bar:yc,standard:kc,accent:wc,progress_content:Sc},xc=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let a=r?(r-n)*100/(o-n):0;a>100&&(a=100),a<0&&(a=0);const i=x(we.progress_bar,e.style==="accent"?we.accent:we.standard);return s("div",{class:we.progress_frame,children:[s("div",{class:i,style:{width:`${a}%`}}),s("div",{class:we.progress_content,children:[t," "]})]})},Cc={tag:"progress",replacer:(e,t,n)=>s(xc,{options:e,children:n(t)})},$c=Object.freeze(Object.defineProperty({__proto__:null,default:Cc},Symbol.toStringTag,{value:"Module"})),Ec="_hidden_1ydvn_1",Oc="_revealed_1ydvn_12",fn={hidden:Ec,revealed:Oc},Tc=[fn.hidden,fn.revealed],Ac=({children:e})=>{const[t,n]=$(0);return s("span",{class:Tc[t],onClick:()=>n(1-t),children:s("span",{children:e})})},Lc={tag:"spoiler",replacer:(e,t,n)=>s(Ac,{children:n(t)})},Pc=Object.freeze(Object.defineProperty({__proto__:null,default:Lc},Symbol.toStringTag,{value:"Module"})),jc=(e,t)=>e.split(/\[ \]/).map(n=>({style:{textAlign:"left"},name:t(n)})),Mc=(e,t)=>e.match(/\[row\](.+?)\[\/row\]/i)[1].split(/\[ \]/).map(t),Ic={tag:"table",replacer:(e,t,n)=>{const o=t.match(/\[header\](.+?)\[\/header\]/i),r=t.match(/\[row\].+?\[\/row\]/ig),a=o?jc(o[1],n):[],i=r?r.map(d=>Mc(d,n)):[],l=e.columns?e.columns.split(/\s+/g):[];return s(ye,{columns:a,data:i,border:e.border,padding:e.padding,columnWidth:l,fixed:e.fixed})}},Vc=Object.freeze(Object.defineProperty({__proto__:null,default:Ic},Symbol.toStringTag,{value:"Module"})),Fc={tag:"url",replacer:(e,t,n)=>s("a",{href:e.DEFAULT,target:"_blank",rel:"noreferrer",children:n(t)})},Dc=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"})),Hc=({src:e,options:t})=>{const{getAssetPath:n}=w();return s("video",{style:{"pointer-events":"none"},width:"100%",autoplay:!0,disablePictureInPicture:!0,loop:!0,...t,children:s("source",{src:n(e)})})},Rc={tag:"video",replacer:(e,t)=>s(Hc,{options:e,src:t})},zc=Object.freeze(Object.defineProperty({__proto__:null,default:Rc},Symbol.toStringTag,{value:"Module"})),Nc=Object.assign({"./banner/index.jsx":Mi,"./block/index.jsx":Vi,"./button/index.jsx":zi,"./css/index.jsx":Bi,"./font/index.jsx":Ui,"./highlight/index.jsx":Ki,"./info/index.jsx":ec,"./inline-image/index.jsx":rc,"./input/index.jsx":uc,"./link/index.jsx":hc,"./picture/index.jsx":vc,"./progress/index.jsx":$c,"./spoiler/index.jsx":Pc,"./table/index.jsx":Vc,"./url/index.jsx":Dc,"./video/index.jsx":zc}),bo=Object.values(Nc).map(({default:e})=>e),Bc=({index:e,item:t})=>s("span",{dangerouslySetInnerHTML:{__html:t}},e);function yo(e){const t=e.match(/(\w+)=["']?((?:.?(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/g),n={};return t&&t.forEach(o=>{const[,r,a]=o.match(/(.+)=(.+)/);try{n[r]=JSON.parse(a)}catch{n[r]=a}}),n}const Gc=e=>/<\/?[a-z][\s\S]*>/i.test(e);bo.forEach(e=>{e.regex=ht(e.tag,e.tagOptions)});function Uc(e,t){const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return e.split(new RegExp(`(${n})`))}function Wc(e,t,n){const o=e.match(t.parser);let r=o[1];r.startsWith("=")&&(r=`DEFAULT${r}`);const a=yo(r);return n(a,o[2],ko)}function Kc(e,t,n){return typeof e!="string"||!e.includes(t)?e:Uc(e,t).flatMap(a=>a===t?n(a):a)}function ko(e){let t=[e];const n=[];return bo.forEach(o=>{const r=e?.match(o.regex.matcher);r&&r.forEach(a=>n.push({component:o,mention:a,size:a.length}))}),n.sort((o,r)=>r.size-o.size).forEach(({component:o,mention:r})=>{const a=i=>Wc(i,o.regex,o.replacer);t=t.flatMap(i=>Kc(i,r,a))}),t.map((o,r)=>typeof o=="string"&&Gc(o)?Bc({index:r,item:o}):o)}const Pe=({content:e,isActive:t=!0})=>{const n=wt(()=>ko(e),[e]);return s(Ge.Provider,{value:t,children:n})},Yc=()=>{const e=F(),t=L([fe]),n=t[fe]!==Gn?t[fe]:e.translate("default.title");return s("div",{class:x(Oi.toolbar,"atrament-toolbar"),children:s(Pe,{content:n})})},qc="_container_text_138rh_1",Xc={container_text:qc},Xe=({children:e})=>s("div",{class:x(Xc.container_text,"atrament-text-container"),children:e}),Jc="_container_scenes_13lih_1",Qc={container_scenes:Jc},Zc=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",el=({children:e,align:t})=>s("div",{class:x(Qc.container_scenes,"atrament-container-scene"),style:{"justify-content":Zc(t)},children:e}),tl="_container_choices_41rpm_1",nl={container_choices:tl},ol=({children:e,key:t,isReady:n})=>s("div",{class:x(nl.container_choices,"atrament-container-choices",n&&"animation_appear"),children:s("div",{style:{opacity:n?1:0},children:s(G,{children:e})})},t),sl="_scene_1or5e_1",rl={scene:sl},wo=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function al(e,t){this.scrollLeft=e,this.scrollTop=t}const So=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,xo=(e,t,n)=>So(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),gn=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},il=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},It=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function cl(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const ll=e=>.5*(1-Math.cos(Math.PI*e));function Vt(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),Vt=t,t()}const ul=500,Co=e=>{const n=(Vt()-e.timeStamp)/(e.duration||ul);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||ll)(n),r=e.startX+(e.targetX-e.startX)*o,a=e.startY+(e.targetY-e.startY)*o;e.method(r,a),e.rafId=window.requestAnimationFrame(()=>{Co(e)})},ze=e=>isFinite(e)?Number(e):0,_l=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},dl=(e,t,n)=>{var o,r;if(!_l(e))return;const a=e.scrollLeft,i=e.scrollTop,l=ze((o=t.left)!==null&&o!==void 0?o:a),d=ze((r=t.top)!==null&&r!==void 0?r:i);if(l===a&&d===i)return;const _=gn(HTMLElement.prototype,"scroll",al),u=gn(Object.getPrototypeOf(e),"scroll",_).bind(e);if(t.behavior!=="smooth"){u(l,d);return}const c=()=>{window.removeEventListener("wheel",f),window.removeEventListener("touchmove",f)},g=()=>{c();const m=e.nodeType===9;e.dispatchEvent(cl(m))},h=Object.assign(Object.assign({},n),{timeStamp:Vt(),startX:a,startY:i,targetX:l,targetY:d,rafId:0,method:u,callback:g}),f=()=>{window.cancelAnimationFrame(h.rafId),c()};window.addEventListener("wheel",f,{passive:!0,once:!0}),window.addEventListener("touchmove",f,{passive:!0,once:!0}),Co(h)},fl=e=>e.window===e,gl=e=>(t,n,o)=>{const[r,a]=fl(t)?[It(t.document.documentElement),"Window"]:[t,"Element"],i=n??{};if(!il(i))throw new TypeError(So(e,a));if(!wo(i.behavior))throw new TypeError(xo(e,a,i.behavior));e==="scrollBy"&&(i.left=ze(i.left)+r.scrollLeft,i.top=ze(i.top)+r.scrollTop),dl(r,i,o)},hl=gl("scroll"),ml=hl,$o=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},Eo=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},pl=e=>(Eo($o(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,vl=(e,t,n)=>{const[o,r,a]=Eo(t,n,e.block||"start",e.inline||"nearest");return[r,a].map((i,l)=>{switch(i){case"center":return 1;case"nearest":return 0;default:{const d=o>>l&1;return i==="start"==!d?2:3}}})},hn=(e,t,n,o,r,a,i)=>e!==0?e:r<t&&a>n||r>t&&a<n?null:r<=t&&i<=o||a>=n&&i>=o?2:a>n&&i<o||r<t&&i>o?3:null,mn=e=>e!=="visible"&&e!=="clip",bl=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},yl=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?mn(t.overflowY)||mn(t.overflowX)||e===It(e):!1,pn=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return bl(e)}return n},st=(e,t,n)=>e<t?t:e>n?n:e,kl=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],wl=(e,t,n)=>{const{top:o,right:r,bottom:a,left:i}=t,l=kl(e.ownerDocument);if(!l)return[o,r,a,i];const d=_=>{const u=n.getPropertyValue(`${l}-${_}`);return parseInt(u,10)||0};return[o-d("top"),r+d("right"),a+d("bottom"),i-d("left")]},Ve=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},Sl=(e,t)=>{var n,o,r;const a=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[i,l,d,_]=e===It(e)?[0,0,(o=a?.width)!==null&&o!==void 0?o:e.clientWidth,(r=a?.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],u=i+e.clientLeft,c=l+e.clientTop,g=u+d,h=c+_;return[c,g,h,u]},xl=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const a=window.getComputedStyle(e),i=a.direction!=="rtl",l=$o(a.writingMode||a.getPropertyValue("-webkit-writing-mode")||a.getPropertyValue("-ms-writing-mode")),[d,_]=vl(t,l,i);let[u,c,g,h]=wl(e,e.getBoundingClientRect(),a);for(let f=pn(e);f!==null;f=pn(f)){if(o!==f.ownerDocument){if(o=f.ownerDocument,r=o.defaultView,!r)break;const{left:D,top:Y}=f.getBoundingClientRect();u+=Y,c+=D,g+=Y,h+=D}const m=r.getComputedStyle(f);if(m.position==="fixed")break;if(!yl(f,m))continue;const b=f.getBoundingClientRect(),[p,y,k,C]=Sl(f,b),I=hn(d,C,y,f.clientWidth,h,c,c-h),j=hn(_,p,k,f.clientHeight,u,g,g-u),N=I===null?0:Ve(I,h,c)-Ve(I,C,y),ie=j===null?0:Ve(j,u,g)-Ve(j,p,k),K=pl(m)?st(N,-f.scrollWidth+f.clientWidth-f.scrollLeft,-f.scrollLeft):st(N,-f.scrollLeft,f.scrollWidth-f.clientWidth-f.scrollLeft),ee=st(ie,-f.scrollTop,f.scrollHeight-f.clientHeight-f.scrollTop);n.push([f,{left:f.scrollLeft+K,top:f.scrollTop+ee,behavior:t.behavior}]),u=Math.max(u-ee,p),c=Math.min(c-K,y),g=Math.min(g-ee,k),h=Math.max(h-K,C)}return n},Cl=(e,t,n)=>{const o=t||{};if(!wo(o.behavior))throw new TypeError(xo("scrollIntoView","Element",o.behavior));xl(e,o).forEach(([a,i])=>{ml(a,i,n)})},$l="_paragraph_gh666_1",El={paragraph:$l},Ol=({content:e,isCurrent:t})=>{if(e.text===`
`)return s(E,{});let n;t||(n={opacity:"70%"});let o=e.tags.CLASS||"";return Array.isArray(o)&&(o=o.join(" ")),s("div",{style:n,class:x(El.paragraph,o),children:s(Pe,{content:e.text,isActive:t})})};function Oo(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{const a=new Image;a.onload=r,a.onerror=r,a.src=e(o)}));return Promise.allSettled(n)}const Tl="_loader_dxx0f_1",Al={loader:Tl},To=({delay:e=300})=>{const[t,n]=$(!1);return P(()=>{const o=setTimeout(()=>n(!0),e);return()=>clearTimeout(o)},[e]),s("div",{class:Al.loader,style:{opacity:t?1:0}})},Ll=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:r}=w(),[a,i]=$(!1),l=Bo(null),d=v(_=>{o(!0),setTimeout(()=>{Cl(l.current,{behavior:_,block:"start"},{duration:300})},100)},[o]);return P(()=>{a&&t&&d(n?"instant":"smooth")},[a,t,n,d]),P(()=>{(async()=>{await Oo(r,e.images),i(!0)})()},[e,i,r]),s("div",{class:x(rl.scene,"atrament-scene",t&&a&&"animation_appear"),ref:l,children:a?e.content.map((_,u)=>s(E,{children:[_.images.map((c,g)=>s(Mt,{src:r(c)},`${g}-${c}`)),s(Ol,{isCurrent:t,content:_})]},`paragraph-${e.uuid}-${u}`)):s(To,{})})},Pl="_choice_button_1j6o7_1",jl="_choice_active_1j6o7_25",Ml="_choice_inactive_1j6o7_49",Il="_buttons_separate_1j6o7_71",Vl="_buttons_grouped_1j6o7_78",Fl="_left_aligned_1j6o7_100",Dl="_right_aligned_1j6o7_104",ne={choice_button:Pl,choice_active:jl,choice_inactive:Ml,buttons_separate:Il,buttons_grouped:Vl,left_aligned:Fl,right_aligned:Dl},Hl=({choice:e,chosen:t,handleClick:n})=>{const{metadata:o}=L(["metadata"]),r=t!==null,a=t===e.id,i=()=>{r||n(e.id)},l=r?a?ne.choice_active:ne.choice_inactive:"",d=o.choices?.includes("grouped")?ne.buttons_grouped:ne.buttons_separate,_=o.choices?.includes("left")?ne.left_aligned:o.choices?.includes("right")?ne.right_aligned:"";let u=e.tags.CLASS;Array.isArray(u)&&(u=u.join(" "));const c=x(ne.choice_button,d,_,l,"atrament-choice",u);return s("button",{class:c,onClick:i,disabled:e.disabled,children:[o.choices?.includes("numbered")?s(E,{children:[e.id+1,". "]}):"",s(Pe,{content:e.choice})]})},Rl="_choice_prompt_jwni3_1",zl={choice_prompt:Rl},Nl=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=w(),[a,i]=$(null),l=t&&t.choices?t.choices.length:-1,d=v(u=>{const c=l>1?350:150;i(u),setTimeout(()=>{setTimeout(()=>{i(null),n(!1),o(u),r()},c)},0)},[o,r,n,l]),_=v(u=>{const c=+u.key;u.target.tagName.toLowerCase()!=="input"&&l>0&&c>0&&c<=l&&!t.choices[c-1].disabled&&d(t.choices[c-1].id)},[l,d,t.choices]);return Ye(_),s(E,{children:[t.tags?.PROMPT&&s("div",{class:x(zl.choice_prompt,"atrament-prompt"),children:t.tags.PROMPT}),s("div",{children:t.choices.map((u,c)=>s(Hl,{choice:u,chosen:a,handleClick:d},`${e}-${c}`))})]})},Bl="_container_1pyc1_10",Gl="_circle_1pyc1_18",Ul="_circle_empty_1pyc1_53",rt={container:Bl,circle:Gl,circle_empty:Ul},vn=()=>document.getElementsByClassName("atrament-container-scene")[0],bn=()=>document.getElementsByClassName("atrament-container-choices")[0],yn=({setReady:e,withChoice:t=!1,delay:n=0,animation:o=0,clickable:r=0})=>{const{makeChoice:a,continueStory:i}=w(),[l,d]=$(!1),_=F(),u=v(()=>{setTimeout(()=>{e(!1),t&&a(0),i()},0)},[a,i,e,t]),c=v(f=>{(f.key===" "||f.key==="Enter")&&u()},[u]),g=v(()=>(document.addEventListener("keydown",c,!1),vn().addEventListener("click",u,!1),bn().addEventListener("click",u,!1),0),[u,c]),h=v(()=>(document.removeEventListener("keydown",c,!1),vn().removeEventListener("click",u,!1),bn().removeEventListener("click",u,!1),0),[u,c]);return P(()=>{const f=setTimeout(g,r*1e3),m=setTimeout(()=>d(!0),o*1e3),b=n?setTimeout(u,n*1e3):void 0;return()=>{clearTimeout(m),clearTimeout(f),clearTimeout(b),h()}},[g,h,u,d,r,n,o]),s("div",{class:rt.container,children:l?s("div",{class:x(rt.circle,n&&rt.circle_empty),title:_.translate("game.click-to-continue")}):""})};function Wl(e){const t={delay:0,animation:0,clickable:0};if(e.startsWith("(")){const n=yo(e.replace(/[()]/g,""));Object.entries(n).forEach(([o,r])=>t[o]=r),t.continue&&(t.delay=t.continue)}else e?t.delay=e:t.animation=3;return t}const Kl=()=>{const{atrament:e}=w();return s(At,{onClick:async()=>{await e.game.removeSave(),J("/")},children:s(S,{id:"game.end"})})},Yl=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t?.choices?t.choices.length:-1;if(r===1){const a=t.choices[0].choice.match(/^(|>>>(\d*|\(.+?\)))$/);if(a){const i=Wl(a[2]);return s(yn,{setReady:n,withChoice:!0,delay:i.delay,animation:i.animation,clickable:i.clickable})}}else if(r===0)return t.canContinue?s(yn,{setReady:n,animation:3}):s(Kl,{});return o||!t?s(E,{}):s(Nl,{currentScene:t,setReady:n},e)},ql=()=>{const e=L(["scenes","metadata"]),[t,n]=$(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext||!!e.scenes[o]?.tags.HYPERTEXT,a=`choices-${e.scenes[o]?.uuid}`;return s(Xe,{children:[s(el,{align:e.metadata.scenes_align,children:e.scenes.map((i,l)=>s(Ll,{scene:i,isCurrent:l===o,isSingle:o===0,readyHandler:n},i.uuid))}),s(ol,{isReady:t,children:s(Yl,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},a)},a)]})},Xl="_text_paragraph_1j0l5_1",Jl={text_paragraph:Xl},Ao=({children:e})=>s("div",{class:x(Jl.text_paragraph,"atrament-text-paragraph"),children:e}),Ql="_overlay_container_1lt26_1",Zl="_overlay_header_1lt26_11",eu="_overlay_title_1lt26_24",tu="_overlay_content_1lt26_33",nu="_button_back_1lt26_48",se={overlay_container:Ql,overlay_header:Zl,overlay_title:eu,overlay_content:tu,button_back:nu};function ou({children:e,title:t,closeOverlay:n}){return s("div",{class:se.overlay_container,children:[s("div",{class:se.overlay_header,children:[s("button",{class:se.button_back,onClick:n,children:s(jr,{})}),t&&s("div",{class:se.overlay_title,children:t})]}),s("div",{class:x(se.overlay_content,"atrament-overlay"),children:s(Xe,{children:e})})]})}function su({children:e,title:t,closeOverlay:n}){return s(Ct,{children:[s($t,{onClick:n}),s(Et,{children:s(Xe,{children:[s(G,{children:s("div",{class:se.overlay_header,children:[s("div",{class:se.overlay_title,children:t}),s(Ke,{onClick:n})]})}),s(G,{children:e})]})})]})}const ru=()=>{const{getAssetPath:e}=w(),{overlay:t,closeOverlay:n}=lo(),[o,r]=$(!1),a=async()=>{await Oo(e,Qn(t.content)),r(!0)};if(P(()=>{t.current&&a()}),!t.current)return s(E,{});const i=o?t.content.map((l,d)=>s(Ao,{children:s(Pe,{content:l})},d)):s(To,{});return t.display==="modal"?s(su,{title:t.title,closeOverlay:n,children:i}):s(ou,{title:t.title,closeOverlay:n,children:i})},au=()=>{const{atrament:e}=w(),t=L([ue]),n=v(()=>e.state.setKey(ue,null),[e]),o=v(r=>{r.key==="Escape"&&n()},[n]);if(Ye(o),t[ue])return s(ro,{close:n,message:t[ue]})},iu=()=>{const{getAssetPath:e}=w(),t=L(["game"]);let n;t.game.background&&(n={"background-image":`url(${e(t.game.background)})`,"background-size":"cover","background-position":"center"});const o=t.game.background_page;return P(()=>{vo(o,e)},[o,e]),s(Le,{style:n,children:[s(Pt,{}),s(au,{}),s(Yc,{}),s(ru,{}),s(ql,{})]})},cu=()=>{const{evaluateInkFunction:e}=w(),{metadata:t}=L(["metadata"]),[n,o]=$(" "),r=()=>J("/");return P(()=>{const a=e(t.about);a.output?o(a.output):o(a.error)},[t.about,o,e]),s(Le,{children:[s(Pt,{isHomeScreen:!0}),s(Xe,{children:[s(Ot,{children:[s(G,{children:" "}),s(G,{children:n.split(`
`).map(a=>s(Ao,{children:s(Pe,{isActive:!0,content:a})},a))})]}),s(G,{children:s(R,{onClick:r,children:s(S,{id:"main.menu"})},"mainmenu")})]})]})};function lu(){const{atrament:e}=w(),t=v(n=>{n.url==="/"&&n.previous&&e.game.clear()},[e.game]);return s(co,{history:wr(),onChange:t,children:[s($i,{path:"/"}),s(iu,{path:"/game"}),s(cu,{path:"/about"})]})}function uu(){const[e,t]=$(null),[n,o]=$(null);return P(()=>{(async()=>{const{default:a}=await le(async()=>{const{default:l}=await import("./atrament-xkDB97FC.js").then(d=>d.i);return{default:l}},[],import.meta.url),{Story:i}=await le(async()=>{const{Story:l}=await import("./inkjs-BOXbcKQS.js");return{Story:l}},[],import.meta.url);try{await Cs(a,i),t(a)}catch(l){console.error(l),o(l.message)}})()},[]),s(Jo,{language:Zo,locales:Ls,children:s(xt.Provider,{value:e,children:s(Ms,{children:e?s(lu,{}):n?s(Le,{children:s(ro,{message:n})}):s(_r,{})})})})}async function kn(){const t=window.screenX<-1e4||window.screenX>window.screen.availWidth+1e4,n=window.screenY<-1e4||window.screenY>window.screen.availHeight+1e4;(t||n)&&(console.warn("fixing unmaximize bug",window.screenX,window.screenY),await window.Neutralino.window.center())}window.Neutralino&&(addEventListener("resize",kn),addEventListener("DOMContentLoaded",kn));Fo(s(uu,{}),document.getElementById("app"));export{le as _};
