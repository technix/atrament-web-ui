(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var Ne,C,_o,de,dn,fo,ho,go,Ft,Et,$t,po,Ie={},mo=[],Er=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Fe=Array.isArray;function Y(e,t){for(var n in t)e[n]=t[n];return e}function Vt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ne(e,t,n){var o,r,a,i={};for(a in t)a=="key"?o=t[a]:a=="ref"?r=t[a]:i[a]=t[a];if(arguments.length>2&&(i.children=arguments.length>3?Ne.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)i[a]===void 0&&(i[a]=e.defaultProps[a]);return Ae(e,i,o,r,null)}function Ae(e,t,n,o,r){var a={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++_o,__i:-1,__u:0};return r==null&&C.vnode!=null&&C.vnode(a),a}function E(e){return e.children}function X(e,t){this.props=e,this.context=t}function we(e,t){if(t==null)return e.__?we(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?we(e):null}function vo(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return vo(e)}}function Ot(e){(!e.__d&&(e.__d=!0)&&de.push(e)&&!Xe.__r++||dn!=C.debounceRendering)&&((dn=C.debounceRendering)||fo)(Xe)}function Xe(){for(var e,t,n,o,r,a,i,c=1;de.length;)de.length>c&&de.sort(ho),e=de.shift(),c=de.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,a=[],i=[],t.__P&&((n=Y({},o)).__v=o.__v+1,C.vnode&&C.vnode(n),Ht(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,a,r??we(o),!!(32&o.__u),i),n.__v=o.__v,n.__.__k[n.__i]=n,ko(a,n,i),o.__e=o.__=null,n.__e!=r&&vo(n)));Xe.__r=0}function bo(e,t,n,o,r,a,i,c,u,_,d){var l,g,f,h,p,m,v,b=o&&o.__k||mo,y=t.length;for(u=$r(n,t,b,u,y),l=0;l<y;l++)(f=n.__k[l])!=null&&(g=f.__i==-1?Ie:b[f.__i]||Ie,f.__i=l,m=Ht(e,f,g,r,a,i,c,u,_,d),h=f.__e,f.ref&&g.ref!=f.ref&&(g.ref&&zt(g.ref,null,f),d.push(f.ref,f.__c||h,f)),p==null&&h!=null&&(p=h),(v=!!(4&f.__u))||g.__k===f.__k?u=yo(f,u,e,v):typeof f.type=="function"&&m!==void 0?u=m:h&&(u=h.nextSibling),f.__u&=-7);return n.__e=p,u}function $r(e,t,n,o,r){var a,i,c,u,_,d=n.length,l=d,g=0;for(e.__k=new Array(r),a=0;a<r;a++)(i=t[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?i=e.__k[a]=Ae(null,i,null,null,null):Fe(i)?i=e.__k[a]=Ae(E,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?i=e.__k[a]=Ae(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):e.__k[a]=i,u=a+g,i.__=e,i.__b=e.__b+1,c=null,(_=i.__i=Or(i,n,u,l))!=-1&&(l--,(c=n[_])&&(c.__u|=2)),c==null||c.__v==null?(_==-1&&(r>d?g--:r<d&&g++),typeof i.type!="function"&&(i.__u|=4)):_!=u&&(_==u-1?g--:_==u+1?g++:(_>u?g--:g++,i.__u|=4))):e.__k[a]=null;if(l)for(a=0;a<d;a++)(c=n[a])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=we(c)),So(c,c));return o}function yo(e,t,n,o){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=yo(r[a],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=we(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Se(e,t){return t=t||[],e==null||typeof e=="boolean"||(Fe(e)?e.some(function(n){Se(n,t)}):t.push(e)),t}function Or(e,t,n,o){var r,a,i,c=e.key,u=e.type,_=t[n],d=_!=null&&(2&_.__u)==0;if(_===null&&c==null||d&&c==_.key&&u==_.type)return n;if(o>(d?1:0)){for(r=n-1,a=n+1;r>=0||a<t.length;)if((_=t[i=r>=0?r--:a++])!=null&&(2&_.__u)==0&&c==_.key&&u==_.type)return i}return-1}function fn(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Er.test(t)?n:n+"px"}function Ue(e,t,n,o,r){var a,i;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||fn(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||fn(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(go,"$1")),i=t.toLowerCase(),t=i in e||t=="onFocusOut"||t=="onFocusIn"?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=Ft,e.addEventListener(t,a?$t:Et,a)):e.removeEventListener(t,a?$t:Et,a);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function hn(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Ft++;else if(t.t<n.u)return;return n(C.event?C.event(t):t)}}}function Ht(e,t,n,o,r,a,i,c,u,_){var d,l,g,f,h,p,m,v,b,y,S,O,P,V,D,J,le,H=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),a=[c=t.__e=n.__e]),(d=C.__b)&&d(t);e:if(typeof H=="function")try{if(v=t.props,b="prototype"in H&&H.prototype.render,y=(d=H.contextType)&&o[d.__c],S=d?y?y.props.value:d.__:o,n.__c?m=(l=t.__c=n.__c).__=l.__E:(b?t.__c=l=new H(v,S):(t.__c=l=new X(v,S),l.constructor=H,l.render=Pr),y&&y.sub(l),l.state||(l.state={}),l.__n=o,g=l.__d=!0,l.__h=[],l._sb=[]),b&&l.__s==null&&(l.__s=l.state),b&&H.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Y({},l.__s)),Y(l.__s,H.getDerivedStateFromProps(v,l.__s))),f=l.props,h=l.state,l.__v=t,g)b&&H.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),b&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(b&&H.getDerivedStateFromProps==null&&v!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,S),t.__v==n.__v||!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,S)===!1){for(t.__v!=n.__v&&(l.props=v,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),O=0;O<l._sb.length;O++)l.__h.push(l._sb[O]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,S),b&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,h,p)})}if(l.context=S,l.props=v,l.__P=e,l.__e=!1,P=C.__r,V=0,b){for(l.state=l.__s,l.__d=!1,P&&P(t),d=l.render(l.props,l.state,l.context),D=0;D<l._sb.length;D++)l.__h.push(l._sb[D]);l._sb=[]}else do l.__d=!1,P&&P(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++V<25);l.state=l.__s,l.getChildContext!=null&&(o=Y(Y({},o),l.getChildContext())),b&&!g&&l.getSnapshotBeforeUpdate!=null&&(p=l.getSnapshotBeforeUpdate(f,h)),J=d,d!=null&&d.type===E&&d.key==null&&(J=wo(d.props.children)),c=bo(e,Fe(J)?J:[J],t,n,o,r,a,i,c,u,_),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),m&&(l.__E=l.__=null)}catch(Z){if(t.__v=null,u||a!=null)if(Z.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else{for(le=a.length;le--;)Vt(a[le]);Tt(t)}else t.__e=n.__e,t.__k=n.__k,Z.then||Tt(t);C.__e(Z,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Tr(n.__e,t,n,o,r,a,i,u,_);return(d=C.diffed)&&d(t),128&t.__u?void 0:c}function Tt(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Tt)}function ko(e,t,n){for(var o=0;o<n.length;o++)zt(n[o],n[++o],n[++o]);C.__c&&C.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){C.__e(a,r.__v)}})}function wo(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Fe(e)?e.map(wo):Y({},e)}function Tr(e,t,n,o,r,a,i,c,u){var _,d,l,g,f,h,p,m=n.props||Ie,v=t.props,b=t.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(_=0;_<a.length;_++)if((f=a[_])&&"setAttribute"in f==!!b&&(b?f.localName==b:f.nodeType==3)){e=f,a[_]=null;break}}if(e==null){if(b==null)return document.createTextNode(v);e=document.createElementNS(r,b,v.is&&v),c&&(C.__m&&C.__m(t,a),c=!1),a=null}if(b==null)m===v||c&&e.data==v||(e.data=v);else{if(a=a&&Ne.call(e.childNodes),!c&&a!=null)for(m={},_=0;_<e.attributes.length;_++)m[(f=e.attributes[_]).name]=f.value;for(_ in m)if(f=m[_],_!="children"){if(_=="dangerouslySetInnerHTML")l=f;else if(!(_ in v)){if(_=="value"&&"defaultValue"in v||_=="checked"&&"defaultChecked"in v)continue;Ue(e,_,null,f,r)}}for(_ in v)f=v[_],_=="children"?g=f:_=="dangerouslySetInnerHTML"?d=f:_=="value"?h=f:_=="checked"?p=f:c&&typeof f!="function"||m[_]===f||Ue(e,_,f,m[_],r);if(d)c||l&&(d.__html==l.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),bo(t.type=="template"?e.content:e,Fe(g)?g:[g],t,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,i,a?a[0]:n.__k&&we(n,0),c,u),a!=null)for(_=a.length;_--;)Vt(a[_]);c||(_="value",b=="progress"&&h==null?e.removeAttribute("value"):h!=null&&(h!==e[_]||b=="progress"&&!h||b=="option"&&h!=m[_])&&Ue(e,_,h,m[_],r),_="checked",p!=null&&p!=e[_]&&Ue(e,_,p,m[_],r))}return e}function zt(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){C.__e(r,n)}}function So(e,t,n){var o,r;if(C.unmount&&C.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||zt(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){C.__e(a,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&So(o[r],t,n||typeof e.type!="function");n||Vt(e.__e),e.__c=e.__=e.__e=void 0}function Pr(e,t,n){return this.constructor(e,n)}function Pt(e,t,n){var o,r,a,i;t==document&&(t=document.documentElement),C.__&&C.__(e,t),r=(o=!1)?null:t.__k,a=[],i=[],Ht(t,e=t.__k=ne(E,null,[e]),r||Ie,Ie,t.namespaceURI,r?null:t.firstChild?Ne.call(t.childNodes):null,a,r?r.__e:t.firstChild,o,i),ko(a,e,i)}function Ar(e,t,n){var o,r,a,i,c=Y({},e.props);for(a in e.type&&e.type.defaultProps&&(i=e.type.defaultProps),t)a=="key"?o=t[a]:a=="ref"?r=t[a]:c[a]=t[a]===void 0&&i!=null?i[a]:t[a];return arguments.length>2&&(c.children=arguments.length>3?Ne.call(arguments,2):n),Ae(e.type,c,o||e.key,r||e.ref,null)}function Qe(e){function t(n){var o,r;return this.getChildContext||(o=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&o.forEach(function(i){i.__e=!0,Ot(i)})},this.sub=function(a){o.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){o&&o.delete(a),i&&i.call(a)}}),n.children}return t.__c="__cC"+po++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}Ne=mo.slice,C={__e:function(e,t,n,o){for(var r,a,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(c){e=c}throw e}},_o=0,X.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Y({},this.state),typeof e=="function"&&(e=e(Y({},n),this.props)),e&&Y(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ot(this))},X.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ot(this))},X.prototype.render=E,de=[],fo=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ho=function(e,t){return e.__v.__b-t.__v.__b},Xe.__r=0,go=/(PointerCapture)$|Capture$/i,Ft=0,Et=hn(!1),$t=hn(!0),po=0;var Lr=0;function s(e,t,n,o,r,a){t||(t={});var i,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?i=t[c]:u[c]=t[c];var _={type:e,props:u,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Lr,__i:-1,__u:0,__source:r,__self:a};if(typeof e=="function"&&(i=e.defaultProps))for(c in i)u[c]===void 0&&(u[c]=i[c]);return C.vnode&&C.vnode(_),_}const Ir="modulepreload",Mr=function(e,t){return new URL(e,t).href},gn={},me=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let _=function(d){return Promise.all(d.map(l=>Promise.resolve(l).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const i=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");r=_(n.map(d=>{if(d=Mr(d,o),d in gn)return;gn[d]=!0;const l=d.endsWith(".css"),g=l?'[rel="stylesheet"]':"";if(o)for(let h=i.length-1;h>=0;h--){const p=i[h];if(p.href===d&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${g}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":Ir,l||(f.as="script"),f.crossOrigin="",f.href=d,u&&f.setAttribute("nonce",u),document.head.appendChild(f),l)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return r.then(i=>{for(const c of i||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};var xe,M,ut,pn,Me=0,xo=[],j=C,mn=j.__b,vn=j.__r,bn=j.diffed,yn=j.__c,kn=j.unmount,wn=j.__;function et(e,t){j.__h&&j.__h(M,e,Me||t),Me=0;var n=M.__H||(M.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function x(e){return Me=1,jr(Eo,e)}function jr(e,t,n){var o=et(xe++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):Eo(void 0,t),function(c){var u=o.__N?o.__N[0]:o.__[0],_=o.t(u,c);u!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=M,!M.__f)){var r=function(c,u,_){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(g){return!!g.__c});if(d.every(function(g){return!g.__N}))return!a||a.call(this,c,u,_);var l=o.__c.props!==c;return d.forEach(function(g){if(g.__N){var f=g.__[0];g.__=g.__N,g.__N=void 0,f!==g.__[0]&&(l=!0)}}),a&&a.call(this,c,u,_)||l};M.__f=!0;var a=M.shouldComponentUpdate,i=M.componentWillUpdate;M.componentWillUpdate=function(c,u,_){if(this.__e){var d=a;a=void 0,r(c,u,_),a=d}i&&i.call(this,c,u,_)},M.shouldComponentUpdate=r}return o.__N||o.__}function A(e,t){var n=et(xe++,3);!j.__s&&Co(n.__H,t)&&(n.__=e,n.u=t,M.__H.__h.push(n))}function tt(e){return Me=5,Ut(function(){return{current:e}},[])}function Ut(e,t){var n=et(xe++,7);return Co(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function w(e,t){return Me=8,Ut(function(){return e},t)}function ie(e){var t=M.context[e.__c],n=et(xe++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(M)),t.props.value):e.__}function Rr(){for(var e;e=xo.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ke),e.__H.__h.forEach(At),e.__H.__h=[]}catch(t){e.__H.__h=[],j.__e(t,e.__v)}}j.__b=function(e){M=null,mn&&mn(e)},j.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),wn&&wn(e,t)},j.__r=function(e){vn&&vn(e),xe=0;var t=(M=e.__c).__H;t&&(ut===M?(t.__h=[],M.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(Ke),t.__h.forEach(At),t.__h=[],xe=0)),ut=M},j.diffed=function(e){bn&&bn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(xo.push(t)!==1&&pn===j.requestAnimationFrame||((pn=j.requestAnimationFrame)||Dr)(Rr)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ut=M=null},j.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ke),n.__h=n.__h.filter(function(o){return!o.__||At(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],j.__e(o,n.__v)}}),yn&&yn(e,t)},j.unmount=function(e){kn&&kn(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Ke(o)}catch(r){t=r}}),n.__H=void 0,t&&j.__e(t,n.__v))};var Sn=typeof requestAnimationFrame=="function";function Dr(e){var t,n=function(){clearTimeout(o),Sn&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);Sn&&(t=requestAnimationFrame(n))}function Ke(e){var t=M,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),M=t}function At(e){var t=M;e.__c=e.__(),M=t}function Co(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Eo(e,t){return typeof t=="function"?t(e):t}var oe,Lt=function(e,t){return Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},Lt(e,t)},xn=(function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return(function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}Lt(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)})(t,e),t.is=function(n){return n instanceof t},t})(Error),Nr=(function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e})();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(oe||(oe={}));var Fr=["{","}",","],Vr=(function(){function e(t){this.input=new Nr(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile((function(o){return!(function(r){return Fr.includes(r)})(o)})).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:oe.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:oe.Text,value:this.readWhile((function(t){return t!=="{"&&t!=="}"}))}},e.prototype.readVariableType=function(){var t=this.readWhile((function(n){return n!==","})).trim();return t==="plural"?oe.Plural:t==="select"?oe.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e})();function Hr(e,t,n){for(var o=new Vr(t),r=[],a=function(i){var c=i.options,u=i.type,_=i.value;if(u!==oe.Variable)if(c)if(u!==oe.Select)try{r.concat(c[new Intl.PluralRules(e).select(n[_])].map(a))}catch{r.concat(c.other.map(a))}else r.concat((c[n[_]]||c.other).map(a));else r.push(_);else r.push(n[_])};!o.input.done;)a(o.next());return r}var $o=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,a){return new Intl.DateTimeFormat(n.language,a).format(r)},this.formatNumber=function(r,a){return new Intl.NumberFormat(n.language,a).format(r)},this.translate=function(r,a){a===void 0&&(a={});var i=n.getMessageById(r,a.defaultMessage);if(typeof i=="string")try{return Hr(n.language,i,a).join("")}catch{n.onError(new xn(r,n.language))}return i+""},this.getMessageById=function(r,a){if(!n.memo[r]){var i=n.messages[r];i===void 0&&(i=r.split(".").reduce((function(c,u){return c?c[u]:void 0}),n.messages)),typeof i!="string"&&(n.onError(new xn(r,n.language)),i=a||r),n.memo[r]=i}return n.memo[r]};var o=t.find((function(r){return r.language===e}));this.language=e,this.messages=o?o.messages:{}};function zr(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var Bt=Qe({language:"",locales:[],setLanguage:function(){},translator:new $o}),Ur=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,a=x(n);A((function(){a[1](n)}),[n]);var i=new $o(a[0],o);return r&&(i.onError=r),ne(Bt.Provider,{value:{language:a[0],locales:o,setLanguage:a[1],translator:i}},t)};function R(e){var t=ie(Bt);return t.translator}var T=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,a=zr(e,["children","html","id","tagName"]),i=ie(Bt).translator.translate(n,a);return t?ne(r,{dangerouslySetInnerHTML:{__html:i}}):ne(E,null,i)};const Gt=Qe(null),Ve=Qe(!0),re=window.$atramentConfig,Oo="2.4.2",To=re.game?.zip?re.game?.zip:re.game?.path,Po=re.game.script,Br=["Atrament://",window.location.host,window.location.pathname,To,"/",Po].join(""),Gr=re.language||"en",Ao=re.locale||"en-US",Lo=re.theme,It=re.font,nt=100,ot=10,Mt=nt-ot*3,jt=nt+ot*5,Wr=50,Le="ERROR",K="OVERLAY",be="TOOLBAR",Io="__DEFAULT__",Mo="$story_path",Wt="background",qt="background_page",qr=["title","author","theme","font","observe","persist","sessions","autosave","saves","load_from_checkpoints","continue_maximally","single_scene","scenes_align","choices","hypertext","toolbar","about","cover","background","debug","allow_external_function_fallbacks"],Kr=["IMAGE","BACKGROUND","PAGE_BACKGROUND","CLEAR","AUDIO","AUDIOLOOP","PLAY_SOUND","STOP_SOUND","PLAY_MUSIC","STOP_MUSIC","CHECKPOINT","SAVEGAME","RESTART","RESTART_FROM_CHECKPOINT","CLASS","SHUFFLE_CHOICES","PROMPT","HYPERTEXT","CHOICES","AUTO_CHOICE"],Pe='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',jo={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, system-ui, sans-serif, ${Pe}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, sans-serif, ${Pe}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", serif, ${Pe}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", monospaced, ${Pe}`},Yr=300,Xr=150,Jr=350,Zr=100,Qr=300,Kt=200;function es(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}const Ce=(e,t)=>document.documentElement.style.setProperty(e,t),ts=e=>document.documentElement.style.removeProperty(e);let he={...jo};(async()=>{{const e={},t=Object.assign({"../resources/fonts/fira-sans/index.js":()=>me(()=>import("./index-BASecepJ.js"),[],import.meta.url).then(n=>n.default),"../resources/fonts/lora/index.js":()=>me(()=>import("./index-DB00SuhN.js"),[],import.meta.url).then(n=>n.default),"../resources/fonts/merriweather/index.js":()=>me(()=>import("./index-Cyl7-obA.js"),[],import.meta.url).then(n=>n.default),"../resources/fonts/opendyslexic/index.js":()=>me(()=>import("./index-Bob30uJD.js"),[],import.meta.url).then(n=>n.default)});await Promise.all(Object.values(t).map(n=>n().then(o=>{o.name&&(e[o.name]=`${o.name}, ${o.fallback||"serif"}, ${Pe}`)}))),Object.keys(e).sort().forEach(n=>he[n]=e[n])}})();const ns=e=>Ce("--font-face-game",he[e]||he[It]),os=e=>Ce("--font-face-ui",he[e]||jo.System);function rs(e){const t=e.state.get().metadata.theme||Lo;e.settings.get("theme")||e.settings.set("theme",t)}function ss(e){const t=e.state.get().metadata.font||It;e.settings.get("font")||e.settings.set("font",t),os(It)}const Ro="dark",Do={"bg-color":"#4c3b4d","fg-color":"#FCFCFC","shade-color":"rgba(255, 255, 255, 0.1)","font-color":"#EEEEEE","accent-bg-color":"#4c3b4d","accent-fg-color":"#F7567C","accent-inverse-color":"#EEEEEE","border-radius":"0.5rem","border-radius-inline":"0.25rem"},as={name:Ro,theme:Do},is=Object.freeze(Object.defineProperty({__proto__:null,default:as,name:Ro,theme:Do},Symbol.toStringTag,{value:"Module"})),No="light",Fo={"bg-color":"#FCFCFC","fg-color":"#5D576B","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#FCFCFC","accent-fg-color":"#F7567C","accent-inverse-color":"#FCFCFC","border-radius":"0.5rem","border-radius-inline":"0.25rem"},cs={name:No,theme:Fo},ls=Object.freeze(Object.defineProperty({__proto__:null,default:cs,name:No,theme:Fo},Symbol.toStringTag,{value:"Module"})),Vo="sepia",Ho={"bg-color":"#ffeedb","fg-color":"#4c3b4d","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#ffeedb","accent-fg-color":"#a53850","accent-inverse-color":"#ffeedb","border-radius":"0.5rem","border-radius-inline":"0.25rem"},us={name:Vo,theme:Ho},_s=Object.freeze(Object.defineProperty({__proto__:null,default:us,name:Vo,theme:Ho},Symbol.toStringTag,{value:"Module"})),ye={},ke={},ds=Object.assign({"../resources/themes/dark.json":is,"../resources/themes/light.json":ls,"../resources/themes/sepia.json":_s});Object.values(ds).map(({default:e})=>{e&&(ke[e.name]=e.theme)});["light","sepia","dark"].forEach(e=>{ke[e]&&(ye[e]=ke[e],delete ke[e])});Object.keys(ke).sort().forEach(e=>ye[e]=ke[e]);function fs(e){!e||!ye[e]||Object.entries(ye[e]||ye[Lo]).forEach(([t,n])=>Ce(`--${t}`,n))}function hs(e){Object.entries({theme:(n,o)=>fs(o),font:(n,o)=>ns(o),fontSize:(n,o)=>Ce("--font-size-game",`${o}%`),animation:(n,o)=>o?ts("--animation-disabled"):Ce("--animation-disabled","0s"),fullscreen:(n,o)=>{e.interfaces.platform.setFullscreen(o,r=>{e.settings.set("fullscreen",r),e.settings.save()})}}).forEach(([n,o])=>e.settings.defineHandler(n,o))}function gs(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got ${typeof e}`);if(e.length===0)return[];const t=JSON.parse(JSON.stringify(e));for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}function Cn(e,t={}){let n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\].*?\\[\\/${e}\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\](.*?)\\[\\/${e}\\]`,"i");return t.single&&(n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\]`,"i")),{matcher:n,parser:o}}const ps=[Cn("img"),Cn("picture")];function zo(e){if(!e)return[];const t={};return e.forEach(n=>{ps.forEach(o=>{n?.match(o.matcher)?.forEach(r=>{const a=r.match(o.parser);t[a[2]]=!0})})}),Object.keys(t)}function ms(e){const t=e.tags?.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game",Wt,t));const n=e.tags?.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game",qt,n))}function vs(e){e.tags?.SHUFFLE_CHOICES&&(e.choices=gs(e.choices))}function bs(e){const t=zo(e.content?.map(n=>n.text));e.images.push(...t)}function ys(e){[ms,vs,bs].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function ks(e){Object.values(Object.assign({})).map(({default:n})=>e.ink.story().BindExternalFunction(n.name,n.external.bind(e),n.lookaheadSafe||!1))}function Uo(e){e.state.setKey(K,{current:null,content:"",title:null,display:null})}function ws(e,t){const n=()=>{try{let r=e.ink.evaluateFunction(t,[],!0);e.state.setKey(be,r.output)}catch(r){e.ink.story().onError(r.toString())}},o=()=>Promise.resolve().then(n);e.on("game/start",o),e.on("game/continueStory",o),e.on("ink/evaluateFunction",r=>{r.function!==t&&o()})}function Ss(e){const t=e.state.get().metadata;t.toolbar?ws(e,t.toolbar):t.title?e.state.setKey(be,t.title):e.state.setKey(be,Io),Uo(e)}function xs(e){Uo(e)}async function Cs(e,t){e.on("*",(o,r)=>console.log(`%c Atrament > ${o} `,"color: #111111; background-color: #7FDBFF;",r)),hs(e),await e.init(t,{applicationID:Br,settings:{fullscreen:!1,animation:!0,mute:!1,volume:Wr,fontSize:nt}}),e.on("game/initInkStory",()=>Ss(e)),e.on("game/start",()=>xs(e)),await e.game.init(To,Po),await e.game.initInkStory(),rs(e),ss(e),ys(e),ks(e),es(e);const n=e.state.get().metadata;n.title&&e.interfaces.platform.setTitle(n.title),n.allow_external_function_fallbacks&&(e.ink.story().allowExternalFunctionFallbacks=!0),e.ink.onError(o=>e.state.setKey(Le,o)),n.debug&&e.on("game/continueStory",()=>{const o=e.ink.story().state.previousPathString;e.state.setSubkey("game",Mo,o)})}const Bo="de",Go={yes:"Ja",no:"Nein",cancel:"Abbrechen",back:"Zurück","default.title":"Atrament UI","default.author":"Testanwendung","main.menu":"Hauptmenü","main.newgame":"Neues Spiel","main.loadgame":"Spiel laden","main.savegame":"Spiel speichern","main.continue":"Fortsetzen","main.emptyslot":"Leerer Speicherstand","main.continue-session":"Spiel fortsetzen {session}","main.autosave":"Automatisch gespeichert: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"Neuer Speicherstand","main.delete-session":"Diese Sitzung löschen?","main.delete-save":"Diesen Speicherstand löschen?","main.confirm-load":"Dieses Spiel laden?","main.confirm-save":"Diesen Speicherstand überschreiben?","main.settings":"Einstellungen","main.about":"Über","main.exit":"Beenden","icon.menu":"Menü","icon.back":"Zurück","icon.debugger":"Debugger","game.end":"Ende","game.save-and-quit":"Speichern und beenden","game.quit":"Spiel beenden","game.click-to-continue":"Klicke, um fortzufahren","settings.fullscreen":"Vollbild","settings.animations":"Animationen","settings.sound":"Ton","settings.appearance":"Darstellung","themes.light":"Hell","themes.sepia":"Sepia","themes.dark":"Dunkel","font.sampleText":"Franz jagt im komplett verwahrlosten Taxi quer durch Bayern. äöüßé ÄÖÜẞÉ",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink-Datei","debug.info.story-seed":"Story-Seed","debug.info.current-turn-index":"Aktueller Zug: Index","debug.info.path":"Pfad","debug.global-tags":"Globale Tags","debug.scene-tags":"Szene Tags","debug.unknown-tag":"Unbekannter Tag","debug.variables":"Variablen","debug.variables.filter-by-name":"Nach Namen filtern","debug.variables.name":"Name","debug.variables.value":"Wert","debug.variables.cancel":"Abbrechen","debug.variables.save":"Speichern","debug.visits":"Aufrufe","debug.visits.path":"Pfad","debug.visits.count":"Anzahl","debug.go-to-path":"Gehe zu Pfad","debug.functions":"Funktionen","debug.functions.arguments":"Argumente","debug.functions.arguments_placeholder":'JSON-formatierte Argumente, z. B. ["arg1", 5]',"debug.functions.run-function":"Funktion ausführen","debug.functions.returned-value":"Rückgabewert","debug.functions.output":"Ausgabe","about.components":"Komponenten und Bibliotheken","about.iftf_support":"Erstellt mit Unterstützung der {iftf}"},Es={language:Bo,messages:Go},$s=Object.freeze(Object.defineProperty({__proto__:null,default:Es,language:Bo,messages:Go},Symbol.toStringTag,{value:"Module"})),Wo="en",qo={yes:"Yes",no:"No",cancel:"Cancel",back:"Go back","default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.loadgame":"Load game","main.savegame":"Save game","main.continue":"Continue","main.emptyslot":"Empty slot","main.continue-session":"Continue game {session}","main.autosave":"Autosave: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"New save","main.delete-session":"Delete this session?","main.delete-save":"Delete this saved game?","main.confirm-load":"Load this game?","main.confirm-save":"Overwrite this save?","main.settings":"Settings","main.about":"About","main.exit":"Exit","icon.menu":"Menu","icon.back":"Back","icon.debugger":"Debugger","game.end":"The end","game.save-and-quit":"Save game and quit","game.quit":"Quit game","game.click-to-continue":"Click to continue","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz.",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink file","debug.info.story-seed":"Story seed","debug.info.current-turn-index":"Current turn index","debug.info.path":"Path","debug.global-tags":"Global tags","debug.scene-tags":"Scene tags","debug.unknown-tag":"Unknown tag","debug.variables":"Variables","debug.variables.filter-by-name":"Filter by name","debug.variables.name":"Name","debug.variables.value":"Value","debug.variables.cancel":"Cancel","debug.variables.save":"Save","debug.visits":"Visits","debug.visits.path":"Path","debug.visits.count":"Count","debug.go-to-path":"Go to path","debug.functions":"Functions","debug.functions.arguments":"Arguments","debug.functions.arguments_placeholder":'JSON-formatted agruments, i.e. ["arg1", 5]',"debug.functions.run-function":"Run function","debug.functions.returned-value":"Returned value","debug.functions.output":"Output","about.components":"Components and libraries","about.iftf_support":"Made with the support of the {iftf}"},Os={language:Wo,messages:qo},Ts=Object.freeze(Object.defineProperty({__proto__:null,default:Os,language:Wo,messages:qo},Symbol.toStringTag,{value:"Module"})),Ko="ua",Yo={yes:"Так",no:"Ні",cancel:"Скасувати",back:"Назад","default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.loadgame":"Завантажити гру","main.savegame":"Зберегти гру","main.continue":"Продовжити","main.emptyslot":"Порожній слот","main.continue-session":"Продовжити гру {session}","main.autosave":"Автозбереження: {date}","main.checkpoint":"Контрольна точка","main.checkpoint-named":"Контрольна точка: {name}","main.new-save":"Нове збереження","main.delete-session":"Видалити сесію?","main.delete-save":"Видалити збережену гру?","main.confirm-load":"Завантажити цю гру?","main.confirm-save":"Перезаписати це збереження?","main.settings":"Налаштування","main.about":"Про гру","main.exit":"Вихід","icon.menu":"Меню","icon.back":"Назад","icon.debugger":"Налагодження","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","game.quit":"Вийти з гри","game.click-to-continue":"Натисни, щоб продовжити","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб.",debug:"Налагодження","debug.info":"Інформація","debug.info.ink-file":"Ink-скрипт","debug.info.story-seed":"RNG-сід історії","debug.info.current-turn-index":"Індекс поточного ходу","debug.info.path":"Поточний шлях","debug.global-tags":"Глобальні теги","debug.scene-tags":"Теги сцени","debug.unknown-tag":"Невідомий тег","debug.variables":"Змінні","debug.variables.filter-by-name":"Фільтр за ім'ям","debug.variables.name":"Ім'я","debug.variables.value":"Значення","debug.variables.cancel":"Скасувати","debug.variables.save":"Зберегти","debug.visits":"Візити","debug.visits.path":"Шлях","debug.visits.count":"Переходи","debug.go-to-path":"Перейти до","debug.functions":"Функції","debug.functions.arguments":"Аргументи","debug.functions.arguments_placeholder":'Аргументи у JSON-форматі, наприклад: ["arg1", 5]',"debug.functions.run-function":"Виконати функцію","debug.functions.returned-value":"Повернене значення","debug.functions.output":"Вивід","about.components":"Компоненти та бібліотеки","about.iftf_support":"Зроблено за підтримки фонду {iftf}"},Ps={language:Ko,messages:Yo},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ps,language:Ko,messages:Yo},Symbol.toStringTag,{value:"Module"})),Ls=Object.assign({"../resources/locales/de.json":$s,"../resources/locales/en.json":Ts,"../resources/locales/ua.json":As}),Is=Object.values(Ls);function Xo(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Xo(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function k(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Xo(e))&&(o&&(o+=" "),o+=t);return o}const Ms="_application_wrapper_qw2kb_1",js={application_wrapper:Ms},Rs=({children:e})=>s("div",{class:k(js.application_wrapper,"atrament-ui-app"),children:e}),Ds="_error_modal_content_njm9y_1",Ns="_error_message_njm9y_8",En={error_modal_content:Ds,error_message:Ns},Fs="_container_modal_fhjmv_1",Vs={container_modal:Fs},Yt=({children:e,className:t=""})=>s("div",{class:k(Vs.container_modal,t,"atrament-container-modal"),children:e}),Hs="_backdrop_rne3i_1",zs={backdrop:Hs},Xt=({onClick:e,className:t=""})=>s("div",{class:k(zs.backdrop,t,"atrament-backdrop"),onClick:e}),Us="_modal_1mg2r_1",Bs={modal:Us},Jt=({children:e,className:t=""})=>s("div",{class:k(Bs.modal,t,"atrament-modal"),children:e}),Gs="_close_11jsg_1",Ws={close:Gs},rt=({onClick:e})=>s("div",{class:Ws.close,children:s("button",{onClick:e,title:"Close",children:"✕"})}),qs="_block_5hv3c_1",Ks="_block_start_5hv3c_6",Ys="_block_end_5hv3c_10",_t={block:qs,block_start:Ks,block_end:Ys},te=({children:e,align:t=null})=>{const n=k(_t.block,t==="start"&&_t.block_start,t==="end"&&_t.block_end,"atrament-block");return s("div",{class:n,children:e})},dt=()=>{},Jo=({close:e=dt,message:t})=>s(Yt,{children:[s(Xt,{onClick:dt}),s(Jt,{children:s("div",{class:En.error_modal_content,children:[e!==dt?s(rt,{onClick:e}):"",s(te,{children:s("p",{class:En.error_message,children:t})})]})})]}),Xs="_container_4l08p_1",Js={container:Xs},He=({children:e,style:t={}})=>s("div",{style:t,class:k(Js.container,"atrament-container"),children:e}),Zs="_loading_obrk7_1",Qs="_progressbar_obrk7_9",$n={loading:Zs,progressbar:Qs},ea="_container_flex_at0vo_1",ta={container_flex:ea},Zt=({cssClass:e="",children:t})=>s("div",{class:k(ta.container_flex,e,"atrament-flex-container"),children:t}),na="_sk_cube_grid_fv0g6_1",oa="_sk_cube1_fv0g6_17",ra="_sk_cube2_fv0g6_18",sa="_sk_cube3_fv0g6_19",aa="_sk_cube4_fv0g6_20",ia="_sk_cube5_fv0g6_21",ca="_sk_cube6_fv0g6_22",la="_sk_cube7_fv0g6_23",ua="_sk_cube8_fv0g6_24",_a="_sk_cube9_fv0g6_25",q={sk_cube_grid:na,sk_cube1:oa,sk_cube2:ra,sk_cube3:sa,sk_cube4:aa,sk_cube5:ia,sk_cube6:ca,sk_cube7:la,sk_cube8:ua,sk_cube9:_a},da=()=>s("div",{class:q.sk_cube_grid,children:[s("div",{class:q.sk_cube1}),s("div",{class:q.sk_cube2}),s("div",{class:q.sk_cube3}),s("div",{class:q.sk_cube4}),s("div",{class:q.sk_cube5}),s("div",{class:q.sk_cube6}),s("div",{class:q.sk_cube7}),s("div",{class:q.sk_cube8}),s("div",{class:q.sk_cube9})]}),fa="_progress_frame_15ixd_1",ha="_progress_bar_15ixd_8",ga="_progress_bar_solid_15ixd_15",pa="_standard_15ixd_19",ma="_accent_15ixd_23",va="_borderless_15ixd_27",ba="_progress_content_15ixd_31",ue={progress_frame:fa,progress_bar:ha,progress_bar_solid:ga,standard:pa,accent:ma,borderless:va,progress_content:ba},Qt=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let a=r?(r-n)*100/(o-n):0;a>100&&(a=100),a<0&&(a=0);const i=k(ue.progress_frame,e.border===!1&&ue.borderless,"atrament-tag-progressbar",e.class),c=k(ue.progress_bar,e.style==="accent"?ue.accent:ue.standard,e.solid&&ue.progress_bar_solid,"atrament-tag-progressbar-gauge");return s("div",{class:i,children:[s("div",{class:c,style:{width:`${a}%`}}),s("div",{class:k(ue.progress_content,"atrament-tag-progressbar-content"),children:[t,e.display==="thin"?"":s(E,{children:" "})]})]})},ya=({loadedPercent:e=0})=>s(He,{children:s(Zt,{children:s("div",{class:k($n.loading,"atrament-loading"),children:[s(da,{}),s("div",{class:k($n.progressbar,"atrament-loading-progressbar"),children:e>0?s(Qt,{options:{display:"thin",solid:!0,value:e}}):""})]})})});var ka={};function Be(e,t){for(var n in t)e[n]=t[n];return e}function wa(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,a=e.match(r),i={};if(a&&a[1])for(var c=a[1].split("&"),u=0;u<c.length;u++){var _=c[u].split("=");i[decodeURIComponent(_[0])]=decodeURIComponent(_.slice(1).join("="))}e=Rt(e.replace(r,"")),t=Rt(t||"");for(var d=Math.max(e.length,t.length),l=0;l<d;l++)if(t[l]&&t[l].charAt(0)===":"){var g=t[l].replace(/(^:|[+*?]+$)/g,""),f=(t[l].match(/[+*?]+$/)||ka)[0]||"",h=~f.indexOf("+"),p=~f.indexOf("*"),m=e[l]||"";if(!m&&!p&&(f.indexOf("?")<0||h)){o=!1;break}if(i[g]=decodeURIComponent(m),h||p){i[g]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){o=!1;break}return(n.default===!0||o!==!1)&&i}function Sa(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function xa(e,t){return e.index=t,e.rank=(function(n){return n.props.default?0:Rt(n.props.path).map(Ca).join("")})(e),e.props}function Rt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Ca(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Ea={},fe=[],On=[],z=null,Zo={url:en()},$a=Qe(Zo);function en(){var e;return""+((e=z&&z.location?z.location:z&&z.getCurrentLocation?z.getCurrentLocation():typeof location<"u"?location:Ea).pathname||"")+(e.search||"")}function se(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),(function(n){for(var o=fe.length;o--;)if(fe[o].canRoute(n))return!0;return!1})(e)&&(function(n,o){o===void 0&&(o="push"),z&&z[o]?z[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)})(e,t?"replace":"push"),Qo(e)}function Qo(e){for(var t=!1,n=0;n<fe.length;n++)fe[n].routeTo(e)&&(t=!0);return t}function Oa(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return se(t)}}function Ta(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Pa(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Oa(t))return Ta(e)}while(t=t.parentNode)}}var Tn=!1;function er(e){e.history&&(z=e.history),this.state={url:e.url||en()}}Be(er.prototype=new X,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Se(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Tn||(Tn=!0,z||addEventListener("popstate",function(){Qo(en())}),addEventListener("click",Pa)),fe.push(this),z&&(this.u=z.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),fe.splice(fe.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(xa).sort(Sa);for(var n=0;n<e.length;n++){var o=e[n],r=wa(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,a=t.url,i=this.c,c=this.g(Se(e.children),a);if(c&&(o=Ar(c[0],Be(Be({url:a,matches:n=c[1]},n),{key:void 0,ref:void 0}))),a!==(i&&i.url)){Be(Zo,i=this.c={url:a,previous:i&&i.url,current:o,path:o?o.props.path:null,matches:n}),i.router=this,i.active=o?[o]:[];for(var u=On.length;u--;)On[u]({});typeof r=="function"&&r(i)}return ne($a.Provider,{value:i},o)}});function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Je.apply(null,arguments)}var ve;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ve||(ve={}));var Pn=function(e){return e};function Aa(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,a=o.map(function(y){var S=Pn(Je({pathname:"/",search:"",hash:"",state:null,key:In()},typeof y=="string"?Mn(y):y));return S}),i=An(r??a.length-1,0,a.length-1),c=ve.Pop,u=a[i],_=Ln(),d=Ln();function l(y){return typeof y=="string"?y:La(y)}function g(y,S){return S===void 0&&(S=null),Pn(Je({pathname:u.pathname,search:"",hash:""},typeof y=="string"?Mn(y):y,{state:S,key:In()}))}function f(y,S,O){return!d.length||(d.call({action:y,location:S,retry:O}),!1)}function h(y,S){c=y,u=S,_.call({action:c,location:u})}function p(y,S){var O=ve.Push,P=g(y,S);function V(){p(y,S)}f(O,P,V)&&(i+=1,a.splice(i,a.length,P),h(O,P))}function m(y,S){var O=ve.Replace,P=g(y,S);function V(){m(y,S)}f(O,P,V)&&(a[i]=P,h(O,P))}function v(y){var S=An(i+y,0,a.length-1),O=ve.Pop,P=a[S];function V(){v(y)}f(O,P,V)&&(i=S,h(O,P))}var b={get index(){return i},get action(){return c},get location(){return u},createHref:l,push:p,replace:m,go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(S){return _.push(S)},block:function(S){return d.push(S)}};return b}function An(e,t,n){return Math.min(Math.max(e,t),n)}function Ln(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function In(){return Math.random().toString(36).substr(2,8)}function La(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,a=e.hash,i=a===void 0?"":a;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function Mn(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Ia(e,t,n){let o=new Set(t).add(void 0);return e.listen((r,a,i)=>{o.has(i)&&n(r,a,i)})}function Ma(e,t={}){let[,n]=x({}),[o]=x(e.get());return A(()=>{o!==e.get()&&n({})},[]),A(()=>{let r,a,i,c=()=>{r||(r=1,a=setTimeout(()=>{r=void 0,n({})}))};return t.keys?i=Ia(e,t.keys,c):i=e.listen(c),()=>{i(),clearTimeout(a)}},[e,""+t.keys]),e.get()}const $=()=>{const e=ie(Gt),t=w(f=>{try{return f()}catch(h){return e.ink.story().onError&&e.ink.story().onError(h.toString()),null}},[e]),n=w(f=>{if(!f)return null;const h=`${f}`;return h.startsWith("http://")||h.startsWith("https://")?h:e.game.getAssetPath(h)},[e]),o=w((f,h)=>{e.settings.set(f,h),e.settings.save()},[e]),r=w((...f)=>e.state.setKey(...f),[e]),a=w((...f)=>e.state.setSubkey(...f),[e]),i=w((f,h=[])=>{let p={};try{p=e.ink.evaluateFunction(f,h,!0)}catch(m){e.ink.story().onError&&e.ink.story().onError(m.toString()),p.error=m.toString()}return p},[e]),c=w((...f)=>t(()=>e.ink.setVariable(...f)),[e,t]),u=w((...f)=>t(()=>e.ink.getVariable(...f)),[e,t]),_=w((...f)=>t(()=>e.game.makeChoice(...f)),[e,t]),d=w((...f)=>t(()=>e.game.continueStory(...f)),[e,t]),l=w(()=>{e.state.setSubkey("game",Wt,null),e.state.setSubkey("game",qt,null)},[e]),g=w(f=>{e.state.setKey(Le,f)},[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:_,continueStory:d,getAssetPath:n,updateSettings:o,setStateKey:r,setStateSubkey:a,evaluateInkFunction:i,setInkVariable:c,getInkVariable:u,resetBackground:l,throwAtramentError:g}},L=(e=void 0)=>{const t=ie(Gt);return Ma(t.store,{keys:e})},st=()=>{const{evaluateInkFunction:e,setStateKey:t}=$(),n=L([K]),o=w((c,u,_)=>{let d=`${u}`;const l=u.split(`
`),f=l.shift().match(/\[title\](.+?)\[\/title\](.*)$/i);f&&(d=[f[2],...l].join(`
`)),t(K,{current:c,title:f?f[1]:null,content:d,display:_||null})},[t]),r=w(()=>{const c=n[K].current;if(c){const u=e(c);o(c,u.output,n[K].display)}},[n,o,e]),a=w(()=>{t(K,{current:null,content:"",title:null,display:null})},[t]),i=w((c,u)=>{const _=e(c);_.output?o(c,_.output,u==="modal"?"modal":"overlay"):r()},[e,r,o]);return{refreshOverlay:r,closeOverlay:a,setOverlayContent:o,execContentFunction:i,overlay:{current:n[K].current,content:n[K].content.split(`
`),title:n[K].title,display:n[K].display}}},tr=()=>{const[e,t]=x(!1),[n,o]=x(!1),{atrament:r,canResume:a}=$(),{metadata:i}=L(["metadata"]),c=async()=>{const u=await a();t(!!u);const d=(await r.game.listSaves()).filter(l=>i.load_from_checkpoints&&l.type===r.game.SAVE_CHECKPOINT?!0:l.type===r.game.SAVE_GAME);o(d.length>0)};return A(()=>{c()}),[e,n]};function at(e){A(()=>(document.addEventListener("keydown",e,!1),()=>document.removeEventListener("keydown",e,!1)),[e])}function je(e=!1){const[t,n]=x(e),o=w(()=>n(i=>!i),[]),r=w(()=>n(!0),[]),a=w(()=>n(!1),[]);return[t,o,n,r,a]}function ja(){const{atrament:e}=$(),t=L([Le]),n=w(()=>e.state.setKey(Le,null),[e]);return[t[Le],n]}const tn=()=>{const[e,t]=ja(),n=w(o=>{o.key==="Escape"&&t()},[t]);if(at(n),e)return s(Jo,{close:t,message:e})},Ra="_menu_toggle_1d5hk_1",Da="_menu_content_1d5hk_15",jn={menu_toggle:Ra,menu_content:Da},Na="_atrament_version_1rpps_1",Fa="_atrament_about_1rpps_14",Va="_atrament_appversion_1rpps_20",ft={atrament_version:Na,atrament_about:Fa,atrament_appversion:Va},Ha=({onClick:e})=>s("div",{class:ft.atrament_version,onClick:e,children:[s("div",{class:ft.atrament_about,children:"?"}),s("div",{class:ft.atrament_appversion,children:["Atrament ",Oo]})]}),za=()=>s("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:[s("title",{children:s(T,{id:"icon.menu"})}),s("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})]}),Ua=()=>s("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),Ba=()=>s("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),Ga=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",role:"img",children:[s("title",{children:s(T,{id:"icon.back"})}),s("path",{d:"M0 0h24v24H0z",fill:"none"}),s("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),Wa=()=>s("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100%",height:"100%",viewBox:"0 0 122.88 101.878","enable-background":"new 0 0 122.88 101.878",role:"img",children:[s("title",{children:s(T,{id:"icon.debugger"})}),s("g",{children:s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M64.406,12.143c-2.672-1.042-5.431-1.586-8.276-1.586 c-4.279,0-7.798,1.369-10.557,4.084L21.765,38.427l2.477,2.499l-9.037,9.101L0,34.799l9.036-9.037l2.802,2.737L35.515,4.844 C38.773,1.608,42.271,0,46.007,0C52.285,0,58.411,4.041,64.406,12.143L64.406,12.143z M100.535,5.408 c2.588,0,5.072,0.441,7.384,1.25l-5.874,6.358c-13.345,14.437,1.715,22.79,14.986,12.879l5.119-3.822 c0.475,1.813,0.729,3.717,0.729,5.679c0,12.341-10.003,22.345-22.345,22.345c-4.026,0-7.804-1.065-11.066-2.929L78.616,58.689 c10.214,9.778,20.431,19.554,30.646,29.33l-13.858,13.858C85.74,91.8,76.08,81.718,66.422,71.635L47.394,91.833 c-1.445,2.471-4.126,4.132-7.194,4.132c-4.599,0-8.329-3.729-8.329-8.329c0-1.988,0.699-3.815,1.862-5.247l-0.012-0.012 l0.073-0.063c0.601-0.723,1.322-1.342,2.132-1.828L57.327,62.14L30.941,34.504L41.89,23.556 c10.157,9.756,18.402,17.582,28.572,27.324l11.864-10.172c-2.604-3.654-4.136-8.125-4.136-12.955 C78.19,15.411,88.193,5.408,100.535,5.408L100.535,5.408z M28.63,10.362L17.747,21.245l-2.086-2.085L26.544,8.276L28.63,10.362 L28.63,10.362z",style:"fill:var(--accent-fg-color)"})})]}),qa="_debug_toggle_18o7z_1",Ka="_debug_container_18o7z_15",Ya="_container_18o7z_31",Xa="_container_scrollable_18o7z_38",Ja="_input_div_18o7z_64",Za="_button_18o7z_68",Qa="_input_18o7z_64",ei="_errormsg_18o7z_92",ti="_unknown_tag_18o7z_100",I={debug_toggle:qa,debug_container:Ka,container:Ya,container_scrollable:Xa,input_div:Ja,button:Za,input:Qa,errormsg:ei,unknown_tag:ti},ni="_collapse_19tvh_1",oi="_collapse_title_19tvh_6",ri="_collapse_children_19tvh_12",ht={collapse:ni,collapse_title:oi,collapse_children:ri},ce=({title:e,children:t,open:n=!1})=>s("details",{class:ht.collapse,open:n,children:[s("summary",{class:ht.collapse_title,children:e}),s("div",{class:ht.collapse_children,children:t})]}),si="_table_8q9c9_1",ai="_table_fixed_8q9c9_13",ii="_cell_full_8q9c9_23",ci="_cell_padding_8q9c9_31",li="_thead_border_8q9c9_39",ui="_tbody_border_8q9c9_47",_i="_caption_8q9c9_63",di="_page_8q9c9_89",fi="_page_active_8q9c9_97",W={table:si,table_fixed:ai,cell_full:ii,cell_padding:ci,thead_border:li,tbody_border:ui,caption:_i,page:di,page_active:fi},ge=({columns:e=[],data:t=[],pageSize:n=0,border:o=!0,padding:r=!0,columnWidth:a=[],fixed:i=!1,className:c=""})=>{const[u,_]=x(0);A(()=>{_(0)},[t]);let d=1,l=0,g=t.length;n&&(d=Math.ceil(t.length/n),l=u*n,g=l+n);const f=p=>{_(+p.target.value)},h=t.slice(l,g);return s("table",{class:k(W.table,i&&W.table_fixed,c),children:[n>0&&s("caption",{class:W.caption,children:[...Array(d).keys()].map(p=>s("button",{onClick:f,value:p,class:p===u?W.page_active:W.page,children:p+1},p))}),e.length>0&&s("thead",{children:s("tr",{class:o?W.thead_border:"",children:e.map((p,m)=>{const v=p.style||{};return a[m]&&(v.width=a[m]),s("th",{class:r?W.cell_padding:W.cell_full,style:v,children:p.name},m)})})}),h.length>0&&s("tbody",{children:h.map((p,m)=>s("tr",{class:o?W.tbody_border:"",children:p.map((v,b)=>{const y={};return a[b]&&(y.width=a[b]),s("td",{class:r?W.cell_padding:W.cell_full,style:y,children:v},b)})},m))})]})},hi=()=>{const{atrament:e}=$(),t=R(),o=e.ink.story().state,r=e.state.get().game,a=[[t.translate("debug.info.ink-file"),`${r.$path}/${r.$file}`],[t.translate("debug.info.story-seed"),o.storySeed],[t.translate("debug.info.current-turn-index"),o.currentTurnIndex],[t.translate("debug.info.path"),r[Mo]]];return s(ce,{title:t.translate("debug.info"),children:s(ge,{data:a,fixed:!0})})},gi=e=>{const t=[],n=e.ink.story().mainContentContainer.namedContent;for(const o of n.keys()){o!=="global decl"&&t.push(o);for(const r of n.get(o).namedContent.keys())t.push(`${o}.${r}`)}return t.sort()},pi=({closeFn:e})=>{const{atrament:t}=$(),{scenes:n}=L(["scenes"]),o=R(),[r,a]=x([]),[i,c]=x(""),[u,_]=x(""),[d,l]=x("");if(A(()=>{a(gi(t))},[t]),n.length===0)return"";const g=m=>{_(m.target.value),c(m.target.value),l("")},f=()=>{if(u){try{t.ink.goTo(u),t.game.continueStory(),e()}catch(m){l(m.toString())}_(""),c("")}},h=m=>{const v=m.target.getAttribute("data-path");_(v),c(v)},p=r.filter(m=>m.includes(i));return s(E,{children:s(ce,{title:`${o.translate("debug.go-to-path")}`,children:[s("div",{class:I.container,children:[s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",value:u,onInput:g})}),s("div",{children:[s("button",{class:I.button,onClick:f,children:">>>"})," ",s("br",{})]})]}),s("div",{class:I.container_scrollable,children:s("ul",{children:p.map(m=>s("li",{children:s("a",{href:"#",onClick:h,"data-path":m,children:m})},m))})}),s("div",{class:I.container,children:s("span",{class:I.errormsg,children:d})})]})})},mi=()=>{const{atrament:e}=$(),t=R(),n=e.ink.getGlobalTags(),o=Object.keys(n).map(r=>qr.includes(r)?[r,n[r]]:[s("span",{class:I.unknown_tag,title:t.translate("debug.unknown-tag"),children:r},r),n[r]]);return s(ce,{title:`${t.translate("debug.global-tags")} [${o.length}]`,children:s(ge,{data:o,fixed:!0})})},vi=()=>{const{atrament:e}=$(),{scenes:t}=L(["scenes"]),n=R(),o=e.ink.getGlobalTags(),r=t[t.length-1]?.tags;if(!r)return"";const a=Object.keys(r).filter(i=>!Object.prototype.hasOwnProperty.call(o,i)).map(i=>Kr.includes(i)?[i,r[i]]:[s("span",{class:I.unknown_tag,title:n.translate("debug.unknown-tag"),children:i},i),r[i]]);return s(ce,{title:`${n.translate("debug.scene-tags")} [${a.length}]`,children:s(ge,{data:a,fixed:!0})})},bi="_button_pofct_1",yi="_button_close_pofct_33",ki="_input_pofct_65",wi="_toggle_pofct_91",Si="_listview_pofct_103",ae={button:bi,button_close:yi,input:ki,toggle:wi,listview:Si},xi="_checkbox_wrapper_1bc4s_1",Ci="_checkbox_1bc4s_1",Rn={checkbox_wrapper:xi,checkbox:Ci},it=({name:e,enabled:t,onChange:n})=>s("div",{class:Rn.checkbox_wrapper,children:s("input",{type:"checkbox",class:Rn.checkbox,checked:t,onChange:n,name:e,id:e})}),Ei=({value:e,setNewValue:t})=>{const n=o=>t(+o.target.value);return s("input",{class:ae.input,type:"number",value:e,onInput:n})},$i=({value:e,setNewValue:t})=>{const n=o=>t(o.target.value);return s("input",{class:ae.input,type:"text",value:e,onInput:n})},Oi=({name:e,value:t,setNewValue:n})=>{const o=r=>n(r.target.checked);return s("div",{class:ae.toggle,children:s(it,{enabled:t,onChange:o,name:e})})},Ti=({name:e,value:t})=>{if(e===t._originNames[0]&&t.size===0){const o=[...t.origins[0]._itemNameToValues.keys()];return s("span",{class:ae.listview,children:JSON.stringify(o).replace(/,/g,", ")})}const n=[];return t.forEach((o,r)=>n.push([JSON.parse(r),o])),s("ul",{class:ae.listview,children:n.map(([o,r])=>s("li",{children:[s("abbr",{title:o.originName,children:o.itemName}),": ",r]},o))})},Pi=({name:e,value:t})=>{const{getInkVariable:n,setInkVariable:o}=$(),r=R(),[a,i]=x(!1),[c,u]=x(!1),[_,d]=x(!1);A(()=>{const h=n(e);u(h),d(h)},[e,n,u,d]);const l=h=>{h.preventDefault(),i(!0)},g=()=>i(!1),f=()=>{_!==c&&(o(e,_),u(_)),i(!1)};return a?s(E,{children:[s("button",{class:ae.button_close,onClick:g,title:r.translate("debug.variables.cancel"),children:"X"}),typeof t=="number"&&s(Ei,{value:_,setNewValue:d}),typeof t=="string"&&s($i,{value:_,setNewValue:d}),typeof t=="boolean"&&s(Oi,{name:e,value:_,setNewValue:d}),s("button",{class:ae.button,onClick:f,title:r.translate("debug.variables.save"),children:">"})]}):s(E,{children:typeof _=="object"?s(Ti,{name:e,value:_}):s("button",{class:ae.button,onClick:l,children:JSON.stringify(_)})})};function Ai(e){const t=e.ink.getVariables();return Object.entries(t).sort((o,r)=>o[0]>r[0]?0:-1)}const Li=({variables:e})=>{const t=R(),n=e.map((o,r)=>[o[0],s(Pi,{name:o[0],value:o[1]},r)]);return s(ge,{columns:[{name:t.translate("debug.variables.name"),style:{width:"50%","text-align":"left"}},{name:t.translate("debug.variables.value"),style:{"text-align":"left"}}],data:n,pageSize:10,fixed:!0})},Ii=()=>{const[e,t]=x(""),{atrament:n}=$(),o=R(),r=Ai(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(ce,{title:`${o.translate("debug.variables")} [${r.length}]`,children:[s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(Li,{variables:r})]})};function Mi(e){const t=e.ink.story().state._visitCounts,n=[];for(let o of t)n.push(o);return n.sort((o,r)=>o[0]>r[0]?0:-1)}const ji=()=>{const[e,t]=x(""),{atrament:n}=$(),o=R(),r=Mi(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(ce,{title:o.translate("debug.visits"),children:[s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(ge,{columns:[{name:o.translate("debug.visits.path"),style:{width:"75%","text-align":"left"}},{name:o.translate("debug.visits.count"),style:{"text-align":"left"}}],data:r,pageSize:10,fixed:!0})]})},Ri=()=>{const{atrament:e}=$(),t=R(),[n,o]=x(""),[r,a]=x(null),[i,c]=x(""),[u,_]=x(null),d=h=>{let p=[];try{p=JSON.parse(h)}catch{}return p},l=h=>{o(h.target.value),c(""),_(null)},g=h=>{a(h.target.value),c(""),_(null)},f=()=>{if(n)try{const h=e.ink.evaluateFunction(n,d(r),!0);_(h),c("")}catch(h){c(h.toString())}};return s(ce,{title:t.translate("debug.functions"),children:[s("div",{class:I.container,children:[s("div",{children:[s(T,{id:"debug.functions.run-function"}),":"]}),s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",value:n,onInput:l})})]}),s("div",{class:I.container,children:[s("div",{children:[s(T,{id:"debug.functions.arguments"}),":"]}),s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",value:r,onInput:g,placeholder:t.translate("debug.functions.arguments_placeholder"),title:t.translate("debug.functions.arguments_placeholder")})}),s("div",{children:[s("button",{class:I.button,onClick:f,children:">>>"})," ",s("br",{})]})]}),s("div",{class:I.container,children:s("pre",{children:n&&`${n}(${r?d(r).map(JSON.stringify).join(", "):""})`})}),i&&s("div",{class:I.container,children:s("span",{class:I.errormsg,children:i})}),s("div",{class:I.container,children:u&&s(ge,{data:[[t.translate("debug.functions.returned-value"),JSON.stringify(u.returned)],[t.translate("debug.functions.output"),s("pre",{children:u.output},"output")]],fixed:!0})})]})},Di=()=>{const[e,t]=je(!1),[n,o]=x(!1),r=R(),a=w(i=>{i.code==="Backquote"&&(n?(t(),o(!1)):(o(!0),setTimeout(()=>o(!1),1e3)))},[t,n,o]);return at(a),e?s("div",{class:I.debug_container,children:[s(rt,{onClick:t}),s(hi,{}),s(mi,{}),s(vi,{}),s(Ii,{}),s(ji,{}),s(Ri,{}),s(pi,{closeFn:t})]}):s("button",{class:I.debug_toggle,onClick:t,title:r.translate("debug"),children:s(Wa,{})})},Ni=()=>{const{metadata:e}=L(["metadata"]);return e.debug?s(Di,{}):s(E,{})},Fi="_header_1gyyv_1",Vi="_infobox_1gyyv_19",Dn={header:Fi,infobox:Vi},Hi=""+new URL("atrament-logo-D7LOrOOl.png",import.meta.url).href,zi=""+new URL("iftf-logo-BWs-h1t3.png",import.meta.url).href,nr=[["Atrament Core","https://github.com/technix/atrament-core"],["Atrament Web","https://github.com/technix/atrament-web"],["Atrament Web UI","https://github.com/technix/atrament-web-ui"],["InkJS","https://github.com/y-lohse/inkjs"],["Preact","https://preactjs.com/"],["Howler","https://howlerjs.com/"],["Nanostores","https://github.com/nanostores/nanostores"],["LocalForage","https://github.com/localForage/localForage"],["fflate","https://github.com/101arrowz/fflate"],["mustache.js","https://github.com/janl/mustache.js"]],Ui=nr.length-1,Nn=({href:e,children:t})=>s("a",{href:e,target:"_blank",rel:"noreferrer",children:t}),Bi='<a href="https://iftechfoundation.org/" target="_blank" rel="noreferrer">Interactive Fiction Technology Foundation</a>',Gi=({onClick:e})=>s(te,{children:s("div",{onClick:n=>n.target.tagName.toLowerCase()==="a"?"":e(n),children:[s("div",{class:Dn.header,children:[s("img",{src:Hi}),s("h1",{children:["Atrament ",s("small",{children:Oo})]})]}),s("p",{children:s(Nn,{href:"https://atrament.ink/",children:"https://atrament.ink/"})}),s("p",{children:[s(T,{id:"about.components"}),": ",nr.map((n,o)=>s("span",{children:[s(Nn,{href:n[1],children:n[0]}),o===Ui?".":","," "]},n[1]))]}),s("div",{class:Dn.infobox,children:[s("img",{src:zi}),s("p",{children:s(T,{id:"about.iftf_support",html:!0,iftf:Bi})})]})]})}),Wi="_menu_button_qbk92_1",qi="_accented_button_qbk92_28",Fn={menu_button:Wi,accented_button:qi},N=({children:e,key:t,onClick:n,accented:o=!1,attributes:r={},className:a=""})=>s("button",{onClick:n,class:k(Fn.menu_button,o&&Fn.accented_button,"atrament-menu-button",a),...r,children:e},t),Ki="_header_929fb_1",Yi="_header_align_929fb_8",Vn={header:Ki,header_align:Yi},ct=({children:e})=>s("div",{class:k(Vn.header,"atrament-header"),children:s("div",{class:Vn.header_align,children:e})}),Xi={break:"_break_jkn3k_1"},$e=()=>s("div",{class:Xi.break}),Ji="_container_1ob4b_1",Zi="_prompt_1ob4b_7",Qi="_menu_item_1ob4b_15",ec="_small_1ob4b_49",tc="_is_deletable_1ob4b_54",nc="_delete_button_1ob4b_58",oc="_delete_item_1ob4b_79",U={container:Ji,prompt:Zi,menu_item:Qi,small:ec,is_deletable:tc,delete_button:nc,delete_item:oc},Hn=({prompt:e,onAccept:t,onReject:n,attributes:o})=>s("div",{class:U.container,children:[s("div",{class:U.prompt,children:e}),s("button",{onClick:t,class:k(U.menu_item,U.delete_item,U.small),...o,children:s(T,{id:"yes"})}),s("button",{onClick:n,class:k(U.menu_item,U.small),...o,children:s(T,{id:"no"})})]}),nn=({children:e,key:t,onSelect:n,isDisabled:o=!1,isDeletable:r=!1,onDelete:a=()=>{},deletePrompt:i="",hasConfirmation:c=!1,confirmPrompt:u="",attributes:_={}})=>{const[d,,,l,g]=je(!1),[f,,,h,p]=je(!1),m=b=>{a(b),g()},v=b=>{n(b),p()};return f?s(Hn,{prompt:u,onAccept:v,onReject:p,attributes:_}):d?s(Hn,{prompt:i,onAccept:m,onReject:g,attributes:_}):s("div",{class:U.container,children:[s("button",{onClick:c?h:n,disabled:o,class:k(U.menu_item,r&&U.is_deletable),..._,children:e},t),r&&!o&&s("button",{onClick:l,class:k(U.menu_item,U.delete_button),..._,children:"✕"},t)]})},rc=e=>new Date(e).toLocaleString(Ao),or=({loadGame:e,hasConfirmation:t=!1})=>{const[n,o]=x([]),r=R(),{atrament:a}=$(),{metadata:i}=L(["metadata"]),c=w(async()=>{const d=await a.game.listSaves(),l=[];if(i.load_from_checkpoints){const f=d.filter(h=>h.type===a.game.SAVE_CHECKPOINT).map(h=>({...h,slot:typeof h.name=="boolean"?r.translate("main.checkpoint"):r.translate("main.checkpoint-named",{name:h.name})}));f.length&&l.push(...f)}const g=d.filter(f=>f.type===a.game.SAVE_GAME).map(f=>({...f,slot:rc(f.date)}));l.push(...g),o(l)},[a,i,r]),u=w(async d=>{const l=d.target.getAttribute("data-save");await e(l)},[e]),_=w(async d=>{const l=d.target.getAttribute("data-save");await a.game.removeSave(l),await c()},[a,c]);return A(()=>{(async()=>c())()},[c]),s(E,{children:n.map(d=>s(nn,{onSelect:u,onDelete:_,isDisabled:!d.type,isDeletable:d.type,deletePrompt:r.translate("main.delete-save"),hasConfirmation:t,confirmPrompt:r.translate("main.confirm-load"),attributes:{"data-save":d.id},children:d.slot},d.name))})},sc=e=>new Date(e).toLocaleString(Ao),ac=({saveGame:e})=>{const[t,n]=x([]),o=R(),{atrament:r}=$(),{metadata:a}=L(["metadata"]),i=a.saves?+a.saves:0,c=w(async()=>{const l=(await r.game.listSaves()).filter(g=>g.type===r.game.SAVE_GAME).map(g=>({...g,slot:sc(g.date)}));l.length<i&&l.push({name:l.length+1,slot:o.translate("main.new-save")}),n(l)},[r,o,i]),u=w(async d=>{const l=d.target.getAttribute("data-savename");await e(l),await c()},[e,c]),_=w(async d=>{const l=d.target.getAttribute("data-saveid");await r.game.removeSave(l),await c()},[r,c]);return A(()=>{(async()=>c())()},[c]),s(E,{children:t.map(d=>s(nn,{onSelect:u,onDelete:_,isDisabled:!1,isDeletable:d.type,deletePrompt:o.translate("main.delete-save"),hasConfirmation:d.type,confirmPrompt:o.translate("main.confirm-save"),attributes:{"data-saveid":d.id,"data-savename":d.name},children:d.slot},d.name))})},ic="_settings_container_1lyb2_1",cc={settings_container:ic},lc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=o=>e("fullscreen",o.target.checked);return s("div",{class:k("atrament-settings-fullscreen"),children:[s(it,{enabled:t.settings.fullscreen,onChange:n,name:"settings-fullscreen"})," ",s("label",{for:"settings-fullscreen",children:s(T,{id:"settings.fullscreen"})})]})},uc="_settings_sound_container_1abud_1",_c="_settings_sound_input_container_1abud_6",dc="_settings_sound_volume_1abud_10",fc="_settings_sound_icon_1abud_17",pe={settings_sound_container:uc,settings_sound_input_container:_c,settings_sound_volume:dc,settings_sound_icon:fc},hc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=i=>e("mute",!i.target.checked),o=i=>e("volume",i.target.value),{mute:r,volume:a}=t.settings;return s(E,{children:[s("div",{class:k(pe.settings_sound,"atrament-settings-sound"),children:[s(it,{enabled:!r,onChange:n,name:"settings-sound"})," ",s("label",{for:"settings-sound",children:s(T,{id:"settings.sound"})})]}),s("div",{class:pe.settings_sound_container,children:[s("div",{class:pe.settings_sound_icon,children:s(Ba,{})}),s("div",{class:pe.settings_sound_input_container,children:s("input",{class:pe.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:a,onChange:o})}),s("div",{class:pe.settings_sound_icon,children:s(Ua,{})})]})]})},gc="_settings_fontsize_container_h3cci_1",pc="_settings_font_a_h3cci_6",mc="_settings_fontsize_input_container_h3cci_12",vc="_settings_fontsize_input_h3cci_12",bc="_settings_font_sample_h3cci_22",_e={settings_fontsize_container:gc,settings_font_a:pc,settings_fontsize_input_container:mc,settings_fontsize_input:vc,settings_font_sample:bc},rr=[];for(let e=Mt;e<=jt;e+=ot)rr.push(e);const yc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),{font:n,fontSize:o}=t.settings,r=a=>e("fontSize",a.target.value);return s("div",{class:k(_e.settings_text,"atrament-settings-text"),children:[s("div",{class:_e.settings_fontsize_container,children:[s("div",{class:_e.settings_font_a,style:{"font-size":`${Mt}%`},children:"A"}),s("div",{class:_e.settings_fontsize_input_container,children:[s("input",{class:_e.settings_fontsize_input,type:"range",min:Mt,max:jt,step:ot,value:o||nt,onInput:r,list:"fontSizes"}),s("datalist",{id:"fontSizes",children:rr.map(a=>s("option",{value:a},a))})]}),s("div",{class:_e.settings_font_a,style:{"font-size":`${jt}%`},children:"A"})]}),s("div",{class:_e.settings_font_sample,style:{"font-size":`${o}%`,"font-family":he[n]},children:s(T,{id:"font.sampleText"})})]})},kc="_settings_font_container_yph84_1",wc={settings_font_container:kc},Sc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=r=>e("font",r.target.value),o=t.settings.font;return s("div",{class:k(wc.settings_font_container,"atrament-settings-font"),children:s("select",{onChange:n,style:{"font-family":he[o]},children:Object.entries(he).map(([r,a])=>s("option",{value:r,style:{"font-family":a},selected:o===r,children:r},r))})})},xc="_settings_theme_container_1gr28_1",Cc="_settings_theme_button_1gr28_8",sr={settings_theme_container:xc,settings_theme_button:Cc},Ec=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["fg-color"],"background-color":t["bg-color"]};return s("button",{class:sr.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:s(T,{id:`themes.${e}`,defaultMessage:e})})},$c=()=>{const{updateSettings:e}=$(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return s("div",{class:k(sr.settings_theme_container,"atrament-settings-theme"),children:Object.entries(ye).map(([n,o])=>s(Ec,{themeId:n,themeConfig:o,onClick:t},n))})},Oc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=o=>e("animation",o.target.checked);return s("div",{class:k("atrament-settings-animation"),children:[s(it,{enabled:t.settings.animation,onChange:n,name:"settings-animation"})," ",s("label",{for:"settings-animation",children:s(T,{id:"settings.animations"})})]})},ar=()=>{const e=R();return s("div",{class:cc.settings_container,children:[s(lc,{}),s(Oc,{}),s(hc,{}),s(ce,{title:e.translate("settings.appearance"),children:[s(Sc,{}),s(yc,{}),s($c,{})]})]})},gt=0,ir=1,cr=2,lr=3,Tc=({saveGame:e,closeSubmenu:t})=>s(E,{children:[s(ct,{children:s("h2",{children:s(T,{id:"main.savegame"})})}),s(ac,{saveGame:e}),s($e,{}),s(N,{onClick:t,children:s(T,{id:"cancel"})},"go-back")]}),Pc=({loadGame:e,closeSubmenu:t})=>s(E,{children:[s(ct,{children:s("h2",{children:s(T,{id:"main.loadgame"})})}),s(or,{loadGame:e,hasConfirmation:!0}),s($e,{}),s(N,{onClick:t,children:s(T,{id:"cancel"})},"go-back")]}),Ac=({closeSubmenu:e})=>s(E,{children:[s(ar,{}),s($e,{}),s(N,{onClick:e,children:s(T,{id:"back"})},"go-back")]}),Lc=({setActiveMenu:e,hasSaveButton:t,hasLoadButton:n,hasQuitGameButton:o})=>{const[,r]=tr(),a=w(()=>e(ir),[e]),i=w(()=>e(cr),[e]),c=w(()=>e(lr),[e]);return s(E,{children:[t&&s(N,{onClick:a,children:s(T,{id:"main.savegame"})},"save-game"),n&&s(N,{onClick:i,attributes:{disabled:!r},children:s(T,{id:"main.loadgame"})},"load-game"),t||n?s(N,{onClick:c,children:s(T,{id:"main.settings"})},"settings"):s(ar,{}),o&&s(E,{children:[s($e,{}),s(N,{accented:!0,onClick:()=>se("/"),children:s(T,{id:"game.quit"})},"quit-game")]})]})},Ic=({toggleMenu:e,isHomeScreen:t})=>{const{atrament:n}=$(),o=L(["metadata"]),{saves:r,load_from_checkpoints:a}=o.metadata,[i,c]=x(gt),u=w(()=>c(gt),[c]),_=n.interfaces.platform.exitApp,d=!!r&&!t,l=!!(r||a)&&!t,g=!t,f=t&&_,h=w(async v=>{await n.game.restart(v),u(),e()},[n,e,u]),p=w(async v=>{await n.game.saveGame(v)},[n]);return s(E,{children:[i===ir&&s(Tc,{saveGame:p,closeSubmenu:u}),i===cr&&s(Pc,{loadGame:h,closeSubmenu:u}),i===lr&&s(Ac,{closeSubmenu:u}),i===gt&&s(Lc,{setActiveMenu:c,hasSaveButton:d,hasLoadButton:l,hasQuitGameButton:g}),f&&s(E,{children:[s($e,{}),s(N,{accented:!0,onClick:_,children:s(T,{id:"main.exit"})},"exit-app")]})]})},on=({isHomeScreen:e=!1})=>{const[t,n]=x(!1),[o,r]=je(!1),[a,i,c]=je(!1),u=w(()=>{n(o),setTimeout(()=>{r(),c(!1)},Kt)},[o,r,c]),_=w(l=>{l.key==="Escape"&&u()},[u]);at(_);const d=k("transparent animation_appear animation_appear_overlay",t&&"animation_disappear");return s(E,{children:[s("button",{class:jn.menu_toggle,onClick:u,children:s(za,{})}),s(Ni,{}),o&&s(Yt,{className:d,children:[s(Xt,{onClick:u}),s(Jt,{children:s("div",{class:jn.menu_content,children:[s(rt,{onClick:u}),a?s(Gi,{onClick:i}):s(E,{children:[s(Ic,{isHomeScreen:e,toggleMenu:u}),s(Ha,{onClick:i})]})]})})]})]})},Mc=({newGame:e,loadGame:t,resumeGame:n,canResume:o})=>{const[r,a]=x([]),i=R(),{atrament:c}=$(),{metadata:u}=L(["metadata"]),_=w(async()=>{const g=await c.game.getSessions();let f=!0;a([...Array(+u.sessions).keys()].map(h=>{const p=h+1,m=`session${p}`,v=!!g[`session${p}`],b=v||f;return!v&&f&&(f=!1),{id:p,name:m,hasSaves:v,canStart:b}}))},[c,u,a]),d=w(async g=>{const f=g.target.getAttribute("data-session"),h=r.filter(p=>p.name===f)[0];h&&(c.game.setSession(f),h.hasSaves?await o()?await n():await t():await e())},[c,r,e,o,n,t]),l=w(async g=>{const f=g.target.getAttribute("data-session");await c.game.removeSession(f),await _()},[c,_]);return A(()=>{(async()=>_())()},[_]),s(E,{children:r.map(g=>s(nn,{onSelect:d,onDelete:l,isDisabled:!g.canStart,isDeletable:g.hasSaves,deletePrompt:i.translate("main.delete-session"),attributes:{"data-session":g.name},children:g.hasSaves?s(T,{id:"main.continue-session",session:g.id}):g.canStart?s(T,{id:"main.newgame"}):s(T,{id:"main.emptyslot"})},g.name))})},rn=()=>{const{atrament:e,resetBackground:t,gameStart:n,gameResume:o,throwAtramentError:r}=$(),a=w(async()=>{try{t(),await n(),se("/game")}catch(u){r(`START GAME ERROR: ${u}`),e.game.clear()}},[t,n,r,e]),i=w(async()=>{try{t(),await o(),se("/game")}catch(u){r(`RESUME GAME ERROR: ${u}`),e.game.clear()}},[t,o,r,e]),c=w(async u=>{try{t(),await n(u),se("/game")}catch(_){r(`LOAD GAME ERROR (saveslot ${u}): ${_}`),e.game.clear()}},[t,n,r,e]);return{newGame:a,resumeGame:i,loadGame:c}},ur=({children:e})=>{const{loadGame:t}=rn();return s(te,{align:"end",children:[s(ct,{children:s("h2",{children:s(T,{id:"main.loadgame"})})}),s(or,{loadGame:t}),s($e,{}),e]})},jc="_imagebox_1x268_1",Rc="_image_1x268_1",Dc="_illustration_1x268_10",pt={imagebox:jc,image:Rc,illustration:Dc},sn=({src:e,options:t={}})=>s("div",{class:k(pt.imagebox,"atrament-image-container",t.class),style:{"margin-left":t.leftmargin||"none","margin-right":t.rightmargin||"none"},children:s("img",{src:e,style:{width:t.width||"auto"},class:k(pt.image,!t.fullsize&&pt.illustration,"atrament-image")})}),_r=()=>{const{getAssetPath:e}=$(),t=R(),n=L(["metadata"]),{title:o,author:r,cover:a,title_screen_layout:i}=n.metadata,[c,u]=a?`${a}`.split(" "):[],_={cover:c?s(sn,{src:e(c),options:u?{width:u}:{}}):"",title:s("h1",{children:o||t.translate("default.title")}),author:s("p",{children:r||t.translate("default.author")})},l=`${i||"cover, title, author"}`.split(/\s*,\s*/);return s(ct,{children:l.map(g=>_[g])})},dr=()=>s(N,{onClick:()=>se("/about"),children:s(T,{id:"main.about"})},"about"),Nc=({canBeResumed:e,canBeLoaded:t,openLoadGameMenu:n,about:o})=>{const{newGame:r,resumeGame:a}=rn();return s(E,{children:[s(_r,{}),s(te,{align:"end",children:[e?s(N,{onClick:a,children:s(T,{id:"main.continue"})},"continuegame"):"",s(N,{onClick:r,children:s(T,{id:"main.newgame"})},"startgame"),t?s(N,{onClick:n,children:s(T,{id:"main.loadgame"})},"loadgame"):"",o?s(dr,{}):""]})]})},Fc=()=>{const[e,t]=x(!1),{atrament:n,canResume:o}=$(),{newGame:r,resumeGame:a}=rn(),{metadata:i}=L(["metadata"]);return s(E,{children:e?s(ur,{children:s(N,{onClick:()=>{n.game.setSession(),t(!1)},children:s(T,{id:"cancel"})},"go-back")}):s(E,{children:[s(_r,{}),s(te,{align:"end",children:[s(Mc,{newGame:r,resumeGame:a,canResume:o,loadGame:()=>t(!0)}),i.about?s(dr,{}):""]})]})})},Vc=()=>{const[e,t]=x(!1),[n,o]=tr(),{metadata:r}=L(["metadata"]);return s(E,{children:e?s(ur,{children:s(N,{onClick:()=>t(!1),children:s(T,{id:"main.menu"})},"go-back")}):s(Nc,{canBeResumed:n,canBeLoaded:o,openLoadGameMenu:()=>t(!0),about:r.about})})},fr=(e,t)=>{let n={backgroundImage:"none"};e&&(n={backgroundImage:`url(${t(e)})`,backgroundSize:"cover",backgroundPosition:"center"}),Object.assign(document.body.style,n)},Hc=()=>{const{getAssetPath:e,resetBackground:t}=$(),n=L(["metadata"]),{background:o,sessions:r}=n.metadata;return A(()=>{t(),fr(o,e)},[t,o,e]),s(He,{children:s(Zt,{cssClass:"font-face-game",children:[s(tn,{}),s(on,{isHomeScreen:!0}),r?s(Fc,{}):s(Vc,{})]})})},zc="_toolbar_1gykh_1",Uc={toolbar:zc},Bc="_bannerblock_1ry2a_1",Gc="_accent_1ry2a_11",Wc="_allcaps_1ry2a_17",mt={bannerblock:Bc,accent:Gc,allcaps:Wc},qc=({children:e,options:t})=>{const n=k(mt.bannerblock,t.style==="accent"&&mt.accent,t.allcaps&&mt.allcaps,"atrament-tag-banner",t.class);return s("div",{class:n,children:e})},Kc={tag:"banner",component:qc},Yc=Object.freeze(Object.defineProperty({__proto__:null,default:Kc},Symbol.toStringTag,{value:"Module"})),Xc={tag:"block",component:({options:e,children:t})=>{const n={display:"inline-block",width:e.width||"100%","text-align":e.align||"inherit","vertical-align":e.valign||"top"};return s("div",{style:n,class:k("atrament-tag-block",e.class),children:t})}},Jc=Object.freeze(Object.defineProperty({__proto__:null,default:Xc},Symbol.toStringTag,{value:"Module"})),Zc="_button_l78x4_1",Qc="_bordered_l78x4_14",el="_borderless_l78x4_28",vt={button:Zc,bordered:Qc,borderless:el},tl=({children:e,options:t})=>{const n=ie(Ve),{execContentFunction:o}=st();t.DEFAULT&&(t.onclick=t.DEFAULT);const r=w(i=>{i.stopPropagation(),o(t.onclick,t.display)},[o,t]);let a=k(vt.button,t.bordered===!1?vt.borderless:vt.bordered,"atrament-tag-button",t.class);return s("button",{class:a,onClick:r,disabled:!n||t.disabled,children:e})},nl={tag:"button",component:tl},ol=Object.freeze(Object.defineProperty({__proto__:null,default:nl},Symbol.toStringTag,{value:"Module"})),rl={tag:"css",component:({options:e,children:t})=>s("span",{class:e.class,style:e.style,children:t})},sl=Object.freeze(Object.defineProperty({__proto__:null,default:rl},Symbol.toStringTag,{value:"Module"})),al={tag:"font",component:({options:e,children:t})=>{const n=e.family||e.DEFAULT;return s("span",{class:e.class,style:{"font-family":n},children:t})}},il=Object.freeze(Object.defineProperty({__proto__:null,default:al},Symbol.toStringTag,{value:"Module"})),cl={tag:"highlight",component:({options:e,children:t})=>{const n={"background-color":e.bgcolor||"var(--accent-bg-color)",color:e.color||"var(--accent-fg-color)",padding:e.bgcolor?"0.1em":"inherit","box-decoration-break":"clone"};return s("mark",{style:n,class:k("atrament-tag-highlight",e.class),children:t})}},ll=Object.freeze(Object.defineProperty({__proto__:null,default:cl},Symbol.toStringTag,{value:"Module"})),ul="_infoblock_1a1qp_1",_l="_font_ui_1a1qp_9",dl="_side_highlight_1a1qp_13",fl="_side_accent_1a1qp_17",Ge={infoblock:ul,font_ui:_l,side_highlight:dl,side_accent:fl},hl=({children:e,options:t})=>{const n=k(Ge.infoblock,t.font==="system"&&Ge.font_ui,t.side==="accent"&&Ge.side_accent,t.side==="highlight"&&Ge.side_highlight,"atrament-tag-info",t.class),o={"text-align":t.align||"left"};return s("div",{class:n,style:o,children:e})},gl={tag:"info",component:hl},pl=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"})),ml="_inline_image_rars0_1",vl={inline_image:ml},bl=({options:e,children:t})=>{const{getAssetPath:n}=$(),o=k(vl.inline_image,"atrament-tag-img",e.class);return s("img",{class:o,src:n(t)})},yl={tag:"img",tagOptions:{raw:!0},component:bl},kl=Object.freeze(Object.defineProperty({__proto__:null,default:yl},Symbol.toStringTag,{value:"Module"})),wl="_input_h66sx_1",Sl={input:wl},xl=e=>e.stopPropagation(),Cl=({options:e})=>{const t=ie(Ve),[n,o]=x(null),{getInkVariable:r,setInkVariable:a}=$();A(()=>o(r(e.var)),[r,e.var]);const i=_=>{let d=_.srcElement.value||n;e.type==="number"&&(d=+d),a(e.var,d),o(d)},c=e.type==="number"?"number":"text",u=k(Sl.input,"atrament-tag-input",e.class);return s("input",{disabled:!t,class:u,value:n,placeholder:e.placeholder,type:c,onInput:i,onClick:xl})},El={tag:"input",tagOptions:{single:!0},component:Cl},$l=Object.freeze(Object.defineProperty({__proto__:null,default:El},Symbol.toStringTag,{value:"Module"})),Ol=/([\w:]+)(?:=(?:"([^"]*)"|(\S+)))?/g;function Re(e){const t={};if(!e)return t;if(e.startsWith("="))return t.DEFAULT=e.slice(1).trim(),t;let n;for(;n=Ol.exec(e);){const o=n[2]??n[3]??"true";try{t[n[1]]=JSON.parse(o)}catch{t[n[1]]=o}}return t}const Tl="_imagebox_phoq5_1",Pl="_background_phoq5_11",Al="_layer_wrapper_phoq5_23",bt={imagebox:Tl,background:Pl,layer_wrapper:Al},Ll=({key:e,scale:t,item:n})=>s("img",{class:"atrament-layer",src:n.src,onClick:n.onclick,style:{position:"absolute",left:(n.attrs?.x||0)*t,top:(n.attrs?.y||0)*t,width:n.width?n.width*t:"auto",height:n.height?n.height*t:"auto",cursor:n.onclick?"pointer":"auto"}},e),Il=({key:e,scale:t,item:n})=>s("div",{class:"atrament-layer-area",onClick:n.onclick,style:{position:"absolute",left:(n.attrs.x||0)*t,top:(n.attrs.y||0)*t,width:(n.attrs.width||n.attrs.x1-n.attrs.x)*t,height:(n.attrs.height||n.attrs.y1-n.attrs.y)*t,cursor:n.onclick?"pointer":"auto"}},e),Ml=({layers:e=[],areas:t=[],options:n={}})=>{const o=tt(null),[r,a]=x(null),i=[...e.sort(((d,l)=>d.index-l.index))],c=i.shift(),u=[...t.sort(((d,l)=>d.index-l.index))],_=w(()=>{const d=o.current;if(!d)return;const l=d.clientWidth,g=d.clientHeight,f=Math.min(l/c.width,g/c.height),h=c.width*f,p=c.height*f,m=(l-h)/2,v=(g-p)/2;a({scale:f,renderWidth:h,renderHeight:p,offsetX:m,offsetY:v})},[c]);return A(()=>(_(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)),[_]),s("div",{class:k(bt.imagebox,"atrament-layer-container",n.class),style:{"margin-left":n.leftmargin||"none","margin-right":n.rightmargin||"none"},ref:o,children:[s("img",{src:c.src,class:k(bt.background,"atrament-layer-backround"),style:{width:n.width||"auto"}}),r&&s("div",{class:bt.layer_wrapper,style:{left:r.offsetX,top:r.offsetY,width:r.renderWidth,height:r.renderHeight},children:[i.map((d,l)=>s(Ll,{item:d,scale:r.scale},l)),u.map((d,l)=>s(Il,{item:d,scale:r.scale},l))]})]})};function jl(e){const t=[];for(let n of e)t.push(new Promise(o=>{const r=new Image,a=()=>o({...n,width:r.naturalWidth,height:r.naturalHeight});r.onload=a,r.onerror=a,r.src=n.src}));return Promise.allSettled(t).then(n=>n.map(o=>o.status==="fulfilled"?o.value:{}))}const Rl=({options:e,children:t})=>{const[n,o]=x(null),r=ie(Ve),{makeChoice:a,continueStory:i,throwAtramentError:c,getAssetPath:u}=$(),{execContentFunction:_}=st(),d=L(["scenes"]),l=w(b=>{const y=d.scenes.length-1,O=d.scenes[y].choices.findIndex(P=>P.choice===b);if(O<0){c(`[picture to=${b}] leads to nonexistent choice!`);return}a(O),i()},[c,i,a,d.scenes]),g=w(b=>_(b.onclick,b.display),[_]),f=b=>{let y=null;return r&&(b.onclick?y=S=>{S.stopPropagation(),g(b)}:b.to&&(y=S=>{S.stopPropagation(),l(b.to)})),y},p=t.match(/\[picture.*?\].+?\[\/picture\]/ig)?.map((b,y)=>{const[,S,O]=b.match(/\[picture(.*?)\](.+?)\[\/picture\]/i);return{attrs:Re(S),src:u(O),index:y}}),v=t.match(/\[area.+?\]/ig)?.map((b,y)=>{const[,S]=b.match(/\[area(.*?)\]/i),O=Re(S);return{attrs:O,index:y,onclick:f(O)}});return A(()=>{(async y=>{const O=(await jl(y))?.map(P=>(P.onclick=f(P.attrs),P));o(O)})(p)},[]),s(E,{children:n&&s(Ml,{layers:n,areas:v,options:e})})},Dl={tag:"layers",tagOptions:{raw:!0},component:Rl},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:Dl},Symbol.toStringTag,{value:"Module"})),Fl="_inline_link_1dibw_1",Vl="_disabled_1dibw_10",zn={inline_link:Fl,disabled:Vl},Hl=({children:e,options:t})=>{const n=ie(Ve),{makeChoice:o,continueStory:r,throwAtramentError:a}=$(),{execContentFunction:i}=st(),c=L(["scenes"]),u=t.to||t.DEFAULT,_=w(f=>{f.stopPropagation();const h=c.scenes.length-1,m=c.scenes[h].choices.findIndex(v=>v.choice===u);if(m<0){a(`[link=${u}] leads to nonexistent choice!`);return}o(m),r()},[a,r,o,u,c.scenes]),d=w(f=>{f.stopPropagation(),i(t.onclick,t.display)},[i,t]),l=k(zn.inline_link,!n&&zn.disabled,"atrament-tag-link",t.class),g=n?t.onclick?d:_:()=>{};return s("a",{href:"#",class:l,onClick:g,children:e})},zl={tag:"link",component:Hl},Ul=Object.freeze(Object.defineProperty({__proto__:null,default:zl},Symbol.toStringTag,{value:"Module"})),Bl=({options:e,children:t})=>{const{getAssetPath:n}=$(),o={fullsize:!0};return["leftmargin","rightmargin","width"].forEach(r=>{e[r]&&(o[r]=e[r])}),s(sn,{src:n(t),options:o})},Gl={tag:"picture",tagOptions:{raw:!0},component:Bl},Wl=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),ql={tag:"progress",component:Qt},Kl=Object.freeze(Object.defineProperty({__proto__:null,default:ql},Symbol.toStringTag,{value:"Module"})),Yl="_separator_sgffv_1",Xl={separator:Yl},Jl={tag:"---",tagOptions:{single:!0},component:({options:e})=>s("hr",{class:k(Xl.separator,"atrament-tag-separator",e.class),style:{width:e.width||"60%"}})},Zl=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),Ql="_hidden_1ydvn_1",eu="_revealed_1ydvn_12",Un={hidden:Ql,revealed:eu},tu=[Un.hidden,Un.revealed],nu=({options:e,children:t})=>{const[n,o]=x(0),r=w(a=>{a.stopPropagation(),o(i=>1-i)},[o]);return s("span",{class:k(tu[n],"atrament-tag-spoiler",e.class),onClick:r,children:s("span",{children:t})})},ou={tag:"spoiler",component:nu},ru=Object.freeze(Object.defineProperty({__proto__:null,default:ou},Symbol.toStringTag,{value:"Module"})),su=(e,t)=>e.split(/\[ \]/).map(n=>({style:{textAlign:"left"},name:t(n)})),au=(e,t)=>e.match(/\[row\](.+?)\[\/row\]/i)[1].split(/\[ \]/).map(o=>t(o)),iu={tag:"table",tagOptions:{raw:!0},component:({options:e,children:t,markupRenderer:n})=>{const o=t.match(/\[header\](.+?)\[\/header\]/i),r=t.match(/\[row\].+?\[\/row\]/ig),a=o?su(o[1],n):[],i=r?r.map(u=>au(u,n)):[],c=e.columns?e.columns.split(/\s+/g):[];return s(ge,{className:k("atrament-tag-table",e.class),columns:a,data:i,border:e.border,padding:e.padding,columnWidth:c,fixed:e.fixed})}},cu=Object.freeze(Object.defineProperty({__proto__:null,default:iu},Symbol.toStringTag,{value:"Module"}));function lu(e,t){for(var n in t)e[n]=t[n];return e}function Bn(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function Gn(e,t){this.props=e,this.context=t}(Gn.prototype=new X).isPureReactComponent=!0,Gn.prototype.shouldComponentUpdate=function(e,t){return Bn(this.props,e)||Bn(this.state,t)};var Wn=C.__b;C.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Wn&&Wn(e)};var uu=C.__e;C.__e=function(e,t,n,o){if(e.then){for(var r,a=t;a=a.__;)if((r=a.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}uu(e,t,n,o)};var qn=C.unmount;function hr(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=lu({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return hr(o,t,n)})),e}function gr(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return gr(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function yt(){this.__u=0,this.o=null,this.__b=null}function pr(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function We(){this.i=null,this.l=null}C.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qn&&qn(e)},(yt.prototype=new X).__c=function(e,t){var n=t.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=pr(o.__v),a=!1,i=function(){a||(a=!0,n.__R=null,r?r(c):c())};n.__R=i;var c=function(){if(!--o.__u){if(o.state.__a){var u=o.state.__a;o.__v.__k[0]=gr(u,u.__c.__P,u.__c.__O)}var _;for(o.setState({__a:o.__b=null});_=o.o.pop();)_.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(i,i)},yt.prototype.componentWillUnmount=function(){this.o=[]},yt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=hr(this.__b,n,o.__O=o.__P)}this.__b=null}var r=t.__a&&ne(E,null,e.fallback);return r&&(r.__u&=-33),[ne(E,null,t.__a?null:e.children),r]};var Kn=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function _u(e){return this.getChildContext=function(){return e.context},e.children}function du(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){Pt(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var o=t.__v;o!==null&&!o.__m&&o.__!==null;)o=o.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:o.__m},contains:function(){return!0},insertBefore:function(r,a){this.childNodes.push(r),t.h.insertBefore(r,a)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.h.removeChild(r)}}}Pt(ne(_u,{context:t.context},e.__v),t.v)}function fu(e,t){var n=ne(du,{__v:e,h:t});return n.containerInfo=t,n}(We.prototype=new X).__a=function(e){var t=this,n=pr(t.__v),o=t.l.get(e);return o[0]++,function(r){var a=function(){t.props.revealOrder?(o.push(r),Kn(t,e,o)):r()};n?n(a):a()}},We.prototype.render=function(e){this.i=null,this.l=new Map;var t=Se(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},We.prototype.componentDidUpdate=We.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Kn(e,n,t)})};var hu=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,gu=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pu=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,mu=/[A-Z0-9]/g,vu=typeof document<"u",bu=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};X.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(X.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Yn=C.event;function yu(){}function ku(){return this.cancelBubble}function wu(){return this.defaultPrevented}C.event=function(e){return Yn&&(e=Yn(e)),e.persist=yu,e.isPropagationStopped=ku,e.isDefaultPrevented=wu,e.nativeEvent=e};var Su={enumerable:!1,configurable:!0,get:function(){return this.class}},Xn=C.vnode;C.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,o=t.type,r={},a=o.indexOf("-")===-1;for(var i in n){var c=n[i];if(!(i==="value"&&"defaultValue"in n&&c==null||vu&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var u=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&c===!0?c="":u==="translate"&&c==="no"?c=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?i="ondblclick":u!=="onchange"||o!=="input"&&o!=="textarea"||bu(n.type)?u==="onfocus"?i="onfocusin":u==="onblur"?i="onfocusout":pu.test(i)&&(i=u):u=i="oninput":a&&gu.test(i)?i=i.replace(mu,"-$&").toLowerCase():c===null&&(c=void 0),u==="oninput"&&r[i=u]&&(i="oninputCapture"),r[i]=c}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Se(n.children).forEach(function(_){_.props.selected=r.value.indexOf(_.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=Se(n.children).forEach(function(_){_.props.selected=r.multiple?r.defaultValue.indexOf(_.props.value)!=-1:r.defaultValue==_.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",Su)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),t.props=r})(e),e.$$typeof=hu,Xn&&Xn(e)};var Jn=C.__r;C.__r=function(e){Jn&&Jn(e),e.__c};var Zn=C.diffed;C.diffed=function(e){Zn&&Zn(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};const xu=Object.assign({}),Dt={};Object.entries(xu).forEach(([e,t])=>{const n=e.replace("../resources/templates/","");Dt[n]=t});var Cu=Object.prototype.toString,Oe=Array.isArray||function(t){return Cu.call(t)==="[object Array]"};function an(e){return typeof e=="function"}function Eu(e){return Oe(e)?"array":typeof e}function kt(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Qn(e,t){return e!=null&&typeof e=="object"&&t in e}function $u(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Ou=RegExp.prototype.test;function Tu(e,t){return Ou.call(e,t)}var Pu=/\S/;function Au(e){return!Tu(Pu,e)}var Lu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Iu(e){return String(e).replace(/[&<>"'`=\/]/g,function(n){return Lu[n]})}var Mu=/\s*/,ju=/\s+/,eo=/\s*=/,Ru=/\s*\}/,Du=/#|\^|\/|>|\{|&|=|!/;function Nu(e,t){if(!e)return[];var n=!1,o=[],r=[],a=[],i=!1,c=!1,u="",_=0;function d(){if(i&&!c)for(;a.length;)delete r[a.pop()];else a=[];i=!1,c=!1}var l,g,f;function h(D){if(typeof D=="string"&&(D=D.split(ju,2)),!Oe(D)||D.length!==2)throw new Error("Invalid tags: "+D);l=new RegExp(kt(D[0])+"\\s*"),g=new RegExp("\\s*"+kt(D[1])),f=new RegExp("\\s*"+kt("}"+D[1]))}h(t||G.tags);for(var p=new ze(e),m,v,b,y,S,O;!p.eos();){if(m=p.pos,b=p.scanUntil(l),b)for(var P=0,V=b.length;P<V;++P)y=b.charAt(P),Au(y)?(a.push(r.length),u+=y):(c=!0,n=!0,u+=" "),r.push(["text",y,m,m+1]),m+=1,y===`
`&&(d(),u="",_=0,n=!1);if(!p.scan(l))break;if(i=!0,v=p.scan(Du)||"name",p.scan(Mu),v==="="?(b=p.scanUntil(eo),p.scan(eo),p.scanUntil(g)):v==="{"?(b=p.scanUntil(f),p.scan(Ru),p.scanUntil(g),v="&"):b=p.scanUntil(g),!p.scan(g))throw new Error("Unclosed tag at "+p.pos);if(v==">"?S=[v,b,m,p.pos,u,_,n]:S=[v,b,m,p.pos],_++,r.push(S),v==="#"||v==="^")o.push(S);else if(v==="/"){if(O=o.pop(),!O)throw new Error('Unopened section "'+b+'" at '+m);if(O[1]!==b)throw new Error('Unclosed section "'+O[1]+'" at '+m)}else v==="name"||v==="{"||v==="&"?c=!0:v==="="&&h(b)}if(d(),O=o.pop(),O)throw new Error('Unclosed section "'+O[1]+'" at '+p.pos);return Vu(Fu(r))}function Fu(e){for(var t=[],n,o,r=0,a=e.length;r<a;++r)n=e[r],n&&(n[0]==="text"&&o&&o[0]==="text"?(o[1]+=n[1],o[3]=n[3]):(t.push(n),o=n));return t}function Vu(e){for(var t=[],n=t,o=[],r,a,i=0,c=e.length;i<c;++i)switch(r=e[i],r[0]){case"#":case"^":n.push(r),o.push(r),n=r[4]=[];break;case"/":a=o.pop(),a[5]=r[2],n=o.length>0?o[o.length-1][4]:t;break;default:n.push(r)}return t}function ze(e){this.string=e,this.tail=e,this.pos=0}ze.prototype.eos=function(){return this.tail===""};ze.prototype.scan=function(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var o=n[0];return this.tail=this.tail.substring(o.length),this.pos+=o.length,o};ze.prototype.scanUntil=function(t){var n=this.tail.search(t),o;switch(n){case-1:o=this.tail,this.tail="";break;case 0:o="";break;default:o=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=o.length,o};function Ee(e,t){this.view=e,this.cache={".":this.view},this.parent=t}Ee.prototype.push=function(t){return new Ee(t,this)};Ee.prototype.lookup=function(t){var n=this.cache,o;if(n.hasOwnProperty(t))o=n[t];else{for(var r=this,a,i,c,u=!1;r;){if(t.indexOf(".")>0)for(a=r.view,i=t.split("."),c=0;a!=null&&c<i.length;)c===i.length-1&&(u=Qn(a,i[c])||$u(a,i[c])),a=a[i[c++]];else a=r.view[t],u=Qn(r.view,t);if(u){o=a;break}r=r.parent}n[t]=o}return an(o)&&(o=o.call(this.view)),o};function F(){this.templateCache={_cache:{},set:function(t,n){this._cache[t]=n},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}F.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};F.prototype.parse=function(t,n){var o=this.templateCache,r=t+":"+(n||G.tags).join(":"),a=typeof o<"u",i=a?o.get(r):void 0;return i==null&&(i=Nu(t,n),a&&o.set(r,i)),i};F.prototype.render=function(t,n,o,r){var a=this.getConfigTags(r),i=this.parse(t,a),c=n instanceof Ee?n:new Ee(n,void 0);return this.renderTokens(i,c,o,t,r)};F.prototype.renderTokens=function(t,n,o,r,a){for(var i="",c,u,_,d=0,l=t.length;d<l;++d)_=void 0,c=t[d],u=c[0],u==="#"?_=this.renderSection(c,n,o,r,a):u==="^"?_=this.renderInverted(c,n,o,r,a):u===">"?_=this.renderPartial(c,n,o,a):u==="&"?_=this.unescapedValue(c,n):u==="name"?_=this.escapedValue(c,n,a):u==="text"&&(_=this.rawValue(c)),_!==void 0&&(i+=_);return i};F.prototype.renderSection=function(t,n,o,r,a){var i=this,c="",u=n.lookup(t[1]);function _(g){return i.render(g,n,o,a)}if(u){if(Oe(u))for(var d=0,l=u.length;d<l;++d)c+=this.renderTokens(t[4],n.push(u[d]),o,r,a);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")c+=this.renderTokens(t[4],n.push(u),o,r,a);else if(an(u)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,r.slice(t[3],t[5]),_),u!=null&&(c+=u)}else c+=this.renderTokens(t[4],n,o,r,a);return c}};F.prototype.renderInverted=function(t,n,o,r,a){var i=n.lookup(t[1]);if(!i||Oe(i)&&i.length===0)return this.renderTokens(t[4],n,o,r,a)};F.prototype.indentPartial=function(t,n,o){for(var r=n.replace(/[^ \t]/g,""),a=t.split(`
`),i=0;i<a.length;i++)a[i].length&&(i>0||!o)&&(a[i]=r+a[i]);return a.join(`
`)};F.prototype.renderPartial=function(t,n,o,r){if(o){var a=this.getConfigTags(r),i=an(o)?o(t[1]):o[t[1]];if(i!=null){var c=t[6],u=t[5],_=t[4],d=i;u==0&&_&&(d=this.indentPartial(i,_,c));var l=this.parse(d,a);return this.renderTokens(l,n,o,d,r)}}};F.prototype.unescapedValue=function(t,n){var o=n.lookup(t[1]);if(o!=null)return o};F.prototype.escapedValue=function(t,n,o){var r=this.getConfigEscape(o)||G.escape,a=n.lookup(t[1]);if(a!=null)return typeof a=="number"&&r===G.escape?String(a):r(a)};F.prototype.rawValue=function(t){return t[1]};F.prototype.getConfigTags=function(t){return Oe(t)?t:t&&typeof t=="object"?t.tags:void 0};F.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!Oe(t))return t.escape};var G={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){De.templateCache=e},get templateCache(){return De.templateCache}},De=new F;G.clearCache=function(){return De.clearCache()};G.parse=function(t,n){return De.parse(t,n)};G.render=function(t,n,o,r){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Eu(t)+'" was given as the first argument for mustache#render(template, view, partials)');return De.render(t,n,o,r)};G.escape=Iu;G.Scanner=ze;G.Context=Ee;G.Writer=F;const Hu=({options:e,children:t})=>{const{throwAtramentError:n,getAssetPath:o}=$(),r=tt(null),[a,i]=x(null);A(()=>{if(!r.current)return;const _=r.current.querySelector('[data-mount="content"]');i(_)},[]);let c={};if(Object.entries(e).forEach(([_,d])=>{const l=_.match(/var:(.+)/);l&&(c[l[1]]=`${d}`.startsWith("GAME_ASSET:")?o(d.replace("GAME_ASSET:","")):d)}),!Dt[e.src]){n(`Template not found: ${e.src}`);return}let u;try{u=G.render(Dt[e.src],c)}catch(_){n(`Template: ${e.src}. ${_}`),console.error(_);return}return s(E,{children:[e.wrapper==="span"?s("span",{ref:r,class:e.class,dangerouslySetInnerHTML:{__html:u}}):s("div",{ref:r,class:e.class,dangerouslySetInnerHTML:{__html:u}}),a&&fu(t,a)]})},zu={tag:"template",component:Hu},Uu=Object.freeze(Object.defineProperty({__proto__:null,default:zu},Symbol.toStringTag,{value:"Module"})),Bu=e=>e.stopPropagation(),Gu={tag:"url",component:({options:e,children:t})=>{const n=e.href||e.DEFAULT;return s("a",{href:n,class:k("atrament-tag-url",e.class),target:"_blank",rel:"noreferrer",onClick:Bu,children:t})}},Wu=Object.freeze(Object.defineProperty({__proto__:null,default:Gu},Symbol.toStringTag,{value:"Module"})),qu=({options:e,children:t})=>{const{getAssetPath:n}=$(),o=L(["settings"]),r=tt(null),{volume:a,mute:i}=o.settings;return A(()=>{r.current.volume=a/100},[r,a]),A(()=>{r.current.muted=i},[r,i]),s("video",{class:k("atrament-tag-video",e.class),ref:r,style:{"pointer-events":"none"},width:"100%",autoplay:!0,disablePictureInPicture:!0,loop:!0,...e,children:s("source",{src:n(t)})})},Ku={tag:"video",tagOptions:{raw:!0},component:qu},Yu=Object.freeze(Object.defineProperty({__proto__:null,default:Ku},Symbol.toStringTag,{value:"Module"})),Xu=Object.assign({"./banner/index.jsx":Yc,"./block/index.jsx":Jc,"./button/index.jsx":ol,"./css/index.jsx":sl,"./font/index.jsx":il,"./highlight/index.jsx":ll,"./info/index.jsx":pl,"./inline-image/index.jsx":kl,"./input/index.jsx":$l,"./layers/index.jsx":Nl,"./link/index.jsx":Ul,"./picture/index.jsx":Wl,"./progress/index.jsx":Kl,"./separator/index.jsx":Zl,"./spoiler/index.jsx":ru,"./table/index.jsx":cu,"./template/index.jsx":Uu,"./url/index.jsx":Wu,"./video/index.jsx":Yu}),Ye=Object.values(Xu).reduce((e,{default:t})=>(e[t.tag]=t,e),{}),Ju=e=>/<\/?[a-z][\s\S]*>/i.test(e),Zu=({index:e,item:t})=>s("span",{dangerouslySetInnerHTML:{__html:t}},e),Q=/\[(\/?)([-\w]+)([^\]]*)\]/g;function Qu(e){const t={children:[]},n=[t];if(!e)return t;let o=0;for(Q.lastIndex=0;;){const r=Q.exec(e),a=n[n.length-1];if(!r)break;const[,i,c,u]=r,_=r.index;_>o&&a.children.push({type:"text",value:e.slice(o,_)});const d=Ye[c],l=d?.tagOptions?.raw,g=d?.tagOptions?.single;if(!d&&!i){const f=new RegExp(`\\[\\/${c}\\]`,"gi");f.lastIndex=Q.lastIndex;const h=f.exec(e),p=h?h.index+h[0].length:e.length;a.children.push({type:"text",value:e.slice(_,p)}),o=p,Q.lastIndex=p;continue}if(i)a.name===c&&n.pop();else{const f={type:"tag",name:c,options:Re(u.trim()),children:[],raw:l,key:Math.random()};if(a.children.push(f),g){o=Q.lastIndex;continue}if(l){const h=new RegExp(`\\[\\/${c}\\]`,"gi");h.lastIndex=Q.lastIndex;const p=h.exec(e),m=p?p.index:e.length;f.children.push({type:"text",value:e.slice(Q.lastIndex,m)}),o=p?p.index+p[0].length:e.length,Q.lastIndex=o;continue}n.push(f)}o=Q.lastIndex}return o<e.length&&n[n.length-1].children.push({type:"text",value:e.slice(o)}),t}function Nt(e){if(e.type==="text")return Ju(e.value)?Zu({index:Math.random(),item:e.value}):e.value;if(Ye[e.name]?.replacer)return(Ye[e.name]?.replacer??((o,r)=>s(E,{children:r})))(e.options,e.raw?e.children[0]?.value:e.children.map(Nt),o=>o);const t=Ye[e.name]?.component??E;return s(t,{options:e.options,markupRenderer:mr,children:e.raw?e.children[0]?.value:e.children.map(Nt)},e.key)}function mr(e){const t=Qu(e);return Nt(t)}const Te=({children:e,isActive:t=!0})=>{const n=Ut(()=>mr(e),[e]);return s(Ve.Provider,{value:t,children:n})};function e_(){const e=R(),t=L([be]);return t[be]!==Io?t[be]:e.translate("default.title")}const t_=()=>{const e=e_();return s("div",{class:k(Uc.toolbar,"atrament-toolbar"),children:s(Te,{children:e})})},n_="_container_text_14825_1",o_={container_text:n_},lt=({children:e})=>s("div",{class:k(o_.container_text,"atrament-text-container"),children:e}),r_="_container_scenes_13lih_1",s_={container_scenes:r_},a_=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",i_=({children:e,align:t})=>s("div",{class:k(s_.container_scenes,"atrament-container-scene"),style:{"justify-content":a_(t)},children:e}),c_="_container_choices_41rpm_1",l_={container_choices:c_},u_=({children:e,key:t,isReady:n})=>s("div",{class:k(l_.container_choices,"atrament-container-choices",n&&"animation_appear"),children:s("div",{style:{opacity:n?1:0},children:s(te,{children:e})})},t),__="_scene_1ifs0_1",d_={scene:__},vr=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function f_(e,t){this.scrollLeft=e,this.scrollTop=t}const br=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,yr=(e,t,n)=>br(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),to=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},h_=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},cn=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function g_(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const p_=e=>.5*(1-Math.cos(Math.PI*e));function ln(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),ln=t,t()}const m_=500,kr=e=>{const n=(ln()-e.timeStamp)/(e.duration||m_);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||p_)(n),r=e.startX+(e.targetX-e.startX)*o,a=e.startY+(e.targetY-e.startY)*o;e.method(r,a),e.rafId=window.requestAnimationFrame(()=>{kr(e)})},Ze=e=>isFinite(e)?Number(e):0,v_=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},b_=(e,t,n)=>{var o,r;if(!v_(e))return;const a=e.scrollLeft,i=e.scrollTop,c=Ze((o=t.left)!==null&&o!==void 0?o:a),u=Ze((r=t.top)!==null&&r!==void 0?r:i);if(c===a&&u===i)return;const _=to(HTMLElement.prototype,"scroll",f_),d=to(Object.getPrototypeOf(e),"scroll",_).bind(e);if(t.behavior!=="smooth"){d(c,u);return}const l=()=>{window.removeEventListener("wheel",h),window.removeEventListener("touchmove",h)},g=()=>{l();const p=e.nodeType===9;e.dispatchEvent(g_(p))},f=Object.assign(Object.assign({},n),{timeStamp:ln(),startX:a,startY:i,targetX:c,targetY:u,rafId:0,method:d,callback:g}),h=()=>{window.cancelAnimationFrame(f.rafId),l()};window.addEventListener("wheel",h,{passive:!0,once:!0}),window.addEventListener("touchmove",h,{passive:!0,once:!0}),kr(f)},y_=e=>e.window===e,k_=e=>(t,n,o)=>{const[r,a]=y_(t)?[cn(t.document.documentElement),"Window"]:[t,"Element"],i=n??{};if(!h_(i))throw new TypeError(br(e,a));if(!vr(i.behavior))throw new TypeError(yr(e,a,i.behavior));e==="scrollBy"&&(i.left=Ze(i.left)+r.scrollLeft,i.top=Ze(i.top)+r.scrollTop),b_(r,i,o)},w_=k_("scroll"),S_=w_,wr=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},Sr=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},x_=e=>(Sr(wr(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,C_=(e,t,n)=>{const[o,r,a]=Sr(t,n,e.block||"start",e.inline||"nearest");return[r,a].map((i,c)=>{switch(i){case"center":return 1;case"nearest":return 0;default:{const u=o>>c&1;return i==="start"==!u?2:3}}})},no=(e,t,n,o,r,a,i)=>e!==0?e:r<t&&a>n||r>t&&a<n?null:r<=t&&i<=o||a>=n&&i>=o?2:a>n&&i<o||r<t&&i>o?3:null,oo=e=>e!=="visible"&&e!=="clip",E_=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},$_=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?oo(t.overflowY)||oo(t.overflowX)||e===cn(e):!1,ro=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return E_(e)}return n},wt=(e,t,n)=>e<t?t:e>n?n:e,O_=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],T_=(e,t,n)=>{const{top:o,right:r,bottom:a,left:i}=t,c=O_(e.ownerDocument);if(!c)return[o,r,a,i];const u=_=>{const d=n.getPropertyValue(`${c}-${_}`);return parseInt(d,10)||0};return[o-u("top"),r+u("right"),a+u("bottom"),i-u("left")]},qe=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},P_=(e,t)=>{var n,o,r;const a=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[i,c,u,_]=e===cn(e)?[0,0,(o=a?.width)!==null&&o!==void 0?o:e.clientWidth,(r=a?.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],d=i+e.clientLeft,l=c+e.clientTop,g=d+u,f=l+_;return[l,g,f,d]},A_=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const a=window.getComputedStyle(e),i=a.direction!=="rtl",c=wr(a.writingMode||a.getPropertyValue("-webkit-writing-mode")||a.getPropertyValue("-ms-writing-mode")),[u,_]=C_(t,c,i);let[d,l,g,f]=T_(e,e.getBoundingClientRect(),a);for(let h=ro(e);h!==null;h=ro(h)){if(o!==h.ownerDocument){if(o=h.ownerDocument,r=o.defaultView,!r)break;const{left:H,top:Z}=h.getBoundingClientRect();d+=Z,l+=H,g+=Z,f+=H}const p=r.getComputedStyle(h);if(p.position==="fixed")break;if(!$_(h,p))continue;const m=h.getBoundingClientRect(),[v,b,y,S]=P_(h,m),O=no(u,S,b,h.clientWidth,f,l,l-f),P=no(_,v,y,h.clientHeight,d,g,g-d),V=O===null?0:qe(O,f,l)-qe(O,S,b),D=P===null?0:qe(P,d,g)-qe(P,v,y),J=x_(p)?wt(V,-h.scrollWidth+h.clientWidth-h.scrollLeft,-h.scrollLeft):wt(V,-h.scrollLeft,h.scrollWidth-h.clientWidth-h.scrollLeft),le=wt(D,-h.scrollTop,h.scrollHeight-h.clientHeight-h.scrollTop);n.push([h,{left:h.scrollLeft+J,top:h.scrollTop+le,behavior:t.behavior}]),d=Math.max(d-le,v),l=Math.min(l-J,b),g=Math.min(g-le,y),f=Math.max(f-J,S)}return n},L_=(e,t,n)=>{const o=t||{};if(!vr(o.behavior))throw new TypeError(yr("scrollIntoView","Element",o.behavior));A_(e,o).forEach(([a,i])=>{S_(a,i,n)})},I_="_paragraph_5rai4_1",M_="_inactive_5rai4_21",so={paragraph:I_,inactive:M_},un=({children:e,active:t=!0,class_override:n=""})=>s("div",{class:k(so.paragraph,!t&&so.inactive,"atrament-paragraph",!t&&"atrament-paragraph-read",n),children:e}),j_=({content:e,isCurrent:t})=>e.text===`
`||e.text===""?s(E,{}):s(un,{active:t,class_override:e.tags.CLASS,children:s(Te,{isActive:t,children:e.text})});function _n(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{if(!o){r();return}const a=new Image;a.onload=r,a.onerror=r,a.src=e(o)}));return Promise.allSettled(n)}const R_="_loader_tepn4_1",D_={loader:R_},xr=({delay:e=Yr})=>{const[t,n]=x(!1);return A(()=>{const o=setTimeout(()=>n(!0),e);return()=>clearTimeout(o)},[e]),s("div",{class:D_.loader,style:{opacity:t?1:0}})},N_=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:r}=$(),[a,i]=x(!1),c=tt(null),u=w(l=>{o(!0),setTimeout(()=>{L_(c.current,{behavior:l,block:"start"},{duration:Qr})},Zr)},[o]);if(A(()=>{a&&t&&u(n?"instant":"smooth")},[a,t,n,u]),A(()=>{(async()=>(await _n(r,e.images),i(!0)))()},[e,i,r]),e.images.length===0&&e.isEmpty)return s(E,{});const d=k(d_.scene,"atrament-scene",t&&"atrament-scene-current",t&&a&&"animation_appear");return s("div",{class:d,ref:c,children:a?e.content.map((l,g)=>s(E,{children:[l.images.map((f,h)=>s(sn,{src:r(f)},`${h}-${f}`)),s(j_,{isCurrent:t,content:l})]},`paragraph-${e.uuid}-${g}`)):s(xr,{})})},F_="_choice_button_8vwt5_1",V_="_choice_active_8vwt5_26",H_="_choice_inactive_8vwt5_50",z_="_buttons_separate_8vwt5_72",U_="_buttons_grouped_8vwt5_79",B_="_buttons_grouped_row_8vwt5_102",G_="_left_aligned_8vwt5_124",W_="_right_aligned_8vwt5_128",q_="_buttons_borderless_8vwt5_133",ee={choice_button:F_,choice_active:V_,choice_inactive:H_,buttons_separate:z_,buttons_grouped:U_,buttons_grouped_row:B_,left_aligned:G_,right_aligned:W_,buttons_borderless:q_},K_=({choice:e,chosen:t,index:n,handleClick:o,choiceAppearance:r})=>{const a=t!==null,i=t===e.id,c=()=>{a||o(e.id)},u=a?i?ee.choice_active:ee.choice_inactive:"",_=r.grouped?r.row?ee.buttons_grouped_row:ee.buttons_grouped:ee.buttons_separate,d=r.left?ee.left_aligned:r.right?ee.right_aligned:"",l=k(ee.choice_button,_,d,u,r.borderless&&ee.buttons_borderless,"atrament-choice",e.tags.CLASS);return s("button",{class:l,onClick:c,disabled:e.disabled,children:[r.numbered?s(E,{children:[n+1,". "]}):"",s(Te,{children:e.choice})]})},Y_=({options:e,choices:t,selectChoice:n})=>{const{throwAtramentError:o}=$(),r=Re(`${e} `),a=(r.delay||0)*1e3,i=a/100,[c,u]=x(a),_=w(()=>{let d;if(r.choice?d=t.filter(l=>l.choice===r.choice):d=[t[Math.floor(Math.random()*t.length)]],!Array.isArray(d)||!d[0]){o(`Choice not found: ${JSON.stringify(r.choice)}`);return}n(d[0].id)},[t,n,r,o]);return A(()=>{const d=setInterval(()=>{u(l=>(l-i<=0&&(clearInterval(d),_()),l-i))},i);return()=>clearInterval(d)},[]),s(Qt,{options:{display:"thin",border:!1,min:0,max:a,value:c}})},X_="_choice_prompt_1t7pu_1",J_="_choice_row_1t7pu_13",Z_="_choice_row_ungrouped_1t7pu_19",St={choice_prompt:X_,choice_row:J_,choice_row_ungrouped:Z_},Q_=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=$(),{metadata:a}=L(["metadata"]),[i,c]=x(null),u=t.choices?.filter(m=>!m.tags?.HIDDEN),_=Array.isArray(u)?u.length:-1,d=_>1?Jr:Xr,l=w(m=>{c(m),setTimeout(()=>{c(null),n(!1),o(m),r()},d)},[o,r,n,d]),g=w(m=>{if(i!==null)return;const v=+m.key;m.target.tagName.toLowerCase()!=="input"&&_>0&&v>0&&v<=_&&!u[v-1].disabled&&l(u[v-1].id)},[_,l,u,i]);at(g);const f=t.tags?.CHOICES||a.choices,h={grouped:!!f?.includes("grouped"),left:!!f?.includes("left"),right:!!f?.includes("right"),numbered:!!f?.includes("numbered"),row:!!f?.includes("row"),borderless:!!f?.includes("borderless")},p=k(h.row&&St.choice_row,h.row&&!h.grouped&&St.choice_row_ungrouped,"atrament-choices");return s(E,{children:[t.tags?.PROMPT&&s("div",{class:k(St.choice_prompt,"atrament-prompt"),children:t.tags.PROMPT}),t.tags?.AUTO_CHOICE&&s(Y_,{options:t.tags.AUTO_CHOICE,choices:t.choices,selectChoice:l}),s("div",{class:p,children:u.map((m,v)=>s(K_,{index:v,choice:m,chosen:i,handleClick:l,choiceAppearance:h},`${e}-${v}`))})]})},ed="_container_1pyc1_10",td="_circle_1pyc1_18",nd="_circle_empty_1pyc1_53",xt={container:ed,circle:td,circle_empty:nd},ao=()=>document.getElementsByClassName("atrament-container-scene")[0],io=()=>document.getElementsByClassName("atrament-container-choices")[0],co=({setReady:e,withChoice:t=!1,delay:n=0,animation:o=0,clickable:r=0})=>{const{makeChoice:a,continueStory:i}=$(),[c,u]=x(!1),_=R(),d=w(()=>{setTimeout(()=>{e(!1),t&&a(0),i()},0)},[a,i,e,t]),l=w(h=>{(h.key===" "||h.key==="Enter")&&d()},[d]),g=w(()=>(document.addEventListener("keydown",l,!1),ao().addEventListener("click",d,!1),io().addEventListener("click",d,!1),0),[d,l]),f=w(()=>(document.removeEventListener("keydown",l,!1),ao().removeEventListener("click",d,!1),io().removeEventListener("click",d,!1),0),[d,l]);return A(()=>{const h=setTimeout(g,r*1e3),p=setTimeout(()=>u(!0),o*1e3),m=n?setTimeout(d,n*1e3):void 0;return()=>{clearTimeout(p),clearTimeout(h),clearTimeout(m),f()}},[g,f,d,u,r,n,o]),s("div",{class:xt.container,children:c?s("div",{class:k(xt.circle,n&&xt.circle_empty),title:_.translate("game.click-to-continue")}):""})};function od(e){const t={delay:0,animation:0,clickable:0};if(e.startsWith("(")){const n=Re(e.replace(/[()]/g,""));Object.entries(n).forEach(([o,r])=>t[o]=r),t.continue&&(t.delay=t.continue)}else e?t.delay=e:t.animation=3;return t}const rd=()=>{const{atrament:e}=$();return s(N,{accented:!0,onClick:async()=>{const n=e.game.getSaveSlotKey({type:e.game.SAVE_AUTOSAVE});await e.game.removeSave(n),se("/")},className:"atrament-game-end",children:s(T,{id:"game.end"})},"game-end")},sd=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t?.choices?t.choices.length:-1;if(r===1){const a=t.choices[0].choice.match(/^(|>>>(\d*|\(.+?\)))$/);if(a){const i=od(a[2]);return s(co,{setReady:n,withChoice:!0,delay:i.delay,animation:i.animation,clickable:i.clickable})}}else if(r===0)return t.canContinue?s(co,{setReady:n,animation:3}):s(rd,{});return o||!t?s(E,{}):s(Q_,{currentScene:t,setReady:n},e)},ad=()=>{const e=L(["scenes","metadata"]),[t,n]=x(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext||!!e.scenes[o]?.tags.HYPERTEXT,a=`choices-${e.scenes[o]?.uuid}`;return s(lt,{children:[s(i_,{align:e.metadata.scenes_align,children:e.scenes.map((i,c)=>s(N_,{scene:i,isCurrent:c===o,isSingle:o===0,readyHandler:n},i.uuid))}),s(u_,{isReady:t,children:s(sd,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},a)},a)]})},id="_overlay_container_1yvyk_1",cd="_overlay_header_1yvyk_11",ld="_overlay_header_modal_1yvyk_25",ud="_overlay_header_bottom_line_1yvyk_30",_d="_overlay_title_1yvyk_34",dd="_overlay_title_modal_1yvyk_43",fd="_overlay_content_1yvyk_47",hd="_button_back_1yvyk_62",B={overlay_container:id,overlay_header:cd,overlay_header_modal:ld,overlay_header_bottom_line:ud,overlay_title:_d,overlay_title_modal:dd,overlay_content:fd,button_back:hd};function gd({children:e,title:t,closeOverlay:n}){const[o,r]=x(!1),a=w(()=>{r(!0),setTimeout(n,Kt)},[r,n]),i=k(B.overlay_container,"transparent animation_appear animation_appear_overlay",o&&"animation_disappear","atrament-overlay-container"),c=k(B.overlay_header,B.overlay_header_bottom_line,"atrament-overlay-header"),u=k(B.overlay_title,"atrament-overlay-title"),_=k(B.overlay_content,"atrament-overlay-content");return s("div",{class:i,children:[s("div",{class:c,children:[s("button",{class:B.button_back,onClick:a,children:s(Ga,{})}),t&&s("div",{class:u,children:t})]}),s(lt,{children:s("div",{class:_,children:e})})]})}function pd({children:e,title:t,closeOverlay:n}){const[o,r]=x(!1),a=w(()=>{r(!0),setTimeout(n,Kt)},[r,n]),i=k("transparent animation_appear animation_appear_overlay",o&&"animation_disappear"),c=k(B.overlay_header,B.overlay_header_modal,t&&B.overlay_header_bottom_line,"atrament-overlay-header-modal"),u=k(B.overlay_title,B.overlay_title_modal,"atrament-overlay-title-modal"),_=k(B.overlay_content,"atrament-overlay-content-modal");return s(Yt,{className:i,children:[s(Xt,{onClick:a}),s(Jt,{children:[s("div",{class:c,children:[s("div",{class:u,children:t}),s("div",{children:s(rt,{onClick:a})})]}),s(lt,{children:s("div",{class:_,children:e})})]})]})}function md(){const{getAssetPath:e}=$(),{overlay:t,closeOverlay:n}=st(),[o,r]=x(!1),a=async()=>{await _n(e,zo(t.content)),r(!0)};return A(()=>{t.current&&a()}),[o,t,n]}const vd=e=>e===""||e===`
`?s(E,{}):s(un,{children:s(Te,{children:e})},Math.random()),bd=()=>{const[e,t,n]=md();if(!t.current)return s(E,{});const o=t.title?s(Te,{children:t.title}):"",r=e?t.content.map(vd):s(xr,{}),a=t.display==="modal"?pd:gd;return s(a,{title:o,closeOverlay:n,children:r})},lo=async(e,t,n)=>{await _n(e,[t]),n()},yd=()=>{const{getAssetPath:e}=$(),[t,n]=x({}),o=L(["game"]),r=o.game[Wt],a=o.game[qt];return A(()=>{r?lo(e,r,()=>n({"background-image":`url(${e(r)})`,"background-size":"cover","background-position":"center"})):n({})},[r,n,e]),A(()=>{lo(e,a,()=>fr(a,e))},[a,e]),s(He,{style:t,children:[s(on,{}),s(tn,{}),s(t_,{}),s(bd,{}),s(ad,{})]})};function kd(){const{evaluateInkFunction:e}=$(),{metadata:t}=L(["metadata"]),[n,o]=x(" ");return A(()=>{const r=e(t.about);o(r.output||" ")},[t.about,o,e]),n.split(`
`)}const wd=()=>se("/"),Sd=()=>{const e=kd();return s(He,{children:[s(on,{isHomeScreen:!0}),s(tn,{}),s(lt,{children:[s(Zt,{children:[s(te,{children:" "}),s(te,{children:e.map(t=>s(un,{children:s(Te,{children:t})},t))})]}),s(te,{children:s(N,{onClick:wd,children:s(T,{id:"main.menu"})},"mainmenu")})]})]})};function xd(){const{atrament:e}=$(),t=w(n=>{n.url==="/"&&n.previous&&e.game.clear()},[e.game]);return s(er,{history:Aa(),onChange:t,children:[s(Hc,{path:"/"}),s(yd,{path:"/game"}),s(Sd,{path:"/about"})]})}let Ct;function Cr(){window.innerHeight!==Ct&&(Ct=window.innerHeight,Ce("--screen-vh",`${Ct}px`))}window.addEventListener("resize",Cr);function Cd(){const[e,t]=x(null),[n,o]=x(null),[r,a]=x(0);return A(Cr,[]),A(()=>{(async()=>{const{default:c}=await me(async()=>{const{default:_}=await import("./atrament-CObjLBRG.js");return{default:_}},[],import.meta.url),{Story:u}=await me(async()=>{const{Story:_}=await import("./inkjs-BOXbcKQS.js");return{Story:_}},[],import.meta.url);c.interfaces.loader.onProgress(({percent:_})=>a(_));try{await Cs(c,u),t(c)}catch(_){console.error(_),o(_.message)}})()},[]),s(Ur,{language:Gr,locales:Is,children:s(Gt.Provider,{value:e,children:s(Rs,{children:e?s(xd,{}):n?s(He,{children:s(Jo,{message:n})}):s(ya,{loadedPercent:r})})})})}async function uo(){const t=window.screenX<-1e4||window.screenX>window.screen.availWidth+1e4,n=window.screenY<-1e4||window.screenY>window.screen.availHeight+1e4;(t||n)&&(console.warn("fixing unmaximize bug",window.screenX,window.screenY),await window.Neutralino.window.center())}window.Neutralino&&(addEventListener("resize",uo),addEventListener("DOMContentLoaded",uo));Pt(s(Cd,{}),document.getElementById("app"));export{me as _};
