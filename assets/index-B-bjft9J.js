(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var Re,C,co,_e,cn,lo,uo,_o,Dt,xt,Ct,fo,Ae={},ho=[],Sr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,De=Array.isArray;function Y(e,t){for(var n in t)e[n]=t[n];return e}function Ft(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function te(e,t,n){var o,r,a,i={};for(a in t)a=="key"?o=t[a]:a=="ref"?r=t[a]:i[a]=t[a];if(arguments.length>2&&(i.children=arguments.length>3?Re.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)i[a]===void 0&&(i[a]=e.defaultProps[a]);return Te(e,i,o,r,null)}function Te(e,t,n,o,r){var a={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++co,__i:-1,__u:0};return r==null&&C.vnode!=null&&C.vnode(a),a}function E(e){return e.children}function X(e,t){this.props=e,this.context=t}function ye(e,t){if(t==null)return e.__?ye(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ye(e):null}function go(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return go(e)}}function Et(e){(!e.__d&&(e.__d=!0)&&_e.push(e)&&!Ye.__r++||cn!=C.debounceRendering)&&((cn=C.debounceRendering)||lo)(Ye)}function Ye(){for(var e,t,n,o,r,a,i,c=1;_e.length;)_e.length>c&&_e.sort(uo),e=_e.shift(),c=_e.length,e.__d&&(n=void 0,o=void 0,r=(o=(t=e).__v).__e,a=[],i=[],t.__P&&((n=Y({},o)).__v=o.__v+1,C.vnode&&C.vnode(n),Vt(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,a,r??ye(o),!!(32&o.__u),i),n.__v=o.__v,n.__.__k[n.__i]=n,vo(a,n,i),o.__e=o.__=null,n.__e!=r&&go(n)));Ye.__r=0}function po(e,t,n,o,r,a,i,c,_,u,d){var l,g,f,h,p,b,m,v=o&&o.__k||ho,y=t.length;for(_=xr(n,t,v,_,y),l=0;l<y;l++)(f=n.__k[l])!=null&&(g=f.__i==-1?Ae:v[f.__i]||Ae,f.__i=l,b=Vt(e,f,g,r,a,i,c,_,u,d),h=f.__e,f.ref&&g.ref!=f.ref&&(g.ref&&Nt(g.ref,null,f),d.push(f.ref,f.__c||h,f)),p==null&&h!=null&&(p=h),(m=!!(4&f.__u))||g.__k===f.__k?_=mo(f,_,e,m):typeof f.type=="function"&&b!==void 0?_=b:h&&(_=h.nextSibling),f.__u&=-7);return n.__e=p,_}function xr(e,t,n,o,r){var a,i,c,_,u,d=n.length,l=d,g=0;for(e.__k=new Array(r),a=0;a<r;a++)(i=t[a])!=null&&typeof i!="boolean"&&typeof i!="function"?(typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?i=e.__k[a]=Te(null,i,null,null,null):De(i)?i=e.__k[a]=Te(E,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?i=e.__k[a]=Te(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):e.__k[a]=i,_=a+g,i.__=e,i.__b=e.__b+1,c=null,(u=i.__i=Cr(i,n,_,l))!=-1&&(l--,(c=n[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(r>d?g--:r<d&&g++),typeof i.type!="function"&&(i.__u|=4)):u!=_&&(u==_-1?g--:u==_+1?g++:(u>_?g--:g++,i.__u|=4))):e.__k[a]=null;if(l)for(a=0;a<d;a++)(c=n[a])!=null&&(2&c.__u)==0&&(c.__e==o&&(o=ye(c)),yo(c,c));return o}function mo(e,t,n,o){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=mo(r[a],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=ye(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ke(e,t){return t=t||[],e==null||typeof e=="boolean"||(De(e)?e.some(function(n){ke(n,t)}):t.push(e)),t}function Cr(e,t,n,o){var r,a,i,c=e.key,_=e.type,u=t[n],d=u!=null&&(2&u.__u)==0;if(u===null&&c==null||d&&c==u.key&&_==u.type)return n;if(o>(d?1:0)){for(r=n-1,a=n+1;r>=0||a<t.length;)if((u=t[i=r>=0?r--:a++])!=null&&(2&u.__u)==0&&c==u.key&&_==u.type)return i}return-1}function ln(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Sr.test(t)?n:n+"px"}function ze(e,t,n,o,r){var a,i;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||ln(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||ln(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(_o,"$1")),i=t.toLowerCase(),t=i in e||t=="onFocusOut"||t=="onFocusIn"?i.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?o?n.u=o.u:(n.u=Dt,e.addEventListener(t,a?Ct:xt,a)):e.removeEventListener(t,a?Ct:xt,a);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function un(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Dt++;else if(t.t<n.u)return;return n(C.event?C.event(t):t)}}}function Vt(e,t,n,o,r,a,i,c,_,u){var d,l,g,f,h,p,b,m,v,y,S,O,P,N,R,J,ce,H=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),a=[c=t.__e=n.__e]),(d=C.__b)&&d(t);e:if(typeof H=="function")try{if(m=t.props,v="prototype"in H&&H.prototype.render,y=(d=H.contextType)&&o[d.__c],S=d?y?y.props.value:d.__:o,n.__c?b=(l=t.__c=n.__c).__=l.__E:(v?t.__c=l=new H(m,S):(t.__c=l=new X(m,S),l.constructor=H,l.render=$r),y&&y.sub(l),l.state||(l.state={}),l.__n=o,g=l.__d=!0,l.__h=[],l._sb=[]),v&&l.__s==null&&(l.__s=l.state),v&&H.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Y({},l.__s)),Y(l.__s,H.getDerivedStateFromProps(m,l.__s))),f=l.props,h=l.state,l.__v=t,g)v&&H.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),v&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(v&&H.getDerivedStateFromProps==null&&m!==f&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,S),t.__v==n.__v||!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,S)===!1){for(t.__v!=n.__v&&(l.props=m,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(Z){Z&&(Z.__=t)}),O=0;O<l._sb.length;O++)l.__h.push(l._sb[O]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,S),v&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(f,h,p)})}if(l.context=S,l.props=m,l.__P=e,l.__e=!1,P=C.__r,N=0,v){for(l.state=l.__s,l.__d=!1,P&&P(t),d=l.render(l.props,l.state,l.context),R=0;R<l._sb.length;R++)l.__h.push(l._sb[R]);l._sb=[]}else do l.__d=!1,P&&P(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(o=Y(Y({},o),l.getChildContext())),v&&!g&&l.getSnapshotBeforeUpdate!=null&&(p=l.getSnapshotBeforeUpdate(f,h)),J=d,d!=null&&d.type===E&&d.key==null&&(J=bo(d.props.children)),c=po(e,De(J)?J:[J],t,n,o,r,a,i,c,_,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),b&&(l.__E=l.__=null)}catch(Z){if(t.__v=null,_||a!=null)if(Z.then){for(t.__u|=_?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else{for(ce=a.length;ce--;)Ft(a[ce]);$t(t)}else t.__e=n.__e,t.__k=n.__k,Z.then||$t(t);C.__e(Z,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Er(n.__e,t,n,o,r,a,i,_,u);return(d=C.diffed)&&d(t),128&t.__u?void 0:c}function $t(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach($t)}function vo(e,t,n){for(var o=0;o<n.length;o++)Nt(n[o],n[++o],n[++o]);C.__c&&C.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){C.__e(a,r.__v)}})}function bo(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:De(e)?e.map(bo):Y({},e)}function Er(e,t,n,o,r,a,i,c,_){var u,d,l,g,f,h,p,b=n.props||Ae,m=t.props,v=t.type;if(v=="svg"?r="http://www.w3.org/2000/svg":v=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(u=0;u<a.length;u++)if((f=a[u])&&"setAttribute"in f==!!v&&(v?f.localName==v:f.nodeType==3)){e=f,a[u]=null;break}}if(e==null){if(v==null)return document.createTextNode(m);e=document.createElementNS(r,v,m.is&&m),c&&(C.__m&&C.__m(t,a),c=!1),a=null}if(v==null)b===m||c&&e.data==m||(e.data=m);else{if(a=a&&Re.call(e.childNodes),!c&&a!=null)for(b={},u=0;u<e.attributes.length;u++)b[(f=e.attributes[u]).name]=f.value;for(u in b)if(f=b[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=f;else if(!(u in m)){if(u=="value"&&"defaultValue"in m||u=="checked"&&"defaultChecked"in m)continue;ze(e,u,null,f,r)}}for(u in m)f=m[u],u=="children"?g=f:u=="dangerouslySetInnerHTML"?d=f:u=="value"?h=f:u=="checked"?p=f:c&&typeof f!="function"||b[u]===f||ze(e,u,f,b[u],r);if(d)c||l&&(d.__html==l.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),po(t.type=="template"?e.content:e,De(g)?g:[g],t,n,o,v=="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,i,a?a[0]:n.__k&&ye(n,0),c,_),a!=null)for(u=a.length;u--;)Ft(a[u]);c||(u="value",v=="progress"&&h==null?e.removeAttribute("value"):h!=null&&(h!==e[u]||v=="progress"&&!h||v=="option"&&h!=b[u])&&ze(e,u,h,b[u],r),u="checked",p!=null&&p!=e[u]&&ze(e,u,p,b[u],r))}return e}function Nt(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){C.__e(r,n)}}function yo(e,t,n){var o,r;if(C.unmount&&C.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||Nt(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){C.__e(a,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&yo(o[r],t,n||typeof e.type!="function");n||Ft(e.__e),e.__c=e.__=e.__e=void 0}function $r(e,t,n){return this.constructor(e,n)}function Ot(e,t,n){var o,r,a,i;t==document&&(t=document.documentElement),C.__&&C.__(e,t),r=(o=!1)?null:t.__k,a=[],i=[],Vt(t,e=t.__k=te(E,null,[e]),r||Ae,Ae,t.namespaceURI,r?null:t.firstChild?Re.call(t.childNodes):null,a,r?r.__e:t.firstChild,o,i),vo(a,e,i)}function Or(e,t,n){var o,r,a,i,c=Y({},e.props);for(a in e.type&&e.type.defaultProps&&(i=e.type.defaultProps),t)a=="key"?o=t[a]:a=="ref"?r=t[a]:c[a]=t[a]===void 0&&i!=null?i[a]:t[a];return arguments.length>2&&(c.children=arguments.length>3?Re.call(arguments,2):n),Te(e.type,c,o||e.key,r||e.ref,null)}function Ze(e){function t(n){var o,r;return this.getChildContext||(o=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&o.forEach(function(i){i.__e=!0,Et(i)})},this.sub=function(a){o.add(a);var i=a.componentWillUnmount;a.componentWillUnmount=function(){o&&o.delete(a),i&&i.call(a)}}),n.children}return t.__c="__cC"+fo++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}Re=ho.slice,C={__e:function(e,t,n,o){for(var r,a,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(c){e=c}throw e}},co=0,X.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Y({},this.state),typeof e=="function"&&(e=e(Y({},n),this.props)),e&&Y(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Et(this))},X.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Et(this))},X.prototype.render=E,_e=[],lo=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,uo=function(e,t){return e.__v.__b-t.__v.__b},Ye.__r=0,_o=/(PointerCapture)$|Capture$/i,Dt=0,xt=un(!1),Ct=un(!0),fo=0;var Tr=0;function s(e,t,n,o,r,a){t||(t={});var i,c,_=t;if("ref"in _)for(c in _={},t)c=="ref"?i=t[c]:_[c]=t[c];var u={type:e,props:_,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Tr,__i:-1,__u:0,__source:r,__self:a};if(typeof e=="function"&&(i=e.defaultProps))for(c in i)_[c]===void 0&&(_[c]=i[c]);return C.vnode&&C.vnode(u),u}const Pr="modulepreload",Ar=function(e,t){return new URL(e,t).href},_n={},ge=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(l=>Promise.resolve(l).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const i=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),_=c?.nonce||c?.getAttribute("nonce");r=u(n.map(d=>{if(d=Ar(d,o),d in _n)return;_n[d]=!0;const l=d.endsWith(".css"),g=l?'[rel="stylesheet"]':"";if(o)for(let h=i.length-1;h>=0;h--){const p=i[h];if(p.href===d&&(!l||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${g}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":Pr,l||(f.as="script"),f.crossOrigin="",f.href=d,_&&f.setAttribute("nonce",_),document.head.appendChild(f),l)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return r.then(i=>{for(const c of i||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};var we,j,lt,dn,Le=0,ko=[],M=C,fn=M.__b,hn=M.__r,gn=M.diffed,pn=M.__c,mn=M.unmount,vn=M.__;function Qe(e,t){M.__h&&M.__h(j,e,Le||t),Le=0;var n=j.__H||(j.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function x(e){return Le=1,Lr(So,e)}function Lr(e,t,n){var o=Qe(we++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):So(void 0,t),function(c){var _=o.__N?o.__N[0]:o.__[0],u=o.t(_,c);_!==u&&(o.__N=[u,o.__[1]],o.__c.setState({}))}],o.__c=j,!j.__f)){var r=function(c,_,u){if(!o.__c.__H)return!0;var d=o.__c.__H.__.filter(function(g){return!!g.__c});if(d.every(function(g){return!g.__N}))return!a||a.call(this,c,_,u);var l=o.__c.props!==c;return d.forEach(function(g){if(g.__N){var f=g.__[0];g.__=g.__N,g.__N=void 0,f!==g.__[0]&&(l=!0)}}),a&&a.call(this,c,_,u)||l};j.__f=!0;var a=j.shouldComponentUpdate,i=j.componentWillUpdate;j.componentWillUpdate=function(c,_,u){if(this.__e){var d=a;a=void 0,r(c,_,u),a=d}i&&i.call(this,c,_,u)},j.shouldComponentUpdate=r}return o.__N||o.__}function A(e,t){var n=Qe(we++,3);!M.__s&&wo(n.__H,t)&&(n.__=e,n.u=t,j.__H.__h.push(n))}function et(e){return Le=5,Ht(function(){return{current:e}},[])}function Ht(e,t){var n=Qe(we++,7);return wo(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function k(e,t){return Le=8,Ht(function(){return e},t)}function ie(e){var t=j.context[e.__c],n=Qe(we++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(j)),t.props.value):e.__}function Ir(){for(var e;e=ko.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(qe),e.__H.__h.forEach(Tt),e.__H.__h=[]}catch(t){e.__H.__h=[],M.__e(t,e.__v)}}M.__b=function(e){j=null,fn&&fn(e)},M.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),vn&&vn(e,t)},M.__r=function(e){hn&&hn(e),we=0;var t=(j=e.__c).__H;t&&(lt===j?(t.__h=[],j.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(qe),t.__h.forEach(Tt),t.__h=[],we=0)),lt=j},M.diffed=function(e){gn&&gn(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ko.push(t)!==1&&dn===M.requestAnimationFrame||((dn=M.requestAnimationFrame)||jr)(Ir)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),lt=j=null},M.__c=function(e,t){t.some(function(n){try{n.__h.forEach(qe),n.__h=n.__h.filter(function(o){return!o.__||Tt(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],M.__e(o,n.__v)}}),pn&&pn(e,t)},M.unmount=function(e){mn&&mn(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{qe(o)}catch(r){t=r}}),n.__H=void 0,t&&M.__e(t,n.__v))};var bn=typeof requestAnimationFrame=="function";function jr(e){var t,n=function(){clearTimeout(o),bn&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);bn&&(t=requestAnimationFrame(n))}function qe(e){var t=j,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),j=t}function Tt(e){var t=j;e.__c=e.__(),j=t}function wo(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function So(e,t){return typeof t=="function"?t(e):t}var oe,Pt=function(e,t){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])},Pt(e,t)},yn=(function(e){function t(n,o){var r=e.call(this,"Translation failed")||this;return r.id=n,r.language=o,r}return(function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+o+" is not a constructor or null");function r(){this.constructor=n}Pt(n,o),n.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)})(t,e),t.is=function(n){return n instanceof t},t})(Error),Mr=(function(){function e(t){this.input=t,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return e.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},e.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},e})();(function(e){e[e.Plural=0]="Plural",e[e.Select=1]="Select",e[e.Text=2]="Text",e[e.Variable=3]="Variable"})(oe||(oe={}));var Rr=["{","}",","],Dr=(function(){function e(t){this.input=new Mr(t)}return e.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},e.prototype.skip=function(t){t!==this.input.value&&this.input.croak(),this.input.next()},e.prototype.readWhile=function(t){for(var n="";!this.input.done&&t(this.input.value);)n+=this.input.value,this.input.next();return n},e.prototype.readVariable=function(){this.skip("{");var t=this.readWhile((function(o){return!(function(r){return Rr.includes(r)})(o)})).trim();if(t.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:oe.Variable,value:t};this.skip(",");var n=this.readVariableType();return{options:this.readVariableOptions(),type:n,value:t}},e.prototype.readText=function(){return{type:oe.Text,value:this.readWhile((function(t){return t!=="{"&&t!=="}"}))}},e.prototype.readVariableType=function(){var t=this.readWhile((function(n){return n!==","})).trim();return t==="plural"?oe.Plural:t==="select"?oe.Select:void this.input.croak()},e.prototype.readVariableOptions=function(){this.skip(",");for(var t={};this.input.value!=="}";)t[this.readText().value.trim()]=this.readExpression();return this.skip("}"),t},e.prototype.readExpression=function(){var t=[];for(this.skip("{");this.input.value!=="}";)t.push(this.next());return this.skip("}"),t},e})();function Fr(e,t,n){for(var o=new Dr(t),r=[],a=function(i){var c=i.options,_=i.type,u=i.value;if(_!==oe.Variable)if(c)if(_!==oe.Select)try{r.concat(c[new Intl.PluralRules(e).select(n[u])].map(a))}catch{r.concat(c.other.map(a))}else r.concat((c[n[u]]||c.other).map(a));else r.push(u);else r.push(n[u])};!o.input.done;)a(o.next());return r}var xo=function(e,t){e===void 0&&(e="en"),t===void 0&&(t=[]);var n=this;this.memo={},this.onError=console.error,this.formatDate=function(r,a){return new Intl.DateTimeFormat(n.language,a).format(r)},this.formatNumber=function(r,a){return new Intl.NumberFormat(n.language,a).format(r)},this.translate=function(r,a){a===void 0&&(a={});var i=n.getMessageById(r,a.defaultMessage);if(typeof i=="string")try{return Fr(n.language,i,a).join("")}catch{n.onError(new yn(r,n.language))}return i+""},this.getMessageById=function(r,a){if(!n.memo[r]){var i=n.messages[r];i===void 0&&(i=r.split(".").reduce((function(c,_){return c?c[_]:void 0}),n.messages)),typeof i!="string"&&(n.onError(new yn(r,n.language)),i=a||r),n.memo[r]=i}return n.memo[r]};var o=t.find((function(r){return r.language===e}));this.language=e,this.messages=o?o.messages:{}};function Vr(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var zt=Ze({language:"",locales:[],setLanguage:function(){},translator:new xo}),Nr=function(e){var t=e.children,n=e.language,o=e.locales,r=e.onError,a=x(n);A((function(){a[1](n)}),[n]);var i=new xo(a[0],o);return r&&(i.onError=r),te(zt.Provider,{value:{language:a[0],locales:o,setLanguage:a[1],translator:i}},t)};function F(e){var t=ie(zt);return t.translator}var T=function(e){var t=e.html,n=e.id,o=e.tagName,r=o===void 0?"span":o,a=Vr(e,["children","html","id","tagName"]),i=ie(zt).translator.translate(n,a);return t?te(r,{dangerouslySetInnerHTML:{__html:i}}):te(E,null,i)};const Ut=Ze(null),Fe=Ze(!0),re=window.$atramentConfig,Co="2.4.1",Eo=re.game?.zip?re.game?.zip:re.game?.path,$o=re.game.script,Hr=["Atrament://",window.location.host,window.location.pathname,Eo,"/",$o].join(""),zr=re.language||"en",Oo=re.locale||"en-US",To=re.theme,At=re.font,tt=100,nt=10,Lt=tt-nt*3,It=tt+nt*5,Ur=50,Pe="ERROR",K="OVERLAY",me="TOOLBAR",Po="__DEFAULT__",Ao="$story_path",Bt="background",Gt="background_page",Br=["title","author","theme","font","observe","persist","sessions","autosave","saves","load_from_checkpoints","continue_maximally","single_scene","scenes_align","choices","hypertext","toolbar","about","cover","background","debug","allow_external_function_fallbacks"],Oe='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Lo={System:`-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, system-ui, sans-serif, ${Oe}`,"Sans Serif":`"Trebuchet MS", "Lucida Grande", Arial, Helvetica, sans-serif, ${Oe}`,Serif:`"Palatino", "Cambria", "Lucida Bright", "Georgia", "Times New Roman", serif, ${Oe}`,Monospaced:`"Monaco", "Consolas", "Lucida Console", "Courier New", monospaced, ${Oe}`},Gr=300,Wr=150,qr=350,Kr=100,Yr=300;function Xr(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}let fe={...Lo};(async()=>{{const e={},t=Object.assign({"../resources/fonts/fira-sans/index.js":()=>ge(()=>import("./index-b2Wiy-3h.js"),[],import.meta.url).then(n=>n.default),"../resources/fonts/lora/index.js":()=>ge(()=>import("./index-vD2XuNa7.js"),[],import.meta.url).then(n=>n.default),"../resources/fonts/merriweather/index.js":()=>ge(()=>import("./index-BL7-vEOC.js"),[],import.meta.url).then(n=>n.default),"../resources/fonts/opendyslexic/index.js":()=>ge(()=>import("./index-C2AfKi6L.js"),[],import.meta.url).then(n=>n.default)});await Promise.all(Object.values(t).map(n=>n().then(o=>{o.name&&(e[o.name]=`${o.name}, ${o.fallback||"serif"}, ${Oe}`)}))),Object.keys(e).sort().forEach(n=>fe[n]=e[n])}})();function Jr(e){document.documentElement.style.setProperty("--font-face-game",fe[e]||fe[At])}function Zr(e){document.documentElement.style.setProperty("--font-face-ui",fe[e]||Lo.System)}function Qr(e){const t=e.state.get().metadata.theme||To;e.settings.get("theme")||e.settings.set("theme",t)}function es(e){const t=e.state.get().metadata.font||At;e.settings.get("font")||e.settings.set("font",t),Zr(At)}const Io="dark",jo={"bg-color":"#4c3b4d","fg-color":"#FCFCFC","shade-color":"rgba(255, 255, 255, 0.1)","font-color":"#EEEEEE","accent-bg-color":"#4c3b4d","accent-fg-color":"#F7567C","accent-inverse-color":"#EEEEEE","border-radius":"0.5rem","border-radius-inline":"0.25rem"},ts={name:Io,theme:jo},ns=Object.freeze(Object.defineProperty({__proto__:null,default:ts,name:Io,theme:jo},Symbol.toStringTag,{value:"Module"})),Mo="light",Ro={"bg-color":"#FCFCFC","fg-color":"#5D576B","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#FCFCFC","accent-fg-color":"#F7567C","accent-inverse-color":"#FCFCFC","border-radius":"0.5rem","border-radius-inline":"0.25rem"},os={name:Mo,theme:Ro},rs=Object.freeze(Object.defineProperty({__proto__:null,default:os,name:Mo,theme:Ro},Symbol.toStringTag,{value:"Module"})),Do="sepia",Fo={"bg-color":"#ffeedb","fg-color":"#4c3b4d","shade-color":"rgba(0, 0, 0, 0.1)","font-color":"#333333","accent-bg-color":"#ffeedb","accent-fg-color":"#a53850","accent-inverse-color":"#ffeedb","border-radius":"0.5rem","border-radius-inline":"0.25rem"},ss={name:Do,theme:Fo},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,name:Do,theme:Fo},Symbol.toStringTag,{value:"Module"})),ve={},be={},is=Object.assign({"../resources/themes/dark.json":ns,"../resources/themes/light.json":rs,"../resources/themes/sepia.json":as});Object.values(is).map(({default:e})=>{e&&(be[e.name]=e.theme)});["light","sepia","dark"].forEach(e=>{be[e]&&(ve[e]=be[e],delete be[e])});Object.keys(be).sort().forEach(e=>ve[e]=be[e]);function cs(e){!e||!ve[e]||Object.entries(ve[e]||ve[To]).forEach(([t,n])=>{document.documentElement.style.setProperty(`--${t}`,n)})}function ls(e){e.settings.defineHandler("theme",(t,n)=>{cs(n)}),e.settings.defineHandler("font",(t,n)=>{Jr(n)}),e.settings.defineHandler("fontSize",(t,n)=>{document.documentElement.style.setProperty("--game-font-size",`${n}%`)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")}),e.settings.defineHandler("fullscreen",(t,n)=>{e.interfaces.platform.setFullscreen(n,o=>{e.settings.set("fullscreen",o),e.settings.save()})})}function us(e){if(!Array.isArray(e))throw new TypeError(`Expected an array, got ${typeof e}`);if(e.length===0)return[];const t=JSON.parse(JSON.stringify(e));for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}function kn(e,t={}){let n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\].*?\\[\\/${e}\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\](.*?)\\[\\/${e}\\]`,"i");return t.single&&(n=new RegExp(`\\[${e}(?:=[^\\]]+|\\s+[^\\]]+)?\\]`,"ig"),o=new RegExp(`\\[${e}(.*?)\\]`,"i")),{matcher:n,parser:o}}const _s=[kn("img"),kn("picture")];function Vo(e){if(!e)return[];const t={};return e.forEach(n=>{_s.forEach(o=>{n?.match(o.matcher)?.forEach(r=>{const a=r.match(o.parser);t[a[2]]=!0})})}),Object.keys(t)}function ds(e){const t=e.tags?.BACKGROUND;typeof t<"u"&&(e.images.push(t),this.state.setSubkey("game",Bt,t));const n=e.tags?.PAGE_BACKGROUND;typeof n<"u"&&(e.images.push(n),this.state.setSubkey("game",Gt,n))}function fs(e){e.tags?.SHUFFLE_CHOICES&&(e.choices=us(e.choices))}function hs(e){const t=Vo(e.content?.map(n=>n.text));e.images.push(...t)}function gs(e){[ds,fs,hs].forEach(t=>e.game.defineSceneProcessor(t.bind(e)))}function ps(e){Object.values(Object.assign({})).map(({default:n})=>e.ink.story().BindExternalFunction(n.name,n.external.bind(e),n.lookaheadSafe||!1))}function No(e){e.state.setKey(K,{current:null,content:"",title:null,display:null})}function ms(e,t){const n=()=>{let r;try{r=e.ink.evaluateFunction(t,[],!0),e.state.setKey(me,r.output)}catch(a){e.ink.story().onError(a.toString())}},o=()=>setTimeout(n,0);e.on("game/start",o),e.on("game/continueStory",o),e.on("ink/evaluateFunction",r=>{r.function!==t&&o()})}function vs(e){const t=e.state.get().metadata;t.toolbar?ms(e,t.toolbar):t.title?e.state.setKey(me,t.title):e.state.setKey(me,Po),No(e)}function bs(e){No(e)}async function ys(e,t){e.on("*",(o,r)=>console.log(`%c Atrament > ${o} `,"color: #111111; background-color: #7FDBFF;",r)),ls(e),await e.init(t,{applicationID:Hr,settings:{fullscreen:!1,animation:!0,mute:!1,volume:Ur,fontSize:tt}}),e.on("game/initInkStory",()=>vs(e)),e.on("game/start",()=>bs(e)),await e.game.init(Eo,$o),await e.game.initInkStory(),Qr(e),es(e),gs(e),ps(e),Xr(e);const n=e.state.get().metadata;n.title&&e.interfaces.platform.setTitle(n.title),n.allow_external_function_fallbacks&&(e.ink.story().allowExternalFunctionFallbacks=!0),e.ink.onError(o=>e.state.setKey(Pe,o)),n.debug&&e.on("game/continueStory",()=>{const o=e.ink.story().state.previousPathString;e.state.setSubkey("game",Ao,o)})}const Ho="de",zo={yes:"Ja",no:"Nein",cancel:"Abbrechen",back:"Zurück","default.title":"Atrament UI","default.author":"Testanwendung","main.menu":"Hauptmenü","main.newgame":"Neues Spiel","main.loadgame":"Spiel laden","main.savegame":"Spiel speichern","main.continue":"Fortsetzen","main.emptyslot":"Leerer Speicherstand","main.continue-session":"Spiel fortsetzen {session}","main.autosave":"Automatisch gespeichert: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"Neuer Speicherstand","main.delete-session":"Diese Sitzung löschen?","main.delete-save":"Diesen Speicherstand löschen?","main.confirm-load":"Dieses Spiel laden?","main.confirm-save":"Diesen Speicherstand überschreiben?","main.settings":"Einstellungen","main.about":"Über","main.exit":"Beenden","icon.menu":"Menü","icon.back":"Zurück","icon.debugger":"Debugger","game.end":"Ende","game.save-and-quit":"Speichern und beenden","game.quit":"Spiel beenden","game.click-to-continue":"Klicke, um fortzufahren","settings.fullscreen":"Vollbild","settings.animations":"Animationen","settings.sound":"Ton","settings.appearance":"Darstellung","themes.light":"Hell","themes.sepia":"Sepia","themes.dark":"Dunkel","font.sampleText":"Franz jagt im komplett verwahrlosten Taxi quer durch Bayern. äöüßé ÄÖÜẞÉ",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink-Datei","debug.info.story-seed":"Story-Seed","debug.info.current-turn-index":"Aktueller Zug: Index","debug.info.path":"Pfad","debug.global-tags":"Globale Tags","debug.unknown-tag":"Unbekannter Tag","debug.variables":"Variablen","debug.variables.filter-by-name":"Nach Namen filtern","debug.variables.name":"Name","debug.variables.value":"Wert","debug.variables.cancel":"Abbrechen","debug.variables.save":"Speichern","debug.visits":"Aufrufe","debug.visits.path":"Pfad","debug.visits.count":"Anzahl","debug.go-to-path":"Gehe zu Pfad","debug.functions":"Funktionen","debug.functions.arguments":"Argumente","debug.functions.arguments_placeholder":'JSON-formatierte Argumente, z. B. ["arg1", 5]',"debug.functions.run-function":"Funktion ausführen","debug.functions.returned-value":"Rückgabewert","debug.functions.output":"Ausgabe","about.components":"Komponenten und Bibliotheken","about.iftf_support":"Erstellt mit Unterstützung der {iftf}"},ks={language:Ho,messages:zo},ws=Object.freeze(Object.defineProperty({__proto__:null,default:ks,language:Ho,messages:zo},Symbol.toStringTag,{value:"Module"})),Uo="en",Bo={yes:"Yes",no:"No",cancel:"Cancel",back:"Go back","default.title":"Atrament UI","default.author":"Test Application","main.menu":"Main menu","main.newgame":"New game","main.loadgame":"Load game","main.savegame":"Save game","main.continue":"Continue","main.emptyslot":"Empty slot","main.continue-session":"Continue game {session}","main.autosave":"Autosave: {date}","main.checkpoint":"Checkpoint","main.checkpoint-named":"Checkpoint: {name}","main.new-save":"New save","main.delete-session":"Delete this session?","main.delete-save":"Delete this saved game?","main.confirm-load":"Load this game?","main.confirm-save":"Overwrite this save?","main.settings":"Settings","main.about":"About","main.exit":"Exit","icon.menu":"Menu","icon.back":"Back","icon.debugger":"Debugger","game.end":"The end","game.save-and-quit":"Save game and quit","game.quit":"Quit game","game.click-to-continue":"Click to continue","settings.fullscreen":"Fullscreen","settings.animations":"Animations","settings.sound":"Sound","settings.appearance":"Appearance","themes.light":"light","themes.sepia":"sepia","themes.dark":"dark","font.sampleText":"The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz.",debug:"Debug","debug.info":"Info","debug.info.ink-file":"Ink file","debug.info.story-seed":"Story seed","debug.info.current-turn-index":"Current turn index","debug.info.path":"Path","debug.global-tags":"Global tags","debug.unknown-tag":"Unknown tag","debug.variables":"Variables","debug.variables.filter-by-name":"Filter by name","debug.variables.name":"Name","debug.variables.value":"Value","debug.variables.cancel":"Cancel","debug.variables.save":"Save","debug.visits":"Visits","debug.visits.path":"Path","debug.visits.count":"Count","debug.go-to-path":"Go to path","debug.functions":"Functions","debug.functions.arguments":"Arguments","debug.functions.arguments_placeholder":'JSON-formatted agruments, i.e. ["arg1", 5]',"debug.functions.run-function":"Run function","debug.functions.returned-value":"Returned value","debug.functions.output":"Output","about.components":"Components and libraries","about.iftf_support":"Made with the support of the {iftf}"},Ss={language:Uo,messages:Bo},xs=Object.freeze(Object.defineProperty({__proto__:null,default:Ss,language:Uo,messages:Bo},Symbol.toStringTag,{value:"Module"})),Go="ua",Wo={yes:"Так",no:"Ні",cancel:"Скасувати",back:"Назад","default.title":"Atrament UI","default.author":"Тестовий застосунок","main.menu":"Головне меню","main.newgame":"Нова гра","main.loadgame":"Завантажити гру","main.savegame":"Зберегти гру","main.continue":"Продовжити","main.emptyslot":"Порожній слот","main.continue-session":"Продовжити гру {session}","main.autosave":"Автозбереження: {date}","main.checkpoint":"Контрольна точка","main.checkpoint-named":"Контрольна точка: {name}","main.new-save":"Нове збереження","main.delete-session":"Видалити сесію?","main.delete-save":"Видалити збережену гру?","main.confirm-load":"Завантажити цю гру?","main.confirm-save":"Перезаписати це збереження?","main.settings":"Налаштування","main.about":"Про гру","main.exit":"Вихід","icon.menu":"Меню","icon.back":"Назад","icon.debugger":"Налагодження","game.end":"Кінець","game.save-and-quit":"Зберегти гру та вийти","game.quit":"Вийти з гри","game.click-to-continue":"Натисни, щоб продовжити","settings.fullscreen":"На весь екран","settings.animations":"Анімації","settings.sound":"Звук","settings.appearance":"Вигляд","themes.light":"Світла","themes.sepia":"Сепія","themes.dark":"Темна","font.sampleText":"Хвацький юшковар Філіп щодня на ґанку готує сім'ї вечерю з жаб.",debug:"Налагодження","debug.info":"Інформація","debug.info.ink-file":"Ink-скрипт","debug.info.story-seed":"RNG-сід історії","debug.info.current-turn-index":"Індекс поточного ходу","debug.info.path":"Поточний шлях","debug.global-tags":"Глобальні теги","debug.unknown-tag":"Невідомий тег","debug.variables":"Змінні","debug.variables.filter-by-name":"Фільтр за ім'ям","debug.variables.name":"Ім'я","debug.variables.value":"Значення","debug.variables.cancel":"Скасувати","debug.variables.save":"Зберегти","debug.visits":"Візити","debug.visits.path":"Шлях","debug.visits.count":"Переходи","debug.go-to-path":"Перейти до","debug.functions":"Функції","debug.functions.arguments":"Аргументи","debug.functions.arguments_placeholder":'Аргументи у JSON-форматі, наприклад: ["arg1", 5]',"debug.functions.run-function":"Виконати функцію","debug.functions.returned-value":"Повернене значення","debug.functions.output":"Вивід","about.components":"Компоненти та бібліотеки","about.iftf_support":"Зроблено за підтримки фонду {iftf}"},Cs={language:Go,messages:Wo},Es=Object.freeze(Object.defineProperty({__proto__:null,default:Cs,language:Go,messages:Wo},Symbol.toStringTag,{value:"Module"})),$s=Object.assign({"../resources/locales/de.json":ws,"../resources/locales/en.json":xs,"../resources/locales/ua.json":Es}),Os=Object.values($s);function qo(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=qo(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function w(){for(var e,t,n=0,o="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=qo(e))&&(o&&(o+=" "),o+=t);return o}const Ts="_application_wrapper_13ojs_1",Ps={application_wrapper:Ts},As=({children:e})=>s("div",{class:w(Ps.application_wrapper,"atrament-ui-app"),children:e}),Ls="_error_modal_content_njm9y_1",Is="_error_message_njm9y_8",wn={error_modal_content:Ls,error_message:Is},js="_container_modal_fhjmv_1",Ms={container_modal:js},Wt=({children:e})=>s("div",{class:w(Ms.container_modal,"atrament-container-modal"),children:e}),Rs="_backdrop_rne3i_1",Ds={backdrop:Rs},qt=({onClick:e})=>s("div",{class:w(Ds.backdrop,"atrament-backdrop"),onClick:e}),Fs="_modal_1mg2r_1",Vs={modal:Fs},Kt=({children:e})=>s("div",{class:w(Vs.modal,"atrament-modal"),children:e}),Ns="_close_eyo4x_1",Hs={close:Ns},ot=({onClick:e})=>s("div",{class:Hs.close,children:s("button",{onClick:e,title:"Close",children:"✕"})}),zs="_block_5hv3c_1",Us="_block_start_5hv3c_6",Bs="_block_end_5hv3c_10",ut={block:zs,block_start:Us,block_end:Bs},ee=({children:e,align:t=null})=>{const n=w(ut.block,t==="start"&&ut.block_start,t==="end"&&ut.block_end,"atrament-block");return s("div",{class:n,children:e})},_t=()=>{},Ko=({close:e=_t,message:t})=>s(Wt,{children:[s(qt,{onClick:_t}),s(Kt,{children:s("div",{class:wn.error_modal_content,children:[e!==_t?s(ot,{onClick:e}):"",s(ee,{children:s("p",{class:wn.error_message,children:t})})]})})]}),Gs="_container_4l08p_1",Ws={container:Gs},Ve=({children:e,style:t={}})=>s("div",{style:t,class:w(Ws.container,"atrament-container"),children:e}),qs="_loading_obrk7_1",Ks="_progressbar_obrk7_9",Sn={loading:qs,progressbar:Ks},Ys="_container_flex_at0vo_1",Xs={container_flex:Ys},Yt=({cssClass:e="",children:t})=>s("div",{class:w(Xs.container_flex,e,"atrament-flex-container"),children:t}),Js="_sk_cube_grid_fv0g6_1",Zs="_sk_cube1_fv0g6_17",Qs="_sk_cube2_fv0g6_18",ea="_sk_cube3_fv0g6_19",ta="_sk_cube4_fv0g6_20",na="_sk_cube5_fv0g6_21",oa="_sk_cube6_fv0g6_22",ra="_sk_cube7_fv0g6_23",sa="_sk_cube8_fv0g6_24",aa="_sk_cube9_fv0g6_25",q={sk_cube_grid:Js,sk_cube1:Zs,sk_cube2:Qs,sk_cube3:ea,sk_cube4:ta,sk_cube5:na,sk_cube6:oa,sk_cube7:ra,sk_cube8:sa,sk_cube9:aa},ia=()=>s("div",{class:q.sk_cube_grid,children:[s("div",{class:q.sk_cube1}),s("div",{class:q.sk_cube2}),s("div",{class:q.sk_cube3}),s("div",{class:q.sk_cube4}),s("div",{class:q.sk_cube5}),s("div",{class:q.sk_cube6}),s("div",{class:q.sk_cube7}),s("div",{class:q.sk_cube8}),s("div",{class:q.sk_cube9})]}),ca="_progress_frame_15ixd_1",la="_progress_bar_15ixd_8",ua="_progress_bar_solid_15ixd_15",_a="_standard_15ixd_19",da="_accent_15ixd_23",fa="_borderless_15ixd_27",ha="_progress_content_15ixd_31",le={progress_frame:ca,progress_bar:la,progress_bar_solid:ua,standard:_a,accent:da,borderless:fa,progress_content:ha},Xt=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let a=r?(r-n)*100/(o-n):0;a>100&&(a=100),a<0&&(a=0);const i=w(le.progress_frame,e.border===!1&&le.borderless,"atrament-tag-progressbar",e.class),c=w(le.progress_bar,e.style==="accent"?le.accent:le.standard,e.solid&&le.progress_bar_solid,"atrament-tag-progressbar-gauge");return s("div",{class:i,children:[s("div",{class:c,style:{width:`${a}%`}}),s("div",{class:w(le.progress_content,"atrament-tag-progressbar-content"),children:[t,e.display==="thin"?"":s(E,{children:" "})]})]})},ga=({loadedPercent:e=0})=>s(Ve,{children:s(Yt,{children:s("div",{class:w(Sn.loading,"atrament-loading"),children:[s(ia,{}),s("div",{class:w(Sn.progressbar,"atrament-loading-progressbar"),children:e>0?s(Xt,{options:{display:"thin",solid:!0,value:e}}):""})]})})});var pa={};function Ue(e,t){for(var n in t)e[n]=t[n];return e}function ma(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,a=e.match(r),i={};if(a&&a[1])for(var c=a[1].split("&"),_=0;_<c.length;_++){var u=c[_].split("=");i[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=jt(e.replace(r,"")),t=jt(t||"");for(var d=Math.max(e.length,t.length),l=0;l<d;l++)if(t[l]&&t[l].charAt(0)===":"){var g=t[l].replace(/(^:|[+*?]+$)/g,""),f=(t[l].match(/[+*?]+$/)||pa)[0]||"",h=~f.indexOf("+"),p=~f.indexOf("*"),b=e[l]||"";if(!b&&!p&&(f.indexOf("?")<0||h)){o=!1;break}if(i[g]=decodeURIComponent(b),h||p){i[g]=e.slice(l).map(decodeURIComponent).join("/");break}}else if(t[l]!==e[l]){o=!1;break}return(n.default===!0||o!==!1)&&i}function va(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function ba(e,t){return e.index=t,e.rank=(function(n){return n.props.default?0:jt(n.props.path).map(ya).join("")})(e),e.props}function jt(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function ya(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var ka={},de=[],xn=[],z=null,Yo={url:Jt()},wa=Ze(Yo);function Jt(){var e;return""+((e=z&&z.location?z.location:z&&z.getCurrentLocation?z.getCurrentLocation():typeof location<"u"?location:ka).pathname||"")+(e.search||"")}function se(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),(function(n){for(var o=de.length;o--;)if(de[o].canRoute(n))return!0;return!1})(e)&&(function(n,o){o===void 0&&(o="push"),z&&z[o]?z[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)})(e,t?"replace":"push"),Xo(e)}function Xo(e){for(var t=!1,n=0;n<de.length;n++)de[n].routeTo(e)&&(t=!0);return t}function Sa(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return se(t)}}function xa(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Ca(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Sa(t))return xa(e)}while(t=t.parentNode)}}var Cn=!1;function Jo(e){e.history&&(z=e.history),this.state={url:e.url||Jt()}}Ue(Jo.prototype=new X,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=ke(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;Cn||(Cn=!0,z||addEventListener("popstate",function(){Xo(Jt())}),addEventListener("click",Ca)),de.push(this),z&&(this.u=z.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),de.splice(de.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(ba).sort(va);for(var n=0;n<e.length;n++){var o=e[n],r=ma(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,a=t.url,i=this.c,c=this.g(ke(e.children),a);if(c&&(o=Or(c[0],Ue(Ue({url:a,matches:n=c[1]},n),{key:void 0,ref:void 0}))),a!==(i&&i.url)){Ue(Yo,i=this.c={url:a,previous:i&&i.url,current:o,path:o?o.props.path:null,matches:n}),i.router=this,i.active=o?[o]:[];for(var _=xn.length;_--;)xn[_]({});typeof r=="function"&&r(i)}return te(wa.Provider,{value:i},o)}});function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Xe.apply(null,arguments)}var pe;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pe||(pe={}));var En=function(e){return e};function Ea(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,a=o.map(function(y){var S=En(Xe({pathname:"/",search:"",hash:"",state:null,key:Tn()},typeof y=="string"?Pn(y):y));return S}),i=$n(r??a.length-1,0,a.length-1),c=pe.Pop,_=a[i],u=On(),d=On();function l(y){return typeof y=="string"?y:$a(y)}function g(y,S){return S===void 0&&(S=null),En(Xe({pathname:_.pathname,search:"",hash:""},typeof y=="string"?Pn(y):y,{state:S,key:Tn()}))}function f(y,S,O){return!d.length||(d.call({action:y,location:S,retry:O}),!1)}function h(y,S){c=y,_=S,u.call({action:c,location:_})}function p(y,S){var O=pe.Push,P=g(y,S);function N(){p(y,S)}f(O,P,N)&&(i+=1,a.splice(i,a.length,P),h(O,P))}function b(y,S){var O=pe.Replace,P=g(y,S);function N(){b(y,S)}f(O,P,N)&&(a[i]=P,h(O,P))}function m(y){var S=$n(i+y,0,a.length-1),O=pe.Pop,P=a[S];function N(){m(y)}f(O,P,N)&&(i=S,h(O,P))}var v={get index(){return i},get action(){return c},get location(){return _},createHref:l,push:p,replace:b,go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(S){return u.push(S)},block:function(S){return d.push(S)}};return v}function $n(e,t,n){return Math.min(Math.max(e,t),n)}function On(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function Tn(){return Math.random().toString(36).substr(2,8)}function $a(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,a=e.hash,i=a===void 0?"":a;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function Pn(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Oa(e,t,n){let o=new Set(t).add(void 0);return e.listen((r,a,i)=>{o.has(i)&&n(r,a,i)})}function Ta(e,t={}){let[,n]=x({}),[o]=x(e.get());return A(()=>{o!==e.get()&&n({})},[]),A(()=>{let r,a,i,c=()=>{r||(r=1,a=setTimeout(()=>{r=void 0,n({})}))};return t.keys?i=Oa(e,t.keys,c):i=e.listen(c),()=>{i(),clearTimeout(a)}},[e,""+t.keys]),e.get()}const $=()=>{const e=ie(Ut),t=k(f=>{try{return f()}catch(h){return e.ink.story().onError&&e.ink.story().onError(h.toString()),null}},[e]),n=k(f=>{if(!f)return null;const h=`${f}`;return h.startsWith("http://")||h.startsWith("https://")?h:e.game.getAssetPath(h)},[e]),o=k((f,h)=>{e.settings.set(f,h),e.settings.save()},[e]),r=k((...f)=>e.state.setKey(...f),[e]),a=k((...f)=>e.state.setSubkey(...f),[e]),i=k((f,h=[])=>{let p={};try{p=e.ink.evaluateFunction(f,h,!0)}catch(b){e.ink.story().onError&&e.ink.story().onError(b.toString()),p.error=b.toString()}return p},[e]),c=k((...f)=>t(()=>e.ink.setVariable(...f)),[e,t]),_=k((...f)=>t(()=>e.ink.getVariable(...f)),[e,t]),u=k((...f)=>t(()=>e.game.makeChoice(...f)),[e,t]),d=k((...f)=>t(()=>e.game.continueStory(...f)),[e,t]),l=k(()=>{e.state.setSubkey("game",Bt,null),e.state.setSubkey("game",Gt,null)},[e]),g=k(f=>{e.state.setKey(Pe,f)},[e]);return{atrament:e,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:u,continueStory:d,getAssetPath:n,updateSettings:o,setStateKey:r,setStateSubkey:a,evaluateInkFunction:i,setInkVariable:c,getInkVariable:_,resetBackground:l,throwAtramentError:g}},L=(e=void 0)=>{const t=ie(Ut);return Ta(t.store,{keys:e})},rt=()=>{const{evaluateInkFunction:e,setStateKey:t}=$(),n=L([K]),o=k((c,_,u)=>{let d=`${_}`;const l=_.split(`
`),f=l.shift().match(/\[title\](.+?)\[\/title\](.*)$/i);f&&(d=[f[2],...l].join(`
`)),t(K,{current:c,title:f?f[1]:null,content:d,display:u||null})},[t]),r=k(()=>{const c=n[K].current;if(c){const _=e(c);o(c,_.output,n[K].display)}},[n,o,e]),a=k(()=>{t(K,{current:null,content:"",title:null,display:null})},[t]),i=k((c,_)=>{const u=e(c);u.output?o(c,u.output,_==="modal"?"modal":"overlay"):r()},[e,r,o]);return{refreshOverlay:r,closeOverlay:a,setOverlayContent:o,execContentFunction:i,overlay:{current:n[K].current,content:n[K].content.split(`
`),title:n[K].title,display:n[K].display}}},Pa="_menu_toggle_1d5hk_1",Aa="_menu_content_1d5hk_15",An={menu_toggle:Pa,menu_content:Aa};function st(e){A(()=>(document.addEventListener("keydown",e,!1),()=>document.removeEventListener("keydown",e,!1)),[e])}function Ie(e=!1){const[t,n]=x(e),o=k(()=>n(i=>!i),[]),r=k(()=>n(!0),[]),a=k(()=>n(!1),[]);return[t,o,n,r,a]}const La="_atrament_version_21x2r_1",Ia="_atrament_about_21x2r_14",ja="_atrament_appversion_21x2r_20",dt={atrament_version:La,atrament_about:Ia,atrament_appversion:ja},Ma=({onClick:e})=>s("div",{class:dt.atrament_version,onClick:e,children:[s("div",{class:dt.atrament_about,children:"?"}),s("div",{class:dt.atrament_appversion,children:["Atrament ",Co]})]}),Ra=()=>s("svg",{fill:"none",viewBox:"0 0 15 15",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:[s("title",{children:s(T,{id:"icon.menu"})}),s("path",{"clip-rule":"evenodd",d:"m2 3.5c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.27614.22386-.5.5-.5h10c.2761 0 .5.22386.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.22386-.5-.5zm0 4c0-.2761.22386-.5.5-.5h10c.2761 0 .5.2239.5.5s-.2239.5-.5.5h-10c-.27614 0-.5-.2239-.5-.5z",style:"fill:var(--fg-color)","fill-rule":"evenodd"})]}),Da=()=>s("svg",{viewBox:"0 0 28 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m150 3937.5h2v-16h-2zm-4-2h2v-12h-2zm-4-2h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-124 -3919)",style:"fill:var(--fg-color)"})}),Fa=()=>s("svg",{viewBox:"0 0 20 20",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",role:"img",children:s("path",{d:"m222 3933.5h2v-8h-2zm-16-2h2v-4h-2zm4-5.264 8-4v13.528c-2.835-1.418-5.079-2.539-8-4zm-6-.736v8h3.667l12.333 5.5v-20l-12.333 6.5z","fill-rule":"evenodd",transform:"translate(-204 -3919)",style:"fill:var(--fg-color)"})}),Va=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"100%",height:"100%",role:"img",children:[s("title",{children:s(T,{id:"icon.back"})}),s("path",{d:"M0 0h24v24H0z",fill:"none"}),s("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z",style:"fill:var(--fg-color)"})]}),Na=()=>s("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100%",height:"100%",viewBox:"0 0 122.88 101.878","enable-background":"new 0 0 122.88 101.878",role:"img",children:[s("title",{children:s(T,{id:"icon.debugger"})}),s("g",{children:s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M64.406,12.143c-2.672-1.042-5.431-1.586-8.276-1.586 c-4.279,0-7.798,1.369-10.557,4.084L21.765,38.427l2.477,2.499l-9.037,9.101L0,34.799l9.036-9.037l2.802,2.737L35.515,4.844 C38.773,1.608,42.271,0,46.007,0C52.285,0,58.411,4.041,64.406,12.143L64.406,12.143z M100.535,5.408 c2.588,0,5.072,0.441,7.384,1.25l-5.874,6.358c-13.345,14.437,1.715,22.79,14.986,12.879l5.119-3.822 c0.475,1.813,0.729,3.717,0.729,5.679c0,12.341-10.003,22.345-22.345,22.345c-4.026,0-7.804-1.065-11.066-2.929L78.616,58.689 c10.214,9.778,20.431,19.554,30.646,29.33l-13.858,13.858C85.74,91.8,76.08,81.718,66.422,71.635L47.394,91.833 c-1.445,2.471-4.126,4.132-7.194,4.132c-4.599,0-8.329-3.729-8.329-8.329c0-1.988,0.699-3.815,1.862-5.247l-0.012-0.012 l0.073-0.063c0.601-0.723,1.322-1.342,2.132-1.828L57.327,62.14L30.941,34.504L41.89,23.556 c10.157,9.756,18.402,17.582,28.572,27.324l11.864-10.172c-2.604-3.654-4.136-8.125-4.136-12.955 C78.19,15.411,88.193,5.408,100.535,5.408L100.535,5.408z M28.63,10.362L17.747,21.245l-2.086-2.085L26.544,8.276L28.63,10.362 L28.63,10.362z",style:"fill:var(--accent-fg-color)"})})]}),Ha="_debug_toggle_1xfgt_1",za="_debug_container_1xfgt_15",Ua="_container_1xfgt_30",Ba="_input_div_1xfgt_46",Ga="_button_1xfgt_50",Wa="_input_1xfgt_46",qa="_errormsg_1xfgt_74",Ka="_unknown_tag_1xfgt_82",I={debug_toggle:Ha,debug_container:za,container:Ua,input_div:Ba,button:Ga,input:Wa,errormsg:qa,unknown_tag:Ka},Ya="_collapse_19tvh_1",Xa="_collapse_title_19tvh_6",Ja="_collapse_children_19tvh_12",ft={collapse:Ya,collapse_title:Xa,collapse_children:Ja},xe=({title:e,children:t,open:n=!1})=>s("details",{class:ft.collapse,open:n,children:[s("summary",{class:ft.collapse_title,children:e}),s("div",{class:ft.collapse_children,children:t})]}),Za="_table_1rcps_1",Qa="_table_fixed_1rcps_13",ei="_cell_full_1rcps_23",ti="_cell_padding_1rcps_31",ni="_thead_border_1rcps_39",oi="_tbody_border_1rcps_47",ri="_caption_1rcps_63",si="_page_1rcps_89",ai="_page_active_1rcps_97",W={table:Za,table_fixed:Qa,cell_full:ei,cell_padding:ti,thead_border:ni,tbody_border:oi,caption:ri,page:si,page_active:ai},Ce=({columns:e=[],data:t=[],pageSize:n=0,border:o=!0,padding:r=!0,columnWidth:a=[],fixed:i=!1,className:c=""})=>{const[_,u]=x(0);A(()=>{u(0)},[t]);let d=1,l=0,g=t.length;n&&(d=Math.ceil(t.length/n),l=_*n,g=l+n);const f=p=>{u(+p.target.value)},h=t.slice(l,g);return s("table",{class:w(W.table,i&&W.table_fixed,c),children:[n>0&&s("caption",{class:W.caption,children:[...Array(d).keys()].map(p=>s("button",{onClick:f,value:p,class:p===_?W.page_active:W.page,children:p+1},p))}),e.length>0&&s("thead",{children:s("tr",{class:o?W.thead_border:"",children:e.map((p,b)=>{const m=p.style||{};return a[b]&&(m.width=a[b]),s("th",{class:r?W.cell_padding:W.cell_full,style:m,children:p.name},b)})})}),h.length>0&&s("tbody",{children:h.map((p,b)=>s("tr",{class:o?W.tbody_border:"",children:p.map((m,v)=>{const y={};return a[v]&&(y.width=a[v]),s("td",{class:r?W.cell_padding:W.cell_full,style:y,children:m},v)})},b))})]})},ii=()=>{const{atrament:e}=$(),t=F(),o=e.ink.story().state,r=e.state.get().game,a=[[t.translate("debug.info.ink-file"),`${r.$path}/${r.$file}`],[t.translate("debug.info.story-seed"),o.storySeed],[t.translate("debug.info.current-turn-index"),o.currentTurnIndex],[t.translate("debug.info.path"),r[Ao]]];return s(xe,{title:t.translate("debug.info"),open:!0,children:s(Ce,{data:a,fixed:!0})})},ci=({closeFn:e})=>{const{atrament:t}=$(),[n,o]=x(""),[r,a]=x(""),i=_=>{o(_.target.value),a("")},c=()=>{if(n){try{t.ink.goTo(n),t.game.continueStory(),e()}catch(_){a(_.toString())}o("")}};return s(E,{children:[s("div",{class:I.container,children:[s("div",{children:[s(T,{id:"debug.go-to-path"}),":"]}),s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",value:n,onInput:i})}),s("div",{children:[s("button",{class:I.button,onClick:c,children:">>>"})," ",s("br",{})]})]}),s("div",{class:I.container,children:s("span",{class:I.errormsg,children:r})})]})},li=()=>{const{atrament:e}=$(),t=F(),n=e.ink.getGlobalTags(),o=Object.keys(n).map(r=>Br.includes(r)?[r,n[r]]:[s("span",{class:I.unknown_tag,title:t.translate("debug.unknown-tag"),children:r},r),n[r]]);return s(xe,{title:t.translate("debug.global-tags"),open:!0,children:s(Ce,{data:o,fixed:!0})})},ui="_button_pofct_1",_i="_button_close_pofct_33",di="_input_pofct_65",fi="_toggle_pofct_91",hi="_listview_pofct_103",ae={button:ui,button_close:_i,input:di,toggle:fi,listview:hi},gi="_checkbox_wrapper_1bc4s_1",pi="_checkbox_1bc4s_1",Ln={checkbox_wrapper:gi,checkbox:pi},at=({name:e,enabled:t,onChange:n})=>s("div",{class:Ln.checkbox_wrapper,children:s("input",{type:"checkbox",class:Ln.checkbox,checked:t,onChange:n,name:e,id:e})}),mi=({value:e,setNewValue:t})=>{const n=o=>t(+o.target.value);return s("input",{class:ae.input,type:"number",value:e,onInput:n})},vi=({value:e,setNewValue:t})=>{const n=o=>t(o.target.value);return s("input",{class:ae.input,type:"text",value:e,onInput:n})},bi=({name:e,value:t,setNewValue:n})=>{const o=r=>n(r.target.checked);return s("div",{class:ae.toggle,children:s(at,{enabled:t,onChange:o,name:e})})},yi=({name:e,value:t})=>{if(e===t._originNames[0]&&t.size===0){const o=[...t.origins[0]._itemNameToValues.keys()];return s("span",{class:ae.listview,children:JSON.stringify(o).replace(/,/g,", ")})}const n=[];return t.forEach((o,r)=>n.push([JSON.parse(r),o])),s("ul",{class:ae.listview,children:n.map(([o,r])=>s("li",{children:[s("abbr",{title:o.originName,children:o.itemName}),": ",r]},o))})},ki=({name:e,value:t})=>{const{getInkVariable:n,setInkVariable:o}=$(),r=F(),[a,i]=x(!1),[c,_]=x(!1),[u,d]=x(!1);A(()=>{const h=n(e);_(h),d(h)},[e,n,_,d]);const l=h=>{h.preventDefault(),i(!0)},g=()=>i(!1),f=()=>{u!==c&&(o(e,u),_(u)),i(!1)};return a?s(E,{children:[s("button",{class:ae.button_close,onClick:g,title:r.translate("debug.variables.cancel"),children:"X"}),typeof t=="number"&&s(mi,{value:u,setNewValue:d}),typeof t=="string"&&s(vi,{value:u,setNewValue:d}),typeof t=="boolean"&&s(bi,{name:e,value:u,setNewValue:d}),s("button",{class:ae.button,onClick:f,title:r.translate("debug.variables.save"),children:">"})]}):s(E,{children:typeof u=="object"?s(yi,{name:e,value:u}):s("button",{class:ae.button,onClick:l,children:JSON.stringify(u)})})};function wi(e){const t=e.ink.getVariables();return Object.entries(t).sort((o,r)=>o[0]>r[0]?0:-1)}const Si=({variables:e})=>{const t=F(),n=e.map((o,r)=>[o[0],s(ki,{name:o[0],value:o[1]},r)]);return s(Ce,{columns:[{name:t.translate("debug.variables.name"),style:{width:"50%","text-align":"left"}},{name:t.translate("debug.variables.value"),style:{"text-align":"left"}}],data:n,pageSize:10,fixed:!0})},xi=()=>{const[e,t]=x(""),{atrament:n}=$(),o=F(),r=wi(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(xe,{title:o.translate("debug.variables"),children:[s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(Si,{variables:r})]})};function Ci(e){const t=e.ink.story().state._visitCounts,n=[];for(let o of t)n.push(o);return n.sort((o,r)=>o[0]>r[0]?0:-1)}const Ei=()=>{const[e,t]=x(""),{atrament:n}=$(),o=F(),r=Ci(n).filter(i=>i[0].includes(e)),a=i=>{t(i.target.value)};return s(xe,{title:o.translate("debug.visits"),children:[s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",placeholder:o.translate("debug.variables.filter-by-name"),value:e,onInput:a})}),s(Ce,{columns:[{name:o.translate("debug.visits.path"),style:{width:"75%","text-align":"left"}},{name:o.translate("debug.visits.count"),style:{"text-align":"left"}}],data:r,pageSize:10,fixed:!0})]})},$i=()=>{const{atrament:e}=$(),t=F(),[n,o]=x(""),[r,a]=x(null),[i,c]=x(""),[_,u]=x(null),d=h=>{let p=[];try{p=JSON.parse(h)}catch{}return p},l=h=>{o(h.target.value),c(""),u(null)},g=h=>{a(h.target.value),c(""),u(null)},f=()=>{if(n)try{const h=e.ink.evaluateFunction(n,d(r),!0);u(h),c("")}catch(h){c(h.toString())}};return s(xe,{title:t.translate("debug.functions"),children:[s("div",{class:I.container,children:[s("div",{children:[s(T,{id:"debug.functions.run-function"}),":"]}),s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",value:n,onInput:l})})]}),s("div",{class:I.container,children:[s("div",{children:[s(T,{id:"debug.functions.arguments"}),":"]}),s("div",{class:I.input_div,children:s("input",{class:I.input,type:"text",value:r,onInput:g,placeholder:t.translate("debug.functions.arguments_placeholder"),title:t.translate("debug.functions.arguments_placeholder")})}),s("div",{children:[s("button",{class:I.button,onClick:f,children:">>>"})," ",s("br",{})]})]}),s("div",{class:I.container,children:s("pre",{children:n&&`${n}(${r?d(r).map(JSON.stringify).join(", "):""})`})}),i&&s("div",{class:I.container,children:s("span",{class:I.errormsg,children:i})}),s("div",{class:I.container,children:_&&s(Ce,{data:[[t.translate("debug.functions.returned-value"),JSON.stringify(_.returned)],[t.translate("debug.functions.output"),s("pre",{children:_.output},"output")]],fixed:!0})})]})},Oi=()=>{const[e,t]=Ie(!1),[n,o]=x(!1),r=F(),a=k(i=>{i.code==="Backquote"&&(n?(t(),o(!1)):(o(!0),setTimeout(()=>o(!1),1e3)))},[t,n,o]);return st(a),e?s("div",{class:I.debug_container,children:[s(ot,{onClick:t}),s(ii,{}),s(li,{}),s(xi,{}),s(Ei,{}),s($i,{}),s(ci,{closeFn:t})]}):s("button",{class:I.debug_toggle,onClick:t,title:r.translate("debug"),children:s(Na,{})})},Ti=()=>{const{metadata:e}=L(["metadata"]);return e.debug?s(Oi,{}):s(E,{})},Pi="_header_1gyyv_1",Ai="_infobox_1gyyv_19",In={header:Pi,infobox:Ai},Li=""+new URL("atrament-logo-D7LOrOOl.png",import.meta.url).href,Ii=""+new URL("iftf-logo-BWs-h1t3.png",import.meta.url).href,Zo=[["Atrament Core","https://github.com/technix/atrament-core"],["Atrament Web","https://github.com/technix/atrament-web"],["Atrament Web UI","https://github.com/technix/atrament-web-ui"],["InkJS","https://github.com/y-lohse/inkjs"],["Preact","https://preactjs.com/"],["Howler","https://howlerjs.com/"],["Nanostores","https://github.com/nanostores/nanostores"],["LocalForage","https://github.com/localForage/localForage"],["fflate","https://github.com/101arrowz/fflate"],["mustache.js","https://github.com/janl/mustache.js"]],ji=Zo.length-1,jn=({href:e,children:t})=>s("a",{href:e,target:"_blank",rel:"noreferrer",children:t}),Mi='<a href="https://iftechfoundation.org/" target="_blank" rel="noreferrer">Interactive Fiction Technology Foundation</a>',Ri=({onClick:e})=>s(ee,{children:s("div",{onClick:n=>n.target.tagName.toLowerCase()==="a"?"":e(n),children:[s("div",{class:In.header,children:[s("img",{src:Li}),s("h1",{children:["Atrament ",s("small",{children:Co})]})]}),s("p",{children:s(jn,{href:"https://atrament.ink/",children:"https://atrament.ink/"})}),s("p",{children:[s(T,{id:"about.components"}),": ",Zo.map((n,o)=>s("span",{children:[s(jn,{href:n[1],children:n[0]}),o===ji?".":","," "]},n[1]))]}),s("div",{class:In.infobox,children:[s("img",{src:Ii}),s("p",{children:s(T,{id:"about.iftf_support",html:!0,iftf:Mi})})]})]})}),Di="_menu_button_qjyi9_1",Fi="_accented_button_qjyi9_20",Mn={menu_button:Di,accented_button:Fi},D=({children:e,key:t,onClick:n,accented:o=!1,attributes:r={}})=>s("button",{onClick:n,class:w(Mn.menu_button,o&&Mn.accented_button,"atrament-menu-button"),...r,children:e},t),Vi="_header_929fb_1",Ni="_header_align_929fb_8",Rn={header:Vi,header_align:Ni},it=({children:e})=>s("div",{class:w(Rn.header,"atrament-header"),children:s("div",{class:Rn.header_align,children:e})}),Hi={break:"_break_jkn3k_1"},Ee=()=>s("div",{class:Hi.break}),zi="_container_1qixe_1",Ui="_prompt_1qixe_7",Bi="_menu_item_1qixe_15",Gi="_small_1qixe_48",Wi="_is_deletable_1qixe_53",qi="_delete_button_1qixe_57",Ki="_delete_item_1qixe_78",U={container:zi,prompt:Ui,menu_item:Bi,small:Gi,is_deletable:Wi,delete_button:qi,delete_item:Ki},Dn=({prompt:e,onAccept:t,onReject:n,attributes:o})=>s("div",{class:U.container,children:[s("div",{class:U.prompt,children:e}),s("button",{onClick:t,class:w(U.menu_item,U.delete_item,U.small),...o,children:s(T,{id:"yes"})}),s("button",{onClick:n,class:w(U.menu_item,U.small),...o,children:s(T,{id:"no"})})]}),Zt=({children:e,key:t,onSelect:n,isDisabled:o=!1,isDeletable:r=!1,onDelete:a=()=>{},deletePrompt:i="",hasConfirmation:c=!1,confirmPrompt:_="",attributes:u={}})=>{const[d,,,l,g]=Ie(!1),[f,,,h,p]=Ie(!1),b=v=>{a(v),g()},m=v=>{n(v),p()};return f?s(Dn,{prompt:_,onAccept:m,onReject:p,attributes:u}):d?s(Dn,{prompt:i,onAccept:b,onReject:g,attributes:u}):s("div",{class:U.container,children:[s("button",{onClick:c?h:n,disabled:o,class:w(U.menu_item,r&&U.is_deletable),...u,children:e},t),r&&!o&&s("button",{onClick:l,class:w(U.menu_item,U.delete_button),...u,children:"✕"},t)]})},Yi=e=>new Date(e).toLocaleString(Oo),Qo=({loadGame:e,hasConfirmation:t=!1})=>{const[n,o]=x([]),r=F(),{atrament:a}=$(),{metadata:i}=L(["metadata"]),c=k(async()=>{const d=await a.game.listSaves(),l=[];if(i.load_from_checkpoints){const f=d.filter(h=>h.type===a.game.SAVE_CHECKPOINT).map(h=>({...h,slot:typeof h.name=="boolean"?r.translate("main.checkpoint"):r.translate("main.checkpoint-named",{name:h.name})}));f.length&&l.push(...f)}const g=d.filter(f=>f.type===a.game.SAVE_GAME).map(f=>({...f,slot:Yi(f.date)}));l.push(...g),o(l)},[a,i,r]),_=k(async d=>{const l=d.target.getAttribute("data-save");await e(l)},[e]),u=k(async d=>{const l=d.target.getAttribute("data-save");await a.game.removeSave(l),await c()},[a,c]);return A(()=>{(async()=>c())()},[c]),s(E,{children:n.map(d=>s(Zt,{onSelect:_,onDelete:u,isDisabled:!d.type,isDeletable:d.type,deletePrompt:r.translate("main.delete-save"),hasConfirmation:t,confirmPrompt:r.translate("main.confirm-load"),attributes:{"data-save":d.id},children:d.slot},d.name))})},Xi=e=>new Date(e).toLocaleString(Oo),Ji=({saveGame:e})=>{const[t,n]=x([]),o=F(),{atrament:r}=$(),{metadata:a}=L(["metadata"]),i=a.saves?+a.saves:0,c=k(async()=>{const l=(await r.game.listSaves()).filter(g=>g.type===r.game.SAVE_GAME).map(g=>({...g,slot:Xi(g.date)}));l.length<i&&l.push({name:l.length+1,slot:o.translate("main.new-save")}),n(l)},[r,o,i]),_=k(async d=>{const l=d.target.getAttribute("data-savename");await e(l),await c()},[e,c]),u=k(async d=>{const l=d.target.getAttribute("data-saveid");await r.game.removeSave(l),await c()},[r,c]);return A(()=>{(async()=>c())()},[c]),s(E,{children:t.map(d=>s(Zt,{onSelect:_,onDelete:u,isDisabled:!1,isDeletable:d.type,deletePrompt:o.translate("main.delete-save"),hasConfirmation:d.type,confirmPrompt:o.translate("main.confirm-save"),attributes:{"data-saveid":d.id,"data-savename":d.name},children:d.slot},d.name))})},Zi="_settings_container_1lyb2_1",Qi={settings_container:Zi},ec=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=o=>e("fullscreen",o.target.checked);return s("div",{class:w("atrament-settings-fullscreen"),children:[s(at,{enabled:t.settings.fullscreen,onChange:n,name:"settings-fullscreen"})," ",s("label",{for:"settings-fullscreen",children:s(T,{id:"settings.fullscreen"})})]})},tc="_settings_sound_container_1abud_1",nc="_settings_sound_input_container_1abud_6",oc="_settings_sound_volume_1abud_10",rc="_settings_sound_icon_1abud_17",he={settings_sound_container:tc,settings_sound_input_container:nc,settings_sound_volume:oc,settings_sound_icon:rc},sc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=i=>e("mute",!i.target.checked),o=i=>e("volume",i.target.value),{mute:r,volume:a}=t.settings;return s(E,{children:[s("div",{class:w(he.settings_sound,"atrament-settings-sound"),children:[s(at,{enabled:!r,onChange:n,name:"settings-sound"})," ",s("label",{for:"settings-sound",children:s(T,{id:"settings.sound"})})]}),s("div",{class:he.settings_sound_container,children:[s("div",{class:he.settings_sound_icon,children:s(Fa,{})}),s("div",{class:he.settings_sound_input_container,children:s("input",{class:he.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:a,onChange:o})}),s("div",{class:he.settings_sound_icon,children:s(Da,{})})]})]})},ac="_settings_fontsize_container_1ho7s_1",ic="_settings_font_a_1ho7s_6",cc="_settings_fontsize_input_container_1ho7s_12",lc="_settings_fontsize_input_1ho7s_12",uc="_settings_font_sample_1ho7s_22",ue={settings_fontsize_container:ac,settings_font_a:ic,settings_fontsize_input_container:cc,settings_fontsize_input:lc,settings_font_sample:uc},er=[];for(let e=Lt;e<=It;e+=nt)er.push(e);const _c=()=>{const{updateSettings:e}=$(),t=L(["settings"]),{font:n,fontSize:o}=t.settings,r=a=>e("fontSize",a.target.value);return s("div",{class:w(ue.settings_text,"atrament-settings-text"),children:[s("div",{class:ue.settings_fontsize_container,children:[s("div",{class:ue.settings_font_a,style:{"font-size":`${Lt}%`},children:"A"}),s("div",{class:ue.settings_fontsize_input_container,children:[s("input",{class:ue.settings_fontsize_input,type:"range",min:Lt,max:It,step:nt,value:o||tt,onInput:r,list:"fontSizes"}),s("datalist",{id:"fontSizes",children:er.map(a=>s("option",{value:a},a))})]}),s("div",{class:ue.settings_font_a,style:{"font-size":`${It}%`},children:"A"})]}),s("div",{class:ue.settings_font_sample,style:{"font-size":`${o}%`,"font-family":fe[n]},children:s(T,{id:"font.sampleText"})})]})},dc="_settings_font_container_yph84_1",fc={settings_font_container:dc},hc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=r=>e("font",r.target.value),o=t.settings.font;return s("div",{class:w(fc.settings_font_container,"atrament-settings-font"),children:s("select",{onChange:n,style:{"font-family":fe[o]},children:Object.entries(fe).map(([r,a])=>s("option",{value:r,style:{"font-family":a},selected:o===r,children:r},r))})})},gc="_settings_theme_container_1gr28_1",pc="_settings_theme_button_1gr28_8",tr={settings_theme_container:gc,settings_theme_button:pc},mc=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["fg-color"],"background-color":t["bg-color"]};return s("button",{class:tr.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:s(T,{id:`themes.${e}`,defaultMessage:e})})},vc=()=>{const{updateSettings:e}=$(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return s("div",{class:w(tr.settings_theme_container,"atrament-settings-theme"),children:Object.entries(ve).map(([n,o])=>s(mc,{themeId:n,themeConfig:o,onClick:t},n))})},bc=()=>{const{updateSettings:e}=$(),t=L(["settings"]),n=o=>e("animation",o.target.checked);return s("div",{class:w("atrament-settings-animation"),children:[s(at,{enabled:t.settings.animation,onChange:n,name:"settings-animation"})," ",s("label",{for:"settings-animation",children:s(T,{id:"settings.animations"})})]})},nr=()=>{const e=F();return s("div",{class:Qi.settings_container,children:[s(ec,{}),s(bc,{}),s(sc,{}),s(xe,{title:e.translate("settings.appearance"),children:[s(hc,{}),s(_c,{}),s(vc,{})]})]})},ht=0,or=1,rr=2,sr=3,yc=({saveGame:e,closeSubmenu:t})=>s(E,{children:[s(it,{children:s("h2",{children:s(T,{id:"main.savegame"})})}),s(Ji,{saveGame:e}),s(Ee,{}),s(D,{onClick:t,children:s(T,{id:"cancel"})},"go-back")]}),kc=({loadGame:e,closeSubmenu:t})=>s(E,{children:[s(it,{children:s("h2",{children:s(T,{id:"main.loadgame"})})}),s(Qo,{loadGame:e,hasConfirmation:!0}),s(Ee,{}),s(D,{onClick:t,children:s(T,{id:"cancel"})},"go-back")]}),wc=({closeSubmenu:e})=>s(E,{children:[s(nr,{}),s(Ee,{}),s(D,{onClick:e,children:s(T,{id:"back"})},"go-back")]}),Sc=({setActiveMenu:e,hasSaveButton:t,hasLoadButton:n,hasQuitGameButton:o})=>{const r=k(()=>e(or),[e]),a=k(()=>e(rr),[e]),i=k(()=>e(sr),[e]);return s(E,{children:[t&&s(D,{onClick:r,children:s(T,{id:"main.savegame"})},"save-game"),n&&s(D,{onClick:a,children:s(T,{id:"main.loadgame"})},"load-game"),t||n?s(D,{onClick:i,children:s(T,{id:"main.settings"})},"settings"):s(nr,{}),o&&s(E,{children:[s(Ee,{}),s(D,{accented:!0,onClick:()=>se("/"),children:s(T,{id:"game.quit"})},"quit-game")]})]})},xc=({toggleMenu:e,isHomeScreen:t})=>{const{atrament:n}=$(),o=L(["metadata"]),{saves:r,load_from_checkpoints:a}=o.metadata,[i,c]=x(ht),_=k(()=>c(ht),[c]),u=n.interfaces.platform.exitApp,d=!!r&&!t,l=!!(r||a)&&!t,g=!t,f=t&&u,h=k(async m=>{await n.game.restart(m),_(),e()},[n,e,_]),p=k(async m=>{await n.game.saveGame(m)},[n]);return s(E,{children:[i===or&&s(yc,{saveGame:p,closeSubmenu:_}),i===rr&&s(kc,{loadGame:h,closeSubmenu:_}),i===sr&&s(wc,{closeSubmenu:_}),i===ht&&s(Sc,{setActiveMenu:c,hasSaveButton:d,hasLoadButton:l,hasQuitGameButton:g}),f&&s(E,{children:[s(Ee,{}),s(D,{accented:!0,onClick:u,children:s(T,{id:"main.exit"})},"exit-app")]})]})},Qt=({isHomeScreen:e=!1})=>{const[t,n]=Ie(!1),[o,r,a]=Ie(!1),i=k(()=>{n(),a(!1)},[n,a]),c=k(_=>{_.key==="Escape"&&(i(),a(!1))},[i,a]);return st(c),t?s(Wt,{children:[s(qt,{onClick:i}),s(Kt,{children:s("div",{class:An.menu_content,children:[s(ot,{onClick:i}),o?s(Ri,{onClick:r}):s(E,{children:[s(xc,{isHomeScreen:e,toggleMenu:i}),s(Ma,{onClick:r})]})]})})]}):s(E,{children:[s("button",{class:An.menu_toggle,onClick:i,children:s(Ra,{})}),s(Ti,{})]})},Cc=({newGame:e,loadGame:t,resumeGame:n,canResume:o})=>{const[r,a]=x([]),i=F(),{atrament:c}=$(),{metadata:_}=L(["metadata"]),u=k(async()=>{const g=await c.game.getSessions();let f=!0;a([...Array(+_.sessions).keys()].map(h=>{const p=h+1,b=`session${p}`,m=!!g[`session${p}`],v=m||f;return!m&&f&&(f=!1),{id:p,name:b,hasSaves:m,canStart:v}}))},[c,_,a]),d=k(async g=>{const f=g.target.getAttribute("data-session"),h=r.filter(p=>p.name===f)[0];h&&(c.game.setSession(f),h.hasSaves?await o()?await n():await t():await e())},[c,r,e,o,n,t]),l=k(async g=>{const f=g.target.getAttribute("data-session");await c.game.removeSession(f),await u()},[c,u]);return A(()=>{(async()=>u())()},[u]),s(E,{children:r.map(g=>s(Zt,{onSelect:d,onDelete:l,isDisabled:!g.canStart,isDeletable:g.hasSaves,deletePrompt:i.translate("main.delete-session"),attributes:{"data-session":g.name},children:g.hasSaves?s(T,{id:"main.continue-session",session:g.id}):g.canStart?s(T,{id:"main.newgame"}):s(T,{id:"main.emptyslot"})},g.name))})},en=()=>{const{resetBackground:e,gameStart:t,gameResume:n,continueStory:o}=$(),{metadata:r}=L(["metadata"]),a=k(async()=>{e(),await t(),o(),se("/game")},[e,t,o]),i=k(async()=>{e(),await n(),r.continue_maximally!==!1&&o(),se("/game")},[e,n,o,r]),c=k(async _=>{e(),await t(_),r.continue_maximally!==!1&&o(),se("/game")},[e,t,o,r]);return{newGame:a,resumeGame:i,loadGame:c}},ar=({children:e})=>{const{loadGame:t}=en();return s(ee,{align:"end",children:[s(it,{children:s("h2",{children:s(T,{id:"main.loadgame"})})}),s(Qo,{loadGame:t}),s(Ee,{}),e]})},Ec="_imagebox_1x268_1",$c="_image_1x268_1",Oc="_illustration_1x268_10",gt={imagebox:Ec,image:$c,illustration:Oc},tn=({src:e,options:t={}})=>s("div",{class:w(gt.imagebox,"atrament-image-container",t.class),style:{"margin-left":t.leftmargin||"none","margin-right":t.rightmargin||"none"},children:s("img",{src:e,style:{width:t.width||"auto"},class:w(gt.image,!t.fullsize&&gt.illustration,"atrament-image")})}),ir=()=>{const{getAssetPath:e}=$(),t=F(),n=L(["metadata"]),{title:o,author:r,cover:a,title_screen_layout:i}=n.metadata,[c,_]=a?`${a}`.split(" "):[],u={cover:c?s(tn,{src:e(c),options:_?{width:_}:{}}):"",title:s("h1",{children:o||t.translate("default.title")}),author:s("p",{children:r||t.translate("default.author")})},l=`${i||"cover, title, author"}`.split(/\s*,\s*/);return s(it,{children:l.map(g=>u[g])})},cr=()=>s(D,{onClick:()=>se("/about"),children:s(T,{id:"main.about"})},"about"),Tc=({canBeResumed:e,canBeLoaded:t,openLoadGameMenu:n,about:o})=>{const{newGame:r,resumeGame:a}=en();return s(E,{children:[s(ir,{}),s(ee,{align:"end",children:[e?s(D,{onClick:a,children:s(T,{id:"main.continue"})},"continuegame"):"",s(D,{onClick:r,children:s(T,{id:"main.newgame"})},"startgame"),t?s(D,{onClick:n,children:s(T,{id:"main.loadgame"})},"loadgame"):"",o?s(cr,{}):""]})]})},Pc=()=>{const[e,t]=x(!1),{atrament:n,canResume:o}=$(),{newGame:r,resumeGame:a}=en(),{metadata:i}=L(["metadata"]);return s(E,{children:e?s(ar,{children:s(D,{onClick:()=>{n.game.setSession(),t(!1)},children:s(T,{id:"cancel"})},"go-back")}):s(E,{children:[s(ir,{}),s(ee,{align:"end",children:[s(Cc,{newGame:r,resumeGame:a,canResume:o,loadGame:()=>t(!0)}),i.about?s(cr,{}):""]})]})})},Ac=()=>{const[e,t]=x(!1),[n,o]=x(!1),[r,a]=x(!1),{atrament:i,canResume:c}=$(),{metadata:_}=L(["metadata"]),u=()=>t(!0),d=()=>t(!1);return A(()=>{(async()=>{const g=await c();o(!!g);const h=(await i.game.listSaves()).filter(p=>_.load_from_checkpoints&&p.type===i.game.SAVE_CHECKPOINT?!0:p.type===i.game.SAVE_GAME);a(h.length>0)})()}),s(E,{children:e?s(ar,{children:s(D,{onClick:d,children:s(T,{id:"main.menu"})},"go-back")}):s(Tc,{canBeResumed:n,canBeLoaded:r,openLoadGameMenu:u,about:_.about})})},lr=(e,t)=>{e?(document.body.style.backgroundImage=`url(${t(e)})`,document.body.style.backgroundSize="cover",document.body.style.backgroundPosition="center"):document.body.style.backgroundImage="none"},Lc=()=>{const{canResume:e,getAssetPath:t,resetBackground:n}=$(),o=L(["metadata"]),{background:r,sessions:a}=o.metadata;return A(()=>{n(),lr(r,t)},[n,e,r,t]),s(Ve,{children:s(Yt,{cssClass:"font-face-game",children:[s(Qt,{isHomeScreen:!0}),a?s(Pc,{}):s(Ac,{})]})})},Ic="_toolbar_1gykh_1",jc={toolbar:Ic},Mc="_bannerblock_1ry2a_1",Rc="_accent_1ry2a_11",Dc="_allcaps_1ry2a_17",pt={bannerblock:Mc,accent:Rc,allcaps:Dc},Fc=({children:e,options:t})=>{const n=w(pt.bannerblock,t.style==="accent"&&pt.accent,t.allcaps&&pt.allcaps,"atrament-tag-banner",t.class);return s("div",{class:n,children:e})},Vc={tag:"banner",component:Fc},Nc=Object.freeze(Object.defineProperty({__proto__:null,default:Vc},Symbol.toStringTag,{value:"Module"})),Hc={tag:"block",component:({options:e,children:t})=>{const n={display:"inline-block",width:e.width||"100%","text-align":e.align||"inherit","vertical-align":e.valign||"top"};return s("div",{style:n,class:w("atrament-tag-block",e.class),children:t})}},zc=Object.freeze(Object.defineProperty({__proto__:null,default:Hc},Symbol.toStringTag,{value:"Module"})),Uc="_inline_button_ws4x6_1",Bc="_bordered_button_ws4x6_19",Fn={inline_button:Uc,bordered_button:Bc},Gc=({children:e,options:t})=>{const n=ie(Fe),{execContentFunction:o}=rt();t.DEFAULT&&(t.onclick=t.DEFAULT);const r=k(i=>{i.stopPropagation(),o(t.onclick,t.display)},[o,t]);let a=w(t.bordered===!1?Fn.inline_button:Fn.bordered_button,"atrament-tag-button",t.class);return s("button",{class:a,onClick:r,disabled:!n||t.disabled,children:e})},Wc={tag:"button",component:Gc},qc=Object.freeze(Object.defineProperty({__proto__:null,default:Wc},Symbol.toStringTag,{value:"Module"})),Kc={tag:"css",component:({options:e,children:t})=>s("span",{class:e.class,style:e.style,children:t})},Yc=Object.freeze(Object.defineProperty({__proto__:null,default:Kc},Symbol.toStringTag,{value:"Module"})),Xc={tag:"font",component:({options:e,children:t})=>{const n=e.family||e.DEFAULT;return s("span",{class:e.class,style:{"font-family":n},children:t})}},Jc=Object.freeze(Object.defineProperty({__proto__:null,default:Xc},Symbol.toStringTag,{value:"Module"})),Zc={tag:"highlight",component:({options:e,children:t})=>{const n={"background-color":e.bgcolor||"var(--accent-bg-color)",color:e.color||"var(--accent-fg-color)",padding:e.bgcolor?"0.1em":"inherit","box-decoration-break":"clone"};return s("span",{style:n,class:w("atrament-tag-highlight",e.class),children:t})}},Qc=Object.freeze(Object.defineProperty({__proto__:null,default:Zc},Symbol.toStringTag,{value:"Module"})),el="_infoblock_1a1qp_1",tl="_font_ui_1a1qp_9",nl="_side_highlight_1a1qp_13",ol="_side_accent_1a1qp_17",Be={infoblock:el,font_ui:tl,side_highlight:nl,side_accent:ol},rl=({children:e,options:t})=>{const n=w(Be.infoblock,t.font==="system"&&Be.font_ui,t.side==="accent"&&Be.side_accent,t.side==="highlight"&&Be.side_highlight,"atrament-tag-info",t.class);return s("div",{class:n,children:e})},sl={tag:"info",component:rl},al=Object.freeze(Object.defineProperty({__proto__:null,default:sl},Symbol.toStringTag,{value:"Module"})),il="_inline_image_rars0_1",cl={inline_image:il},ll=({options:e,children:t})=>{const{getAssetPath:n}=$(),o=w(cl.inline_image,"atrament-tag-img",e.class);return s("img",{class:o,src:n(t)})},ul={tag:"img",tagOptions:{raw:!0},component:ll},_l=Object.freeze(Object.defineProperty({__proto__:null,default:ul},Symbol.toStringTag,{value:"Module"})),dl="_input_1c260_1",fl={input:dl},hl=e=>e.stopPropagation(),gl=({options:e})=>{const t=ie(Fe),[n,o]=x(null),{getInkVariable:r,setInkVariable:a}=$();A(()=>o(r(e.var)),[r,e.var]);const i=u=>{let d=u.srcElement.value||n;e.type==="number"&&(d=+d),a(e.var,d),o(d)},c=e.type==="number"?"number":"text",_=w(fl.input,"atrament-tag-input",e.class);return s("input",{disabled:!t,class:_,value:n,placeholder:e.placeholder,type:c,onInput:i,onClick:hl})},pl={tag:"input",tagOptions:{single:!0},component:gl},ml=Object.freeze(Object.defineProperty({__proto__:null,default:pl},Symbol.toStringTag,{value:"Module"})),vl=/([\w:]+)(?:=(?:"([^"]*)"|(\S+)))?/g;function je(e){const t={};if(!e)return t;if(e.startsWith("="))return t.DEFAULT=e.slice(1).trim(),t;let n;for(;n=vl.exec(e);){const o=n[2]??n[3]??"true";try{t[n[1]]=JSON.parse(o)}catch{t[n[1]]=o}}return t}const bl="_imagebox_phoq5_1",yl="_background_phoq5_11",kl="_layer_wrapper_phoq5_23",mt={imagebox:bl,background:yl,layer_wrapper:kl},wl=({key:e,scale:t,item:n})=>s("img",{class:"atrament-layer",src:n.src,onClick:n.onclick,style:{position:"absolute",left:(n.attrs?.x||0)*t,top:(n.attrs?.y||0)*t,width:n.width?n.width*t:"auto",height:n.height?n.height*t:"auto",cursor:n.onclick?"pointer":"auto"}},e),Sl=({key:e,scale:t,item:n})=>s("div",{class:"atrament-layer-area",onClick:n.onclick,style:{position:"absolute",left:(n.attrs.x||0)*t,top:(n.attrs.y||0)*t,width:(n.attrs.width||n.attrs.x1-n.attrs.x)*t,height:(n.attrs.height||n.attrs.y1-n.attrs.y)*t,cursor:n.onclick?"pointer":"auto"}},e),xl=({layers:e=[],areas:t=[],options:n={}})=>{const o=et(null),[r,a]=x(null),i=[...e.sort(((d,l)=>d.index-l.index))],c=i.shift(),_=[...t.sort(((d,l)=>d.index-l.index))],u=k(()=>{const d=o.current;if(!d)return;const l=d.clientWidth,g=d.clientHeight,f=Math.min(l/c.width,g/c.height),h=c.width*f,p=c.height*f,b=(l-h)/2,m=(g-p)/2;a({scale:f,renderWidth:h,renderHeight:p,offsetX:b,offsetY:m})},[c]);return A(()=>(u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)),[u]),s("div",{class:w(mt.imagebox,"atrament-layer-container",n.class),style:{"margin-left":n.leftmargin||"none","margin-right":n.rightmargin||"none"},ref:o,children:[s("img",{src:c.src,class:w(mt.background,"atrament-layer-backround"),style:{width:n.width||"auto"}}),r&&s("div",{class:mt.layer_wrapper,style:{left:r.offsetX,top:r.offsetY,width:r.renderWidth,height:r.renderHeight},children:[i.map((d,l)=>s(wl,{item:d,scale:r.scale},l)),_.map((d,l)=>s(Sl,{item:d,scale:r.scale},l))]})]})};function Cl(e){const t=[];for(let n of e)t.push(new Promise(o=>{const r=new Image,a=()=>o({...n,width:r.naturalWidth,height:r.naturalHeight});r.onload=a,r.onerror=a,r.src=n.src}));return Promise.allSettled(t).then(n=>n.map(o=>o.status==="fulfilled"?o.value:{}))}const El=({options:e,children:t})=>{const[n,o]=x(null),r=ie(Fe),{makeChoice:a,continueStory:i,throwAtramentError:c,getAssetPath:_}=$(),{execContentFunction:u}=rt(),d=L(["scenes"]),l=k(v=>{const y=d.scenes.length-1,O=d.scenes[y].choices.findIndex(P=>P.choice===v);if(O<0){c(`[picture to=${v}] leads to nonexistent choice!`);return}a(O),i()},[c,i,a,d.scenes]),g=k(v=>u(v.onclick,v.display),[u]),f=v=>{let y=null;return r&&(v.onclick?y=S=>{S.stopPropagation(),g(v)}:v.to&&(y=S=>{S.stopPropagation(),l(v.to)})),y},p=t.match(/\[picture.*?\].+?\[\/picture\]/ig)?.map((v,y)=>{const[,S,O]=v.match(/\[picture(.*?)\](.+?)\[\/picture\]/i);return{attrs:je(S),src:_(O),index:y}}),m=t.match(/\[area.+?\]/ig)?.map((v,y)=>{const[,S]=v.match(/\[area(.*?)\]/i),O=je(S);return{attrs:O,index:y,onclick:f(O)}});return A(()=>{(async y=>{const O=(await Cl(y))?.map(P=>(P.onclick=f(P.attrs),P));o(O)})(p)},[]),s(E,{children:n&&s(xl,{layers:n,areas:m,options:e})})},$l={tag:"layers",tagOptions:{raw:!0},component:El},Ol=Object.freeze(Object.defineProperty({__proto__:null,default:$l},Symbol.toStringTag,{value:"Module"})),Tl="_inline_link_1dibw_1",Pl="_disabled_1dibw_10",Vn={inline_link:Tl,disabled:Pl},Al=({children:e,options:t})=>{const n=ie(Fe),{makeChoice:o,continueStory:r,throwAtramentError:a}=$(),{execContentFunction:i}=rt(),c=L(["scenes"]),_=t.to||t.DEFAULT,u=k(f=>{f.stopPropagation();const h=c.scenes.length-1,b=c.scenes[h].choices.findIndex(m=>m.choice===_);if(b<0){a(`[link=${_}] leads to nonexistent choice!`);return}o(b),r()},[a,r,o,_,c.scenes]),d=k(f=>{f.stopPropagation(),i(t.onclick,t.display)},[i,t]),l=w(Vn.inline_link,!n&&Vn.disabled,"atrament-tag-link",t.class),g=n?t.onclick?d:u:()=>{};return s("a",{href:"#",class:l,onClick:g,children:e})},Ll={tag:"link",component:Al},Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll},Symbol.toStringTag,{value:"Module"})),jl=({options:e,children:t})=>{const{getAssetPath:n}=$(),o={fullsize:!0};return["leftmargin","rightmargin","width"].forEach(r=>{e[r]&&(o[r]=e[r])}),s(tn,{src:n(t),options:o})},Ml={tag:"picture",tagOptions:{raw:!0},component:jl},Rl=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"})),Dl={tag:"progress",component:Xt},Fl=Object.freeze(Object.defineProperty({__proto__:null,default:Dl},Symbol.toStringTag,{value:"Module"})),Vl="_separator_sgffv_1",Nl={separator:Vl},Hl={tag:"---",tagOptions:{single:!0},component:({options:e})=>s("hr",{class:w(Nl.separator,"atrament-tag-separator",e.class),style:{width:e.width||"60%"}})},zl=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),Ul="_hidden_1ydvn_1",Bl="_revealed_1ydvn_12",Nn={hidden:Ul,revealed:Bl},Gl=[Nn.hidden,Nn.revealed],Wl=({options:e,children:t})=>{const[n,o]=x(0),r=k(a=>{a.stopPropagation(),o(i=>1-i)},[o]);return s("span",{class:w(Gl[n],"atrament-tag-spoiler",e.class),onClick:r,children:s("span",{children:t})})},ql={tag:"spoiler",component:Wl},Kl=Object.freeze(Object.defineProperty({__proto__:null,default:ql},Symbol.toStringTag,{value:"Module"})),Yl=(e,t)=>e.split(/\[ \]/).map(n=>({style:{textAlign:"left"},name:t(n)})),Xl=(e,t)=>e.match(/\[row\](.+?)\[\/row\]/i)[1].split(/\[ \]/).map(o=>t(o)),Jl={tag:"table",tagOptions:{raw:!0},component:({options:e,children:t,markupRenderer:n})=>{const o=t.match(/\[header\](.+?)\[\/header\]/i),r=t.match(/\[row\].+?\[\/row\]/ig),a=o?Yl(o[1],n):[],i=r?r.map(_=>Xl(_,n)):[],c=e.columns?e.columns.split(/\s+/g):[];return s(Ce,{className:w("atrament-tag-table",e.class),columns:a,data:i,border:e.border,padding:e.padding,columnWidth:c,fixed:e.fixed})}},Zl=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"}));function Ql(e,t){for(var n in t)e[n]=t[n];return e}function Hn(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function zn(e,t){this.props=e,this.context=t}(zn.prototype=new X).isPureReactComponent=!0,zn.prototype.shouldComponentUpdate=function(e,t){return Hn(this.props,e)||Hn(this.state,t)};var Un=C.__b;C.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Un&&Un(e)};var eu=C.__e;C.__e=function(e,t,n,o){if(e.then){for(var r,a=t;a=a.__;)if((r=a.__c)&&r.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t)}eu(e,t,n,o)};var Bn=C.unmount;function ur(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=Ql({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return ur(o,t,n)})),e}function _r(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return _r(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function vt(){this.__u=0,this.o=null,this.__b=null}function dr(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ge(){this.i=null,this.l=null}C.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Bn&&Bn(e)},(vt.prototype=new X).__c=function(e,t){var n=t.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=dr(o.__v),a=!1,i=function(){a||(a=!0,n.__R=null,r?r(c):c())};n.__R=i;var c=function(){if(!--o.__u){if(o.state.__a){var _=o.state.__a;o.__v.__k[0]=_r(_,_.__c.__P,_.__c.__O)}var u;for(o.setState({__a:o.__b=null});u=o.o.pop();)u.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(i,i)},vt.prototype.componentWillUnmount=function(){this.o=[]},vt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=ur(this.__b,n,o.__O=o.__P)}this.__b=null}var r=t.__a&&te(E,null,e.fallback);return r&&(r.__u&=-33),[te(E,null,t.__a?null:e.children),r]};var Gn=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function tu(e){return this.getChildContext=function(){return e.context},e.children}function nu(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){Ot(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var o=t.__v;o!==null&&!o.__m&&o.__!==null;)o=o.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:o.__m},contains:function(){return!0},insertBefore:function(r,a){this.childNodes.push(r),t.h.insertBefore(r,a)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.h.removeChild(r)}}}Ot(te(tu,{context:t.context},e.__v),t.v)}function ou(e,t){var n=te(nu,{__v:e,h:t});return n.containerInfo=t,n}(Ge.prototype=new X).__a=function(e){var t=this,n=dr(t.__v),o=t.l.get(e);return o[0]++,function(r){var a=function(){t.props.revealOrder?(o.push(r),Gn(t,e,o)):r()};n?n(a):a()}},Ge.prototype.render=function(e){this.i=null,this.l=new Map;var t=ke(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Ge.prototype.componentDidUpdate=Ge.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Gn(e,n,t)})};var ru=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,su=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,au=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,iu=/[A-Z0-9]/g,cu=typeof document<"u",lu=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};X.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(X.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Wn=C.event;function uu(){}function _u(){return this.cancelBubble}function du(){return this.defaultPrevented}C.event=function(e){return Wn&&(e=Wn(e)),e.persist=uu,e.isPropagationStopped=_u,e.isDefaultPrevented=du,e.nativeEvent=e};var fu={enumerable:!1,configurable:!0,get:function(){return this.class}},qn=C.vnode;C.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,o=t.type,r={},a=o.indexOf("-")===-1;for(var i in n){var c=n[i];if(!(i==="value"&&"defaultValue"in n&&c==null||cu&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var _=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&c===!0?c="":_==="translate"&&c==="no"?c=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?i="ondblclick":_!=="onchange"||o!=="input"&&o!=="textarea"||lu(n.type)?_==="onfocus"?i="onfocusin":_==="onblur"?i="onfocusout":au.test(i)&&(i=_):_=i="oninput":a&&su.test(i)?i=i.replace(iu,"-$&").toLowerCase():c===null&&(c=void 0),_==="oninput"&&r[i=_]&&(i="oninputCapture"),r[i]=c}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=ke(n.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=ke(n.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",fu)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),t.props=r})(e),e.$$typeof=ru,qn&&qn(e)};var Kn=C.__r;C.__r=function(e){Kn&&Kn(e),e.__c};var Yn=C.diffed;C.diffed=function(e){Yn&&Yn(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};const hu=Object.assign({}),Mt={};Object.entries(hu).forEach(([e,t])=>{const n=e.replace("../resources/templates/","");Mt[n]=t});var gu=Object.prototype.toString,$e=Array.isArray||function(t){return gu.call(t)==="[object Array]"};function nn(e){return typeof e=="function"}function pu(e){return $e(e)?"array":typeof e}function bt(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Xn(e,t){return e!=null&&typeof e=="object"&&t in e}function mu(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var vu=RegExp.prototype.test;function bu(e,t){return vu.call(e,t)}var yu=/\S/;function ku(e){return!bu(yu,e)}var wu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Su(e){return String(e).replace(/[&<>"'`=\/]/g,function(n){return wu[n]})}var xu=/\s*/,Cu=/\s+/,Jn=/\s*=/,Eu=/\s*\}/,$u=/#|\^|\/|>|\{|&|=|!/;function Ou(e,t){if(!e)return[];var n=!1,o=[],r=[],a=[],i=!1,c=!1,_="",u=0;function d(){if(i&&!c)for(;a.length;)delete r[a.pop()];else a=[];i=!1,c=!1}var l,g,f;function h(R){if(typeof R=="string"&&(R=R.split(Cu,2)),!$e(R)||R.length!==2)throw new Error("Invalid tags: "+R);l=new RegExp(bt(R[0])+"\\s*"),g=new RegExp("\\s*"+bt(R[1])),f=new RegExp("\\s*"+bt("}"+R[1]))}h(t||G.tags);for(var p=new Ne(e),b,m,v,y,S,O;!p.eos();){if(b=p.pos,v=p.scanUntil(l),v)for(var P=0,N=v.length;P<N;++P)y=v.charAt(P),ku(y)?(a.push(r.length),_+=y):(c=!0,n=!0,_+=" "),r.push(["text",y,b,b+1]),b+=1,y===`
`&&(d(),_="",u=0,n=!1);if(!p.scan(l))break;if(i=!0,m=p.scan($u)||"name",p.scan(xu),m==="="?(v=p.scanUntil(Jn),p.scan(Jn),p.scanUntil(g)):m==="{"?(v=p.scanUntil(f),p.scan(Eu),p.scanUntil(g),m="&"):v=p.scanUntil(g),!p.scan(g))throw new Error("Unclosed tag at "+p.pos);if(m==">"?S=[m,v,b,p.pos,_,u,n]:S=[m,v,b,p.pos],u++,r.push(S),m==="#"||m==="^")o.push(S);else if(m==="/"){if(O=o.pop(),!O)throw new Error('Unopened section "'+v+'" at '+b);if(O[1]!==v)throw new Error('Unclosed section "'+O[1]+'" at '+b)}else m==="name"||m==="{"||m==="&"?c=!0:m==="="&&h(v)}if(d(),O=o.pop(),O)throw new Error('Unclosed section "'+O[1]+'" at '+p.pos);return Pu(Tu(r))}function Tu(e){for(var t=[],n,o,r=0,a=e.length;r<a;++r)n=e[r],n&&(n[0]==="text"&&o&&o[0]==="text"?(o[1]+=n[1],o[3]=n[3]):(t.push(n),o=n));return t}function Pu(e){for(var t=[],n=t,o=[],r,a,i=0,c=e.length;i<c;++i)switch(r=e[i],r[0]){case"#":case"^":n.push(r),o.push(r),n=r[4]=[];break;case"/":a=o.pop(),a[5]=r[2],n=o.length>0?o[o.length-1][4]:t;break;default:n.push(r)}return t}function Ne(e){this.string=e,this.tail=e,this.pos=0}Ne.prototype.eos=function(){return this.tail===""};Ne.prototype.scan=function(t){var n=this.tail.match(t);if(!n||n.index!==0)return"";var o=n[0];return this.tail=this.tail.substring(o.length),this.pos+=o.length,o};Ne.prototype.scanUntil=function(t){var n=this.tail.search(t),o;switch(n){case-1:o=this.tail,this.tail="";break;case 0:o="";break;default:o=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=o.length,o};function Se(e,t){this.view=e,this.cache={".":this.view},this.parent=t}Se.prototype.push=function(t){return new Se(t,this)};Se.prototype.lookup=function(t){var n=this.cache,o;if(n.hasOwnProperty(t))o=n[t];else{for(var r=this,a,i,c,_=!1;r;){if(t.indexOf(".")>0)for(a=r.view,i=t.split("."),c=0;a!=null&&c<i.length;)c===i.length-1&&(_=Xn(a,i[c])||mu(a,i[c])),a=a[i[c++]];else a=r.view[t],_=Xn(r.view,t);if(_){o=a;break}r=r.parent}n[t]=o}return nn(o)&&(o=o.call(this.view)),o};function V(){this.templateCache={_cache:{},set:function(t,n){this._cache[t]=n},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}V.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};V.prototype.parse=function(t,n){var o=this.templateCache,r=t+":"+(n||G.tags).join(":"),a=typeof o<"u",i=a?o.get(r):void 0;return i==null&&(i=Ou(t,n),a&&o.set(r,i)),i};V.prototype.render=function(t,n,o,r){var a=this.getConfigTags(r),i=this.parse(t,a),c=n instanceof Se?n:new Se(n,void 0);return this.renderTokens(i,c,o,t,r)};V.prototype.renderTokens=function(t,n,o,r,a){for(var i="",c,_,u,d=0,l=t.length;d<l;++d)u=void 0,c=t[d],_=c[0],_==="#"?u=this.renderSection(c,n,o,r,a):_==="^"?u=this.renderInverted(c,n,o,r,a):_===">"?u=this.renderPartial(c,n,o,a):_==="&"?u=this.unescapedValue(c,n):_==="name"?u=this.escapedValue(c,n,a):_==="text"&&(u=this.rawValue(c)),u!==void 0&&(i+=u);return i};V.prototype.renderSection=function(t,n,o,r,a){var i=this,c="",_=n.lookup(t[1]);function u(g){return i.render(g,n,o,a)}if(_){if($e(_))for(var d=0,l=_.length;d<l;++d)c+=this.renderTokens(t[4],n.push(_[d]),o,r,a);else if(typeof _=="object"||typeof _=="string"||typeof _=="number")c+=this.renderTokens(t[4],n.push(_),o,r,a);else if(nn(_)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");_=_.call(n.view,r.slice(t[3],t[5]),u),_!=null&&(c+=_)}else c+=this.renderTokens(t[4],n,o,r,a);return c}};V.prototype.renderInverted=function(t,n,o,r,a){var i=n.lookup(t[1]);if(!i||$e(i)&&i.length===0)return this.renderTokens(t[4],n,o,r,a)};V.prototype.indentPartial=function(t,n,o){for(var r=n.replace(/[^ \t]/g,""),a=t.split(`
`),i=0;i<a.length;i++)a[i].length&&(i>0||!o)&&(a[i]=r+a[i]);return a.join(`
`)};V.prototype.renderPartial=function(t,n,o,r){if(o){var a=this.getConfigTags(r),i=nn(o)?o(t[1]):o[t[1]];if(i!=null){var c=t[6],_=t[5],u=t[4],d=i;_==0&&u&&(d=this.indentPartial(i,u,c));var l=this.parse(d,a);return this.renderTokens(l,n,o,d,r)}}};V.prototype.unescapedValue=function(t,n){var o=n.lookup(t[1]);if(o!=null)return o};V.prototype.escapedValue=function(t,n,o){var r=this.getConfigEscape(o)||G.escape,a=n.lookup(t[1]);if(a!=null)return typeof a=="number"&&r===G.escape?String(a):r(a)};V.prototype.rawValue=function(t){return t[1]};V.prototype.getConfigTags=function(t){return $e(t)?t:t&&typeof t=="object"?t.tags:void 0};V.prototype.getConfigEscape=function(t){if(t&&typeof t=="object"&&!$e(t))return t.escape};var G={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){Me.templateCache=e},get templateCache(){return Me.templateCache}},Me=new V;G.clearCache=function(){return Me.clearCache()};G.parse=function(t,n){return Me.parse(t,n)};G.render=function(t,n,o,r){if(typeof t!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+pu(t)+'" was given as the first argument for mustache#render(template, view, partials)');return Me.render(t,n,o,r)};G.escape=Su;G.Scanner=Ne;G.Context=Se;G.Writer=V;const Au=({options:e,children:t})=>{const{throwAtramentError:n,getAssetPath:o}=$(),r=et(null),[a,i]=x(null);A(()=>{if(!r.current)return;const u=r.current.querySelector('[data-mount="content"]');i(u)},[]);let c={};if(Object.entries(e).forEach(([u,d])=>{const l=u.match(/var:(.+)/);l&&(c[l[1]]=`${d}`.startsWith("GAME_ASSET:")?o(d.replace("GAME_ASSET:","")):d)}),!Mt[e.src]){n(`Template not found: ${e.src}`);return}let _;try{_=G.render(Mt[e.src],c)}catch(u){n(`Template: ${e.src}. ${u}`),console.error(u);return}return s(E,{children:[e.wrapper==="span"?s("span",{ref:r,class:e.class,dangerouslySetInnerHTML:{__html:_}}):s("div",{ref:r,class:e.class,dangerouslySetInnerHTML:{__html:_}}),a&&ou(t,a)]})},Lu={tag:"template",component:Au},Iu=Object.freeze(Object.defineProperty({__proto__:null,default:Lu},Symbol.toStringTag,{value:"Module"})),ju=e=>e.stopPropagation(),Mu={tag:"url",component:({options:e,children:t})=>{const n=e.href||e.DEFAULT;return s("a",{href:n,class:w("atrament-tag-url",e.class),target:"_blank",rel:"noreferrer",onClick:ju,children:t})}},Ru=Object.freeze(Object.defineProperty({__proto__:null,default:Mu},Symbol.toStringTag,{value:"Module"})),Du=({options:e,children:t})=>{const{getAssetPath:n}=$(),o=L(["settings"]),r=et(null),{volume:a,mute:i}=o.settings;return A(()=>{r.current.volume=a/100},[r,a]),A(()=>{r.current.muted=i},[r,i]),s("video",{class:w("atrament-tag-video",e.class),ref:r,style:{"pointer-events":"none"},width:"100%",autoplay:!0,disablePictureInPicture:!0,loop:!0,...e,children:s("source",{src:n(t)})})},Fu={tag:"video",tagOptions:{raw:!0},component:Du},Vu=Object.freeze(Object.defineProperty({__proto__:null,default:Fu},Symbol.toStringTag,{value:"Module"})),Nu=Object.assign({"./banner/index.jsx":Nc,"./block/index.jsx":zc,"./button/index.jsx":qc,"./css/index.jsx":Yc,"./font/index.jsx":Jc,"./highlight/index.jsx":Qc,"./info/index.jsx":al,"./inline-image/index.jsx":_l,"./input/index.jsx":ml,"./layers/index.jsx":Ol,"./link/index.jsx":Il,"./picture/index.jsx":Rl,"./progress/index.jsx":Fl,"./separator/index.jsx":zl,"./spoiler/index.jsx":Kl,"./table/index.jsx":Zl,"./template/index.jsx":Iu,"./url/index.jsx":Ru,"./video/index.jsx":Vu}),Ke=Object.values(Nu).reduce((e,{default:t})=>(e[t.tag]=t,e),{}),Hu=e=>/<\/?[a-z][\s\S]*>/i.test(e),zu=({index:e,item:t})=>s("span",{dangerouslySetInnerHTML:{__html:t}},e),Q=/\[(\/?)([-\w]+)([^\]]*)\]/g;function Uu(e){const t={children:[]},n=[t];if(!e)return t;let o=0;for(Q.lastIndex=0;;){const r=Q.exec(e),a=n[n.length-1];if(!r)break;const[,i,c,_]=r,u=r.index;u>o&&a.children.push({type:"text",value:e.slice(o,u)});const d=Ke[c],l=d?.tagOptions?.raw,g=d?.tagOptions?.single;if(!d&&!i){const f=new RegExp(`\\[\\/${c}\\]`,"gi");f.lastIndex=Q.lastIndex;const h=f.exec(e),p=h?h.index+h[0].length:e.length;a.children.push({type:"text",value:e.slice(u,p)}),o=p,Q.lastIndex=p;continue}if(i)a.name===c&&n.pop();else{const f={type:"tag",name:c,options:je(_.trim()),children:[],raw:l,key:Math.random()};if(a.children.push(f),g){o=Q.lastIndex;continue}if(l){const h=new RegExp(`\\[\\/${c}\\]`,"gi");h.lastIndex=Q.lastIndex;const p=h.exec(e),b=p?p.index:e.length;f.children.push({type:"text",value:e.slice(Q.lastIndex,b)}),o=p?p.index+p[0].length:e.length,Q.lastIndex=o;continue}n.push(f)}o=Q.lastIndex}return o<e.length&&n[n.length-1].children.push({type:"text",value:e.slice(o)}),t}function Rt(e){if(e.type==="text")return Hu(e.value)?zu({index:Math.random(),item:e.value}):e.value;if(Ke[e.name]?.replacer)return(Ke[e.name]?.replacer??((o,r)=>s(E,{children:r})))(e.options,e.raw?e.children[0]?.value:e.children.map(Rt),o=>o);const t=Ke[e.name]?.component??E;return s(t,{options:e.options,markupRenderer:fr,children:e.raw?e.children[0]?.value:e.children.map(Rt)},e.key)}function fr(e){const t=Uu(e);return Rt(t)}const He=({children:e,isActive:t=!0})=>{const n=Ht(()=>fr(e),[e]);return s(Fe.Provider,{value:t,children:n})};function Bu(){const e=F(),t=L([me]);return t[me]!==Po?t[me]:e.translate("default.title")}const Gu=()=>{const e=Bu();return s("div",{class:w(jc.toolbar,"atrament-toolbar"),children:s(He,{children:e})})},Wu="_container_text_1o127_1",qu={container_text:Wu},ct=({children:e})=>s("div",{class:w(qu.container_text,"atrament-text-container"),children:e}),Ku="_container_scenes_13lih_1",Yu={container_scenes:Ku},Xu=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",Ju=({children:e,align:t})=>s("div",{class:w(Yu.container_scenes,"atrament-container-scene"),style:{"justify-content":Xu(t)},children:e}),Zu="_container_choices_41rpm_1",Qu={container_choices:Zu},e_=({children:e,key:t,isReady:n})=>s("div",{class:w(Qu.container_choices,"atrament-container-choices",n&&"animation_appear"),children:s("div",{style:{opacity:n?1:0},children:s(ee,{children:e})})},t),t_="_scene_1ifs0_1",n_={scene:t_},hr=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function o_(e,t){this.scrollLeft=e,this.scrollTop=t}const gr=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,pr=(e,t,n)=>gr(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),Zn=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},r_=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},on=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function s_(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const a_=e=>.5*(1-Math.cos(Math.PI*e));function rn(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),rn=t,t()}const i_=500,mr=e=>{const n=(rn()-e.timeStamp)/(e.duration||i_);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||a_)(n),r=e.startX+(e.targetX-e.startX)*o,a=e.startY+(e.targetY-e.startY)*o;e.method(r,a),e.rafId=window.requestAnimationFrame(()=>{mr(e)})},Je=e=>isFinite(e)?Number(e):0,c_=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},l_=(e,t,n)=>{var o,r;if(!c_(e))return;const a=e.scrollLeft,i=e.scrollTop,c=Je((o=t.left)!==null&&o!==void 0?o:a),_=Je((r=t.top)!==null&&r!==void 0?r:i);if(c===a&&_===i)return;const u=Zn(HTMLElement.prototype,"scroll",o_),d=Zn(Object.getPrototypeOf(e),"scroll",u).bind(e);if(t.behavior!=="smooth"){d(c,_);return}const l=()=>{window.removeEventListener("wheel",h),window.removeEventListener("touchmove",h)},g=()=>{l();const p=e.nodeType===9;e.dispatchEvent(s_(p))},f=Object.assign(Object.assign({},n),{timeStamp:rn(),startX:a,startY:i,targetX:c,targetY:_,rafId:0,method:d,callback:g}),h=()=>{window.cancelAnimationFrame(f.rafId),l()};window.addEventListener("wheel",h,{passive:!0,once:!0}),window.addEventListener("touchmove",h,{passive:!0,once:!0}),mr(f)},u_=e=>e.window===e,__=e=>(t,n,o)=>{const[r,a]=u_(t)?[on(t.document.documentElement),"Window"]:[t,"Element"],i=n??{};if(!r_(i))throw new TypeError(gr(e,a));if(!hr(i.behavior))throw new TypeError(pr(e,a,i.behavior));e==="scrollBy"&&(i.left=Je(i.left)+r.scrollLeft,i.top=Je(i.top)+r.scrollTop),l_(r,i,o)},d_=__("scroll"),f_=d_,vr=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},br=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},h_=e=>(br(vr(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,g_=(e,t,n)=>{const[o,r,a]=br(t,n,e.block||"start",e.inline||"nearest");return[r,a].map((i,c)=>{switch(i){case"center":return 1;case"nearest":return 0;default:{const _=o>>c&1;return i==="start"==!_?2:3}}})},Qn=(e,t,n,o,r,a,i)=>e!==0?e:r<t&&a>n||r>t&&a<n?null:r<=t&&i<=o||a>=n&&i>=o?2:a>n&&i<o||r<t&&i>o?3:null,eo=e=>e!=="visible"&&e!=="clip",p_=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},m_=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?eo(t.overflowY)||eo(t.overflowX)||e===on(e):!1,to=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return p_(e)}return n},yt=(e,t,n)=>e<t?t:e>n?n:e,v_=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],b_=(e,t,n)=>{const{top:o,right:r,bottom:a,left:i}=t,c=v_(e.ownerDocument);if(!c)return[o,r,a,i];const _=u=>{const d=n.getPropertyValue(`${c}-${u}`);return parseInt(d,10)||0};return[o-_("top"),r+_("right"),a+_("bottom"),i-_("left")]},We=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},y_=(e,t)=>{var n,o,r;const a=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[i,c,_,u]=e===on(e)?[0,0,(o=a?.width)!==null&&o!==void 0?o:e.clientWidth,(r=a?.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],d=i+e.clientLeft,l=c+e.clientTop,g=d+_,f=l+u;return[l,g,f,d]},k_=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const a=window.getComputedStyle(e),i=a.direction!=="rtl",c=vr(a.writingMode||a.getPropertyValue("-webkit-writing-mode")||a.getPropertyValue("-ms-writing-mode")),[_,u]=g_(t,c,i);let[d,l,g,f]=b_(e,e.getBoundingClientRect(),a);for(let h=to(e);h!==null;h=to(h)){if(o!==h.ownerDocument){if(o=h.ownerDocument,r=o.defaultView,!r)break;const{left:H,top:Z}=h.getBoundingClientRect();d+=Z,l+=H,g+=Z,f+=H}const p=r.getComputedStyle(h);if(p.position==="fixed")break;if(!m_(h,p))continue;const b=h.getBoundingClientRect(),[m,v,y,S]=y_(h,b),O=Qn(_,S,v,h.clientWidth,f,l,l-f),P=Qn(u,m,y,h.clientHeight,d,g,g-d),N=O===null?0:We(O,f,l)-We(O,S,v),R=P===null?0:We(P,d,g)-We(P,m,y),J=h_(p)?yt(N,-h.scrollWidth+h.clientWidth-h.scrollLeft,-h.scrollLeft):yt(N,-h.scrollLeft,h.scrollWidth-h.clientWidth-h.scrollLeft),ce=yt(R,-h.scrollTop,h.scrollHeight-h.clientHeight-h.scrollTop);n.push([h,{left:h.scrollLeft+J,top:h.scrollTop+ce,behavior:t.behavior}]),d=Math.max(d-ce,m),l=Math.min(l-J,v),g=Math.min(g-ce,y),f=Math.max(f-J,S)}return n},w_=(e,t,n)=>{const o=t||{};if(!hr(o.behavior))throw new TypeError(pr("scrollIntoView","Element",o.behavior));k_(e,o).forEach(([a,i])=>{f_(a,i,n)})},S_="_paragraph_p4rto_1",x_="_inactive_p4rto_19",no={paragraph:S_,inactive:x_},sn=({children:e,active:t=!0,class_override:n=""})=>s("div",{class:w(no.paragraph,!t&&no.inactive,"atrament-paragraph",n),children:e}),C_=({content:e,isCurrent:t})=>e.text===`
`||e.text===""?s(E,{}):s(sn,{active:t,class_override:e.tags.CLASS,children:s(He,{isActive:t,children:e.text})});function an(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{if(!o){r();return}const a=new Image;a.onload=r,a.onerror=r,a.src=e(o)}));return Promise.allSettled(n)}const E_="_loader_tepn4_1",$_={loader:E_},yr=({delay:e=Gr})=>{const[t,n]=x(!1);return A(()=>{const o=setTimeout(()=>n(!0),e);return()=>clearTimeout(o)},[e]),s("div",{class:$_.loader,style:{opacity:t?1:0}})},O_=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const{getAssetPath:r}=$(),[a,i]=x(!1),c=et(null),_=k(u=>{o(!0),setTimeout(()=>{w_(c.current,{behavior:u,block:"start"},{duration:Yr})},Kr)},[o]);return A(()=>{a&&t&&_(n?"instant":"smooth")},[a,t,n,_]),A(()=>{(async()=>(await an(r,e.images),i(!0)))()},[e,i,r]),s("div",{class:w(n_.scene,"atrament-scene",t&&a&&"animation_appear"),ref:c,children:a?e.content.map((u,d)=>s(E,{children:[u.images.map((l,g)=>s(tn,{src:r(l)},`${g}-${l}`)),s(C_,{isCurrent:t,content:u})]},`paragraph-${e.uuid}-${d}`)):s(yr,{})})},T_="_choice_button_g3zjd_1",P_="_choice_active_g3zjd_25",A_="_choice_inactive_g3zjd_49",L_="_buttons_separate_g3zjd_71",I_="_buttons_grouped_g3zjd_78",j_="_buttons_grouped_row_g3zjd_101",M_="_left_aligned_g3zjd_123",R_="_right_aligned_g3zjd_127",ne={choice_button:T_,choice_active:P_,choice_inactive:A_,buttons_separate:L_,buttons_grouped:I_,buttons_grouped_row:j_,left_aligned:M_,right_aligned:R_},D_=({choice:e,chosen:t,index:n,handleClick:o,choiceAppearance:r})=>{const a=t!==null,i=t===e.id,c=()=>{a||o(e.id)},_=a?i?ne.choice_active:ne.choice_inactive:"",u=r.grouped?r.row?ne.buttons_grouped_row:ne.buttons_grouped:ne.buttons_separate,d=r.left?ne.left_aligned:r.right?ne.right_aligned:"",l=w(ne.choice_button,u,d,_,"atrament-choice",e.tags.CLASS);return s("button",{class:l,onClick:c,disabled:e.disabled,children:[r.numbered?s(E,{children:[n+1,". "]}):"",s(He,{children:e.choice})]})},F_=({options:e,choices:t,selectChoice:n})=>{const{throwAtramentError:o}=$(),r=je(`${e} `),a=(r.delay||0)*1e3,i=a/100,[c,_]=x(a),u=k(()=>{let d;if(r.choice?d=t.filter(l=>l.choice===r.choice):d=[t[Math.floor(Math.random()*t.length)]],!Array.isArray(d)||!d[0]){o(`Choice not found: ${JSON.stringify(r.choice)}`);return}n(d[0].id)},[t,n,r,o]);return A(()=>{const d=setInterval(()=>{_(l=>(l-i<=0&&(clearInterval(d),u()),l-i))},i);return()=>clearInterval(d)},[]),s(Xt,{options:{display:"thin",border:!1,min:0,max:a,value:c}})},V_="_choice_prompt_1t7pu_1",N_="_choice_row_1t7pu_13",H_="_choice_row_ungrouped_1t7pu_19",kt={choice_prompt:V_,choice_row:N_,choice_row_ungrouped:H_},z_=({key:e,currentScene:t,setReady:n})=>{const{makeChoice:o,continueStory:r}=$(),{metadata:a}=L(["metadata"]),[i,c]=x(null),_=t.choices?.filter(b=>!b.tags?.HIDDEN),u=Array.isArray(_)?_.length:-1,d=u>1?qr:Wr,l=k(b=>{c(b),setTimeout(()=>{c(null),n(!1),o(b),r()},d)},[o,r,n,d]),g=k(b=>{if(i!==null)return;const m=+b.key;b.target.tagName.toLowerCase()!=="input"&&u>0&&m>0&&m<=u&&!_[m-1].disabled&&l(_[m-1].id)},[u,l,_,i]);st(g);const f=t.tags?.CHOICES||a.choices,h={grouped:!!f?.includes("grouped"),left:!!f?.includes("left"),right:!!f?.includes("right"),numbered:!!f?.includes("numbered"),row:!!f?.includes("row")},p=w(h.row&&kt.choice_row,h.row&&!h.grouped&&kt.choice_row_ungrouped,"atrament-choices");return s(E,{children:[t.tags?.PROMPT&&s("div",{class:w(kt.choice_prompt,"atrament-prompt"),children:t.tags.PROMPT}),t.tags?.AUTO_CHOICE&&s(F_,{options:t.tags.AUTO_CHOICE,choices:t.choices,selectChoice:l}),s("div",{class:p,children:_.map((b,m)=>s(D_,{index:m,choice:b,chosen:i,handleClick:l,choiceAppearance:h},`${e}-${m}`))})]})},U_="_container_1pyc1_10",B_="_circle_1pyc1_18",G_="_circle_empty_1pyc1_53",wt={container:U_,circle:B_,circle_empty:G_},oo=()=>document.getElementsByClassName("atrament-container-scene")[0],ro=()=>document.getElementsByClassName("atrament-container-choices")[0],so=({setReady:e,withChoice:t=!1,delay:n=0,animation:o=0,clickable:r=0})=>{const{makeChoice:a,continueStory:i}=$(),[c,_]=x(!1),u=F(),d=k(()=>{setTimeout(()=>{e(!1),t&&a(0),i()},0)},[a,i,e,t]),l=k(h=>{(h.key===" "||h.key==="Enter")&&d()},[d]),g=k(()=>(document.addEventListener("keydown",l,!1),oo().addEventListener("click",d,!1),ro().addEventListener("click",d,!1),0),[d,l]),f=k(()=>(document.removeEventListener("keydown",l,!1),oo().removeEventListener("click",d,!1),ro().removeEventListener("click",d,!1),0),[d,l]);return A(()=>{const h=setTimeout(g,r*1e3),p=setTimeout(()=>_(!0),o*1e3),b=n?setTimeout(d,n*1e3):void 0;return()=>{clearTimeout(p),clearTimeout(h),clearTimeout(b),f()}},[g,f,d,_,r,n,o]),s("div",{class:wt.container,children:c?s("div",{class:w(wt.circle,n&&wt.circle_empty),title:u.translate("game.click-to-continue")}):""})};function W_(e){const t={delay:0,animation:0,clickable:0};if(e.startsWith("(")){const n=je(e.replace(/[()]/g,""));Object.entries(n).forEach(([o,r])=>t[o]=r),t.continue&&(t.delay=t.continue)}else e?t.delay=e:t.animation=3;return t}const q_=()=>{const{atrament:e}=$();return s(D,{accented:!0,onClick:async()=>{await e.game.removeSave(),se("/")},children:s(T,{id:"game.end"})},"game-end")},K_=({key:e,currentScene:t,setReady:n,isHypertextMode:o})=>{const r=t?.choices?t.choices.length:-1;if(r===1){const a=t.choices[0].choice.match(/^(|>>>(\d*|\(.+?\)))$/);if(a){const i=W_(a[2]);return s(so,{setReady:n,withChoice:!0,delay:i.delay,animation:i.animation,clickable:i.clickable})}}else if(r===0)return t.canContinue?s(so,{setReady:n,animation:3}):s(q_,{});return o||!t?s(E,{}):s(z_,{currentScene:t,setReady:n},e)},Y_=()=>{const e=L(["scenes","metadata"]),[t,n]=x(!1),o=e.scenes.length-1,r=!!e.metadata.hypertext||!!e.scenes[o]?.tags.HYPERTEXT,a=`choices-${e.scenes[o]?.uuid}`;return s(ct,{children:[s(Ju,{align:e.metadata.scenes_align,children:e.scenes.map((i,c)=>s(O_,{scene:i,isCurrent:c===o,isSingle:o===0,readyHandler:n},i.uuid))}),s(e_,{isReady:t,children:s(K_,{currentScene:e.scenes[o],setReady:n,isHypertextMode:r},a)},a)]})},X_="_overlay_container_1yvyk_1",J_="_overlay_header_1yvyk_11",Z_="_overlay_header_modal_1yvyk_25",Q_="_overlay_header_bottom_line_1yvyk_30",ed="_overlay_title_1yvyk_34",td="_overlay_title_modal_1yvyk_43",nd="_overlay_content_1yvyk_47",od="_button_back_1yvyk_62",B={overlay_container:X_,overlay_header:J_,overlay_header_modal:Z_,overlay_header_bottom_line:Q_,overlay_title:ed,overlay_title_modal:td,overlay_content:nd,button_back:od};function rd({children:e,title:t,closeOverlay:n}){return s("div",{class:B.overlay_container,children:[s("div",{class:w(B.overlay_header,B.overlay_header_bottom_line),children:[s("button",{class:B.button_back,onClick:n,children:s(Va,{})}),t&&s("div",{class:B.overlay_title,children:t})]}),s(ct,{children:s("div",{class:w(B.overlay_content,"atrament-overlay"),children:e})})]})}function sd({children:e,title:t,closeOverlay:n}){return s(Wt,{children:[s(qt,{onClick:n}),s(Kt,{children:[s("div",{class:w(B.overlay_header,B.overlay_header_modal,t&&B.overlay_header_bottom_line),children:[s("div",{class:w(B.overlay_title,B.overlay_title_modal),children:t}),s("div",{children:s(ot,{onClick:n})})]}),s(ct,{children:s("div",{class:w(B.overlay_content,"atrament-overlay"),children:e})})]})]})}function ad(){const{getAssetPath:e}=$(),{overlay:t,closeOverlay:n}=rt(),[o,r]=x(!1),a=async()=>{await an(e,Vo(t.content)),r(!0)};return A(()=>{t.current&&a()}),[o,t,n]}const id=e=>e===""||e===`
`?s(E,{}):s(sn,{children:s(He,{children:e})},Math.random()),cd=()=>{const[e,t,n]=ad();if(!t.current)return s(E,{});const o=e?t.content.map(id):s(yr,{}),r=t.display==="modal"?sd:rd;return s(r,{title:t.title,closeOverlay:n,children:o})};function ld(){const{atrament:e}=$(),t=L([Pe]),n=k(()=>e.state.setKey(Pe,null),[e]);return[t[Pe],n]}const kr=()=>{const[e,t]=ld(),n=k(o=>{o.key==="Escape"&&t()},[t]);if(st(n),e)return s(Ko,{close:t,message:e})},ao=async(e,t,n)=>{await an(e,[t]),n()},ud=()=>{const{getAssetPath:e}=$(),[t,n]=x({}),o=L(["game"]),r=o.game[Bt],a=o.game[Gt];return A(()=>{r?ao(e,r,()=>n({"background-image":`url(${e(r)})`,"background-size":"cover","background-position":"center"})):n({})},[r,n]),A(()=>{ao(e,a,()=>lr(a,e))},[a,e]),s(Ve,{style:t,children:[s(Qt,{}),s(kr,{}),s(Gu,{}),s(cd,{}),s(Y_,{})]})};function _d(){const{evaluateInkFunction:e}=$(),{metadata:t}=L(["metadata"]),[n,o]=x(" ");return A(()=>{const r=e(t.about);o(r.output||" ")},[t.about,o,e]),n.split(`
`)}const dd=()=>se("/"),fd=()=>{const e=_d();return s(Ve,{children:[s(Qt,{isHomeScreen:!0}),s(kr,{}),s(ct,{children:[s(Yt,{children:[s(ee,{children:" "}),s(ee,{children:e.map(t=>s(sn,{children:s(He,{children:t})},t))})]}),s(ee,{children:s(D,{onClick:dd,children:s(T,{id:"main.menu"})},"mainmenu")})]})]})};function hd(){const{atrament:e}=$(),t=k(n=>{n.url==="/"&&n.previous&&e.game.clear()},[e.game]);return s(Jo,{history:Ea(),onChange:t,children:[s(Lc,{path:"/"}),s(ud,{path:"/game"}),s(fd,{path:"/about"})]})}let St;function wr(){window.innerHeight!==St&&(St=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${St}px`))}window.addEventListener("resize",wr);function gd(){const[e,t]=x(null),[n,o]=x(null),[r,a]=x(0);return A(wr,[]),A(()=>{(async()=>{const{default:c}=await ge(async()=>{const{default:u}=await import("./atrament-Cid39bco.js");return{default:u}},[],import.meta.url),{Story:_}=await ge(async()=>{const{Story:u}=await import("./inkjs-BOXbcKQS.js");return{Story:u}},[],import.meta.url);c.interfaces.loader.onProgress(({percent:u})=>a(u));try{await ys(c,_),t(c)}catch(u){console.error(u),o(u.message)}})()},[]),s(Nr,{language:zr,locales:Os,children:s(Ut.Provider,{value:e,children:s(As,{children:e?s(hd,{}):n?s(Ve,{children:s(Ko,{message:n})}):s(ga,{loadedPercent:r})})})})}async function io(){const t=window.screenX<-1e4||window.screenX>window.screen.availWidth+1e4,n=window.screenY<-1e4||window.screenY>window.screen.availHeight+1e4;(t||n)&&(console.warn("fixing unmaximize bug",window.screenX,window.screenY),await window.Neutralino.window.center())}window.Neutralino&&(addEventListener("resize",io),addEventListener("DOMContentLoaded",io));Ot(s(gd,{}),document.getElementById("app"));export{ge as _};
